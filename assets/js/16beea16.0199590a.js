"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[35725],{3905:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>k});var n=t(67294);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,l=function(e,r){if(null==e)return{};var t,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(l[t]=e[t]);return l}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=n.createContext({}),m=function(e){var r=n.useContext(i),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},p=function(e){var r=m(e.components);return n.createElement(i.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},c=n.forwardRef((function(e,r){var t=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=m(t),k=l,d=c["".concat(i,".").concat(k)]||c[k]||u[k]||o;return t?n.createElement(d,a(a({ref:r},p),{},{components:t})):n.createElement(d,a({ref:r},p))}));function k(e,r){var t=arguments,l=r&&r.mdxType;if("string"==typeof e||l){var o=t.length,a=new Array(o);a[0]=c;var s={};for(var i in r)hasOwnProperty.call(r,i)&&(s[i]=r[i]);s.originalType=e,s.mdxType="string"==typeof e?e:l,a[1]=s;for(var m=2;m<o;m++)a[m]=t[m];return n.createElement.apply(null,a)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},25854:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>m});var n=t(87462),l=(t(67294),t(3905));const o={title:"\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2Promise",date:new Date("2022-02-12T00:00:00.000Z"),author:"Justin",top:!1,cover:!1,categories:"\u9762\u8bd5\u9898",tags:["\u9762\u8bd5\u9898"]},a=void 0,s={permalink:"/blog/\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2Promise",editUrl:"https://git.7wate.com/zhouzhongping/wiki/src/branch/master/blog/\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2Promise.md",source:"@site/blog/\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2Promise.md",title:"\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2Promise",description:"\u4e00\u3001\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165Promise?",date:"2022-02-12T00:00:00.000Z",formattedDate:"2022\u5e742\u670812\u65e5",tags:[{label:"\u9762\u8bd5\u9898",permalink:"/blog/tags/\u9762\u8bd5\u9898"}],readingTime:10.8,hasTruncateMarker:!1,authors:[{name:"Justin"}],frontMatter:{title:"\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2Promise",date:"2022-02-12T00:00:00.000Z",author:"Justin",top:!1,cover:!1,categories:"\u9762\u8bd5\u9898",tags:["\u9762\u8bd5\u9898"]},prevItem:{title:"\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2\u6df1\u62f7\u8d1d",permalink:"/blog/\u8fd9\u4e00\u6b21\uff0c\u5f7b\u5e95\u641e\u61c2\u6df1\u62f7\u8d1d"},nextItem:{title:"LeetCode\u2014\u2014\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\uff08\u52a8\u6001\u89c4\u5212\uff09",permalink:"/blog/LeetCode\u2014\u2014\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\uff08\u52a8\u6001\u89c4\u5212\uff09"}},i={authorsImageUrls:[void 0]},m=[{value:"\u4e00\u3001\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165Promise?",id:"\u4e00\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165promise",level:2},{value:"Promise\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f",id:"promise\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898",level:3},{value:"Promise\u6709\u54ea\u4e9b\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f\uff1f",id:"promise\u6709\u54ea\u4e9b\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f",level:3},{value:"\u4e8c\u3001\u624b\u5199Prromise\u8eab\u4e0a\u7684\u65b9\u6cd5",id:"\u4e8c\u624b\u5199prromise\u8eab\u4e0a\u7684\u65b9\u6cd5",level:2},{value:"\u624b\u5199Promise.all",id:"\u624b\u5199promiseall",level:3},{value:"\u624b\u5199Promise.race",id:"\u624b\u5199promiserace",level:3},{value:"\u624b\u5199Promise.finally",id:"\u624b\u5199promisefinally",level:3},{value:"Promise.all\u548cPromise.race\u7684\u533a\u522b",id:"promiseall\u548cpromiserace\u7684\u533a\u522b",level:3},{value:"Promise.all\u548cPromise.race\u7684\u5e94\u7528\u573a\u666f",id:"promiseall\u548cpromiserace\u7684\u5e94\u7528\u573a\u666f",level:3},{value:"promise.all()\u7684\u5e94\u7528\u573a\u666f",id:"promiseall\u7684\u5e94\u7528\u573a\u666f",level:4},{value:"Promise.race()\u7684\u5e94\u7528\u573a\u666f",id:"promiserace\u7684\u5e94\u7528\u573a\u666f",level:4},{value:"\u4e09\u3001Promise\u662f\u5982\u4f55\u89e3\u51b3\u4e32\u884c\u548c\u5e76\u884c\u7684\uff1f",id:"\u4e09promise\u662f\u5982\u4f55\u89e3\u51b3\u4e32\u884c\u548c\u5e76\u884c\u7684",level:2},{value:"\u4ec0\u4e48\u662f\u5e76\u884c\uff1f\u4ec0\u4e48\u662f\u4e32\u884c\uff1f",id:"\u4ec0\u4e48\u662f\u5e76\u884c\u4ec0\u4e48\u662f\u4e32\u884c",level:3},{value:"Promise\u5b9e\u73b0\u5e76\u884c\u8bf7\u6c42",id:"promise\u5b9e\u73b0\u5e76\u884c\u8bf7\u6c42",level:3},{value:"Promise\u5b9e\u73b0\u4e32\u884c\u8bf7\u6c42",id:"promise\u5b9e\u73b0\u4e32\u884c\u8bf7\u6c42",level:3},{value:"\u56db\u3001\u4ec0\u4e48\u662fPromise\u7a7f\u900f\uff1f",id:"\u56db\u4ec0\u4e48\u662fpromise\u7a7f\u900f",level:2},{value:"\u4e94\u3001\u4f7f\u7528Promise\u5c01\u88c5Ajax\u8bf7\u6c42",id:"\u4e94\u4f7f\u7528promise\u5c01\u88c5ajax\u8bf7\u6c42",level:2},{value:"\u516d\u3001Promise\u6709\u54ea\u4e9b\u72b6\u6001\uff1f",id:"\u516dpromise\u6709\u54ea\u4e9b\u72b6\u6001",level:2},{value:"Promise\u72b6\u6001\u7684\u53d8\u5316\u8fc7\u7a0b",id:"promise\u72b6\u6001\u7684\u53d8\u5316\u8fc7\u7a0b",level:3},{value:"\u4e03\u3001\u5c06callback\u6539\u5199\u6210Promise",id:"\u4e03\u5c06callback\u6539\u5199\u6210promise",level:2}],p={toc:m};function u(e){let{components:r,...t}=e;return(0,l.kt)("wrapper",(0,n.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u4e00\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165promise"},"\u4e00\u3001\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165Promise?"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5728\u4ecb\u7ecd\u672c\u7ae0\u4e4b\u524d\uff0c\u9996\u5148\u5148\u629b\u51fa\u51e0\u4e2a\u95ee\u9898\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Promise\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f"),(0,l.kt)("li",{parentName:"ul"},"Promise\u6709\u54ea\u4e9b\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f\uff1f")),(0,l.kt)("h3",{id:"promise\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898"},"Promise\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u56de\u8c03\u5730\u72f1\u95ee\u9898")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5728\u6ca1\u6709Promise\u4e4b\u524d\uff0c\u524d\u7aef\u83b7\u53d6\u6570\u636e\u5f80\u5f80\u9700\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u5c42\u5c42\u5d4c\u5957\u7684\u65b9\u5f0f\u6765\u89e3\u51b3\u5f02\u6b65\u95ee\u9898\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u5b9e\u4f8b\uff1a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u56de\u8c03\u5730\u72f1\u5b9e\u4f8b\n\n// \u5976\u8336\u51fd\u6570\nfunction getTea(fn) {\n  setTimeout(() => {\n    fn('\u83b7\u53d6\u5230\u4e00\u676f\u5976\u8336')\n  },2000)\n}\n\n// \u9762\u5305\u51fd\u6570\nfunction getBread(fn) {\n  setTimeout(() => {\n    fn('\u83b7\u53d6\u5230\u4e00\u4e2a\u9762\u5305')\n  },100)\n}\n\n// \u5982\u679c\u5fc5\u987b\u6309\u7167\u987a\u5e8f\u83b7\u53d6\uff0c\u800c\u4e0d\u662f\u6839\u636e\u65f6\u95f4\uff0c\u8981\u6c42\u662f\u5148\u83b7\u53d6\u5230\u5976\u8336\u540e\u83b7\u53d6\u5230\u9762\u5305\u3002\ngetTea(function(data) {\n  console.log(data);\n  getBread(function(data) {\n    console.log(data);\n  }) \n})\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u53ef\u8bfb\u6027\u95ee\u9898")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u901a\u8fc7Promise\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u9762\u7684\u4ee3\u7801\u91cd\u5199\u4e3a\u4e0b\u9762\u7684\u65b9\u5f0f\uff0c\u660e\u663e\u8fd9\u6837\u53ef\u8bfb\u6027\u66f4\u9ad8\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e0b\u9762\u89e3\u91ca\u4e0b\uff0c\u5982\u4f55\u901a\u8fc7Promise\u6765\u89e3\u51b3\u56de\u8c03\u5730\u72f1\u7684\u95ee\u9898\nfunction getTea() {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve('\u83b7\u53d6\u5230\u4e00\u676f\u5976\u8336')\n    }, 2000)\n  })\n}\n\nfunction getBread() {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve('\u83b7\u53d6\u5230\u4e00\u4e2a\u9762\u5305')\n    }, 500)\n  })\n}\n\ngetTea()\n  .then(res => {\n    console.log(res);\n    return getBread();\n  })\n  .then(res => {\n    console.log(res);\n  })\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u4fe1\u4efb\u95ee\u9898(\u4e5f\u53eb\u56de\u8c03\u591a\u6b21\u6267\u884c\u95ee\u9898)")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4f20\u7edf\u7684\u56de\u8c03\u51fd\u6570\u65e0\u6cd5\u4fdd\u8bc1\u53ea\u88ab\u6267\u884c\u4e00\u6b21\uff0c\u56de\u8c03\u51fd\u6570\u8fd8\u8981\u53ef\u80fd\u88ab\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\uff0c\u800cPromise\u8c03\u7528\u4e14\u4ec5\u8c03\u7528\u4e00\u6b21resolve\uff0c\u4e0d\u4f1a\u4ea7\u751f\u56de\u8c03\u591a\u6b21\u6267\u884c\u7684\u95ee\u9898\uff0c\u6240\u4ee5Promise\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u7b2c\u4e09\u65b9\u5e93\u591a\u6b21\u8c03\u7528\u56de\u8c03\u7684\u95ee\u9898\u3002")),(0,l.kt)("h3",{id:"promise\u6709\u54ea\u4e9b\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f"},"Promise\u6709\u54ea\u4e9b\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f\uff1f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u573a\u666f1\uff1a\u5c06\u56fe\u7247\u7684\u52a0\u8f7d\u5199\u6210\u4e00\u4e2aPromise\uff0c\u56fe\u7247\u4e00\u65e6\u52a0\u8f7d\u5b8c\u6210\uff0cPromise\u7684\u72b6\u6001\u5c31\u4f1a\u53d1\u751f\u53d8\u5316\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u573a\u666f2\uff1a\u5f53\u4e0b\u4e00\u4e2a\u5f02\u6b65\u8bf7\u6c42\u9700\u8981\u4f9d\u8d56\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u901a\u8fc7\u94fe\u5f0f\u64cd\u4f5c\u89e3\u51b3\u95ee\u9898\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u573a\u666f3\uff1a\u901a\u8fc7all()\u5b9e\u73b0\u591a\u4e2a\u8bf7\u6c42\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u6c47\u603b\u6240\u6709\u7684\u8bf7\u6c42\u7ed3\u679c\uff0c\u53ea\u9700\u8bbe\u7f6e\u4e00\u4e2aloading\u5373\u53ef\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u573a\u666f4\uff1a\u901a\u8fc7race()\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u7247\u8bf7\u6c42\u8d85\u65f6\u3002")),(0,l.kt)("h2",{id:"\u4e8c\u624b\u5199prromise\u8eab\u4e0a\u7684\u65b9\u6cd5"},"\u4e8c\u3001\u624b\u5199Prromise\u8eab\u4e0a\u7684\u65b9\u6cd5"),(0,l.kt)("h3",{id:"\u624b\u5199promiseall"},"\u624b\u5199Promise.all"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise.all\u7684\u7279\u70b9\u662f\u63a5\u6536\u7684\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5f53\u8fd9\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u6267\u884c\u6210\u529f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u4e00\u4e2a\u51fa\u9519\u5219\u7acb\u5373\u8fd4\u56de\u9519\u8bef\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function myPromiseAll(iterable) {\n  // \u9996\u5148\u660e\u786e\u8981\u8fd4\u56de\u7684\u5bf9\u8c61\u662f\u4e00\u4e2aPromise\n  return new Promise((resolve,reject) => {\n    // \u9996\u5148\u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61\u8f6c\u6362\u4e3a\u6570\u7ec4\n    const promises = Array.from(iterable);\n    let flag = 0;\n    const result = [];\n    // \u5f00\u59cb\u904d\u5386\u6267\u884c\n    for (let i = 0; i < promises.length; i++) {\n      Promise.resolve(promises[i]).then(res => {\n        result[i] = res;\n        flag++;\n        if (flag === promises.length) {\n          resolve(result)\n        }\n      }).catch(err => {\n        reject(err)\n      })\n    }\n  })  \n}\n")),(0,l.kt)("h3",{id:"\u624b\u5199promiserace"},"\u624b\u5199Promise.race"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise.race\u51fd\u6570\u63a5\u6536\u7684\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u76f8\u5f53\u4e8e\u8ba9\u8fd9\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u6240\u6709promise\u5bf9\u8c61\u8fdb\u884c\u8d5b\u8dd1\uff0c\u53ea\u8981\u6709\u4e00\u4e2apromise\u5bf9\u8c61\u53d1\u751f\u4e86\u72b6\u6001\u53d8\u5316\uff0c\u90a3\u4e48\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2apromise\u5bf9\u8c61\u8fd4\u56de\u7684\u7ed3\u679c\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u624b\u5199promise.race\nfunction myPromiseRace(iterator) {\n  // \u9996\u5148\u8fd4\u56de\u7684\u662f\u4e00\u4e2apromise\u5bf9\u8c61\n  return new Promise((resolve,reject) => {\n    for (let item of iterator) {\n      Promise.resolve(item).then(res => {\n        resolve(item);\n      }).catch(err => {\n        reject(err);\n      })\n    }\n  })\n}\n\nlet p1 = new Promise(resolve => {\n  setTimeout(resolve, 105, 'p1 done')\n})\nlet p2 = new Promise(resolve => {\n  setTimeout(resolve, 100, 'p2 done')\n})\nmyPromiseRace([p1, p2]).then(data => {\n  console.log(data); // p2 done\n})\n")),(0,l.kt)("h3",{id:"\u624b\u5199promisefinally"},"\u624b\u5199Promise.finally"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise.finally\u7684\u7279\u70b9")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u65e0\u8bba\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff0c\u90fd\u4f1a\u6267\u884c\u8fd9\u4e2a\u65b9\u6cd5"),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u7684\u662f\u4e00\u4e2aPromise")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise.finally\u6267\u884c\u7684\u4f8b\u5b50")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"let p = new Promise((resolve,reject) => {\n  setTimeout(() => {\n    resolve(111);\n  },2000)\n})\n\np.then(res => {\n  console.log(res);  // 111\n}).finally(() => {\n  console.log('\u65e0\u8bba\u5982\u4f55\u8fd9\u91cc\u90fd\u4f1a\u88ab\u6267\u884c');  // \u65e0\u8bba\u5982\u4f55\u8fd9\u91cc\u90fd\u4f1a\u88ab\u6267\u884c\n})\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u624b\u5199Promise.finally\uff08Promise.finally\u8fd4\u56de\u7684\u672c\u8d28\u4e0a\u662f\u4e00\u4e2athen\u65b9\u6cd5\uff0c\u9700\u8981\u5728then\u65b9\u6cd5\u4e2d\u6267\u884c\u6211\u4eec\u4f20\u5165\u7684\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u5f62\u53c2\uff09")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"Promise.prototype.finally = function(f) {\n  return this.then((value) => {\n    return Promise.resolve(f()).then(() => value)\n  },(err) => {\n    return Promise.resolve(f()).then(() => {\n      throw err;\n    })\n  })\n}\n")),(0,l.kt)("h3",{id:"promiseall\u548cpromiserace\u7684\u533a\u522b"},"Promise.all\u548cPromise.race\u7684\u533a\u522b"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise.all()\u6210\u529f\u548c\u5931\u8d25\u7684\u8fd4\u56de\u503c\u662f\u4e0d\u540c\u7684\uff0c\u6210\u529f\u7684\u65f6\u5019\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u7ed3\u679c\u6570\u7ec4\uff0c\u800c\u5931\u8d25\u7684\u65f6\u5019\u8fd4\u56de\u7684\u662f\u6700\u5148\u88abreject\u7684\u503c\u3002\u5f53Promise.all()\u7684\u7ed3\u679c\u662f\u6210\u529f\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u7ed3\u679c\u7684\u6570\u7ec4\u91cc\u8fb9\u7684\u6570\u636e\u987a\u5e8f\u548cPromise.all()\u63a5\u6536\u5230\u7684promise\u987a\u5e8f\u662f\u4e00\u81f4\u7684\u3002")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"promise.race\u8868\u793a\u591a\u4e2aPromise\u8d5b\u8dd1\u7684\u610f\u601d\uff0c\u91cc\u9762\u54ea\u4e2a\u7ed3\u679c\u6267\u884c\u7684\u5feb\u5c31\u8fd4\u56de\u54ea\u4e2a\u7ed3\u679c\uff0c\u4e0d\u7ba1\u7ed3\u679c\u672c\u8eab\u662f\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff0c\u5176\u4ed6Promise\u4ee3\u7801\u8fd8\u4f1a\u6267\u884c\uff0c\u53ea\u662f\u4e0d\u4f1a\u8fd4\u56de\u3002")),(0,l.kt)("h3",{id:"promiseall\u548cpromiserace\u7684\u5e94\u7528\u573a\u666f"},"Promise.all\u548cPromise.race\u7684\u5e94\u7528\u573a\u666f"),(0,l.kt)("h4",{id:"promiseall\u7684\u5e94\u7528\u573a\u666f"},"promise.all()\u7684\u5e94\u7528\u573a\u666f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u591a\u4e2a\u5f02\u6b65\u4efb\u52a1\u90fd\u5f97\u5230\u7ed3\u679c\u65f6\uff0c\u8fdb\u884c\u663e\u793a\u7684\u573a\u666f")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6bd4\u5982\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u4f1a\u5f39\u51fa\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u8fd9\u4e2a\u5bf9\u8bdd\u6846\u4e2d\u7684\u6570\u636e\u6765\u81ea\u4e24\u4e2a\u4e0d\u540c\u7684\u540e\u7aef\u63a5\u53e3\u83b7\u53d6\u7684\u6570\u636e\uff0c\u5f53\u7528\u6237\u521a\u70b9\u51fb\u7684\u65f6\u5019\uff0c\u663e\u793a\u7684\u65f6\u6570\u636e\u52a0\u8f7d\u4e2d\u7684\u72b6\u6001\uff0c\u5f53\u8fd9\u4e24\u90e8\u5206\u6570\u636e\u90fd\u4ece\u63a5\u53e3\u83b7\u53d6\u5230\u6570\u636e\u7684\u65f6\u5019\uff0c\u624d\u8ba9\u6570\u636e\u52a0\u8f7d\u4e2d\u7684\u72b6\u6001\u6d88\u5931\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528Promise.all\u65b9\u6cd5\u3002")),(0,l.kt)("h4",{id:"promiserace\u7684\u5e94\u7528\u573a\u666f"},"Promise.race()\u7684\u5e94\u7528\u573a\u666f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u63d0\u793a\u7528\u6237\u8bf7\u6c42\u8d85\u65f6")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6bd4\u5982\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5f53\u540e\u7aef\u7684\u63a5\u53e3\u8d85\u8fc7\u6211\u4eec\u8bbe\u5b9a\u7684\u65f6\u95f4\u8fd8\u6ca1\u6709\u83b7\u53d6\u5230\u6570\u636e\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u63d0\u793a\u7528\u6237\u8bf7\u6c42\u8d85\u65f6\u3002")),(0,l.kt)("h2",{id:"\u4e09promise\u662f\u5982\u4f55\u89e3\u51b3\u4e32\u884c\u548c\u5e76\u884c\u7684"},"\u4e09\u3001Promise\u662f\u5982\u4f55\u89e3\u51b3\u4e32\u884c\u548c\u5e76\u884c\u7684\uff1f"),(0,l.kt)("h3",{id:"\u4ec0\u4e48\u662f\u5e76\u884c\u4ec0\u4e48\u662f\u4e32\u884c"},"\u4ec0\u4e48\u662f\u5e76\u884c\uff1f\u4ec0\u4e48\u662f\u4e32\u884c\uff1f"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5e76\u884c\uff1a\u6307\u7684\u662f\u591a\u4e2a\u5f02\u6b65\u8bf7\u6c42\u540c\u65f6\u8fdb\u884c\u3002")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4e32\u884c\uff1a\u4e00\u4e2a\u5f02\u6b65\u8bf7\u6c42\u5b8c\u6210\u4e4b\u540e\u518d\u8fdb\u884c\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u3002")),(0,l.kt)("h3",{id:"promise\u5b9e\u73b0\u5e76\u884c\u8bf7\u6c42"},"Promise\u5b9e\u73b0\u5e76\u884c\u8bf7\u6c42"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise\u5b9e\u73b0\u5e76\u884c\u8bf7\u6c42\u4e3b\u8981\u662f\u4f9d\u9760Promise.all\u65b9\u6cd5\u548cPromise.race\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u624b\u5199Promise.all\u65b9\u6cd5\u6216Promise.race\u65b9\u6cd5\u6765\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002")),(0,l.kt)("h3",{id:"promise\u5b9e\u73b0\u4e32\u884c\u8bf7\u6c42"},"Promise\u5b9e\u73b0\u4e32\u884c\u8bf7\u6c42"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise\u5b9e\u73b0\u4e32\u884c\u8bf7\u6c42\u4e3b\u8981\u662f\u501f\u52a9reduce\u51fd\u6570\u3002\u53ef\u4ee5\u53c2\u8003\u6211\u7684\u8fd9\u7bc7\u6587\u7ae0",(0,l.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7011289190461603870"},"\u5982\u4f55\u63a7\u5236Promise\u7684\u4e32\u884c\u6267\u884c\uff1f"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u501f\u52a9reduce\u51fd\u6570\u6765\u5b9e\u73b0Promise\u7684\u4e32\u884c\u6267\u884c\nconst funcArr = [\n  () => {\n    return new Promise((resolve) => {\n      setTimeout(() => {resolve(1)},2000)\n    })\n  },\n  () => {\n    return new Promise((resolve) => {\n      setTimeout(() => {resolve(2)},1000)\n    })\n  },\n  () => {\n    return new Promise((resolve) => {\n      setTimeout(() => {resolve(3)},3000)\n    })\n  },\n];\n\nfunction inOrder(arr) {\n  const res = [];\n  return new Promise((resolve) => {\n    arr.reduce((pre,cur) => {\n      return pre.then(cur).then(data => res.push(data))\n    },Promise.resolve()).then(data => resolve(res))\n  })\n}\n\ninOrder(funcArr).then(data => console.log(data))   // [1,2,3]\n")),(0,l.kt)("h2",{id:"\u56db\u4ec0\u4e48\u662fpromise\u7a7f\u900f"},"\u56db\u3001\u4ec0\u4e48\u662fPromise\u7a7f\u900f\uff1f"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6240\u8c13\u7684Promise\u7684\u503c\u7a7f\u900f\u6307\u7684\u662f.then\u6216\u8005.catch\u7684\u53c2\u6570\u5e0c\u671b\u662f\u51fd\u6570\uff0c\u5982\u679c\u4f20\u5165\u7684\u4e0d\u662f\u51fd\u6570\uff0c\u5219\u53ef\u80fd\u4f1a\u53d1\u751f\u503c\u7a7f\u900f\u3002Promise\u65b9\u6cd5\u901a\u8fc7return\u4f20\u503c\uff0c\u6ca1\u6709return\u5c31\u53ea\u662f\u76f8\u4e92\u72ec\u7acb\u7684\u4efb\u52a1\u800c\u5df2\u3002\u770b\u770b\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u7684\u8f93\u51fa\u53ef\u80fd\u4f1a\u66f4\u597d\u7684\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u4ec0\u4e48\u662f\u503c\u7a7f\u900f\uff1f")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"Promise.resolve(1)\n  .then(function(){return 2})\n  .then(Promise.resolve(3))\n  .then(console.log)   // 2\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4e4b\u6240\u4ee5\u53d1\u751f\u4e86\u503c\u7a7f\u900f\u5c31\u662f\u56e0\u4e3a\u7b2c\u4e8c\u4e2athen\u4e2d\u4f20\u5165\u7684\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u5f62\u5f0f\u3002")),(0,l.kt)("h2",{id:"\u4e94\u4f7f\u7528promise\u5c01\u88c5ajax\u8bf7\u6c42"},"\u4e94\u3001\u4f7f\u7528Promise\u5c01\u88c5Ajax\u8bf7\u6c42"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528Promise\u5c01\u88c5Ajax\u8bf7\u6c42\u7684\u5173\u952e\u6b65\u9aa4\uff0c\u5168\u90e8\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\u91cc\uff0c\u8be6\u60c5\u8bf7\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4f7f\u7528Promise\u5c01\u88c5Ajax\u8bf7\u6c42\nconst res = new Promise((resolve,reject) => {\n  // 1. \u521b\u5efa\u4e00\u4e2aXMLHttpRequest\u5bf9\u8c61\n  const xhr = new XMLHttpRequest();\n  // 2. \u521d\u59cb\u5316\u8bf7\u6c42\u65b9\u6cd5\u548cURL\n  xhr.open('GET','https://api.apiopen.top/getJoke');\n  // 3. \u53d1\u9001\u8bf7\u6c42\n  xhr.send();\n  // 4. \u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u5904\u7406\u54cd\u5e94\u7ed3\u679c\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4) {\n      // \u8fd9\u91cc4\u4ee3\u8868\u7684\u5c31\u662f\u8bf4\u670d\u52a1\u7aef\u8fd4\u56de\u4e86\u5168\u90e8\u7684\u7ed3\u679c\n      // \u5982\u679c\u670d\u52a1\u7aef\u8fd4\u56de\u7684\u72b6\u6001\u7801\u662f2\u5f00\u5934\u7684\uff0c\u6211\u4eec\u5c31resolve\u8fd9\u4e2a\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u53cd\u4e4b\u5219reject\u5bf9\u5e94\u7684\u72b6\u6001\u7801\n      if (xhr.status >= 200 && xhr.status < 300) {\n        resolve(xhr.response)\n      } else {\n        reject(xhr.status)\n      }\n    }\n  }\n})\nres.then(function(value) {\n  console.log(value);\n},function(err) {\n  console.log(err);\n})\n")),(0,l.kt)("h2",{id:"\u516dpromise\u6709\u54ea\u4e9b\u72b6\u6001"},"\u516d\u3001Promise\u6709\u54ea\u4e9b\u72b6\u6001\uff1f"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Promise\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u79cd\u72b6\u6001\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"pending\u72b6\u6001\uff08\u521d\u59cb\u72b6\u6001\uff09"),(0,l.kt)("li",{parentName:"ul"},"fulfilled\u72b6\u6001(\u5df2\u7ecf\u6210\u529f\u7684\u72b6\u6001)"),(0,l.kt)("li",{parentName:"ul"},"rejected\u72b6\u6001(\u5df2\u7ecf\u5931\u8d25\u7684\u72b6\u6001)")),(0,l.kt)("h3",{id:"promise\u72b6\u6001\u7684\u53d8\u5316\u8fc7\u7a0b"},"Promise\u72b6\u6001\u7684\u53d8\u5316\u8fc7\u7a0b"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4ecepending\u5230fulfilled\u72b6\u6001\u7684\u5207\u6362")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"resolve\u524d\u662fpending\u72b6\u6001\uff0cresolve\u4e4b\u540e\u662ffulfilled\u72b6\u6001")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const p = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    console.log('resolve\u524d\u7684\u72b6\u6001\uff1a', p);\n    resolve();\n    console.log('resolve\u4e4b\u540e\u7684\u72b6\u6001', p);\n  })\n})\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/img_convert/478d6501e00f746426b25d16d8f1c2f9.png",alt:"image.png"})),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u4ecepending\u72b6\u6001\u5230rejected\u72b6\u6001")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"reject\u524d\u662fpending\u72b6\u6001\uff0creject\u4e4b\u540e\u662frejected\u72b6\u6001\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const p = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    console.log('reject\u524d\u7684\u72b6\u6001\uff1a', p);\n    reject();\n    console.log('reject\u4e4b\u540e\u7684\u72b6\u6001', p);\n  })\n})\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/img_convert/15873ec647ca0e3a481c9e6ae21d52e9.png",alt:"image.png"})),(0,l.kt)("h2",{id:"\u4e03\u5c06callback\u6539\u5199\u6210promise"},"\u4e03\u3001\u5c06callback\u6539\u5199\u6210Promise"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f20\u7edfcallback\u7684\u5f62\u5f0f")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\n\nfs.readFile('./temp.md',(err,data) => {\n  console.log(data.toString());\n})\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u5c06callback\u6539\u4e3apromise\u7684\u5f62\u5f0f")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6838\u5fc3\u5c31\u662f\u901a\u8fc7resolve\u6765\u83b7\u53d6callback\u7684\u6570\u636e\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\n\nasync function myReadFile() {\n  let result = await new Promise((resolve,reject) => {\n    fs.readFile('./temp.md',(err,data) => {\n      resolve(data.toString());\n    })\n  })\n  console.log(result);   // xxxxx\n  return result;\n}\n\nmyReadFile()\n")))}u.isMDXComponent=!0}}]);