<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">7Wate`s Blog | 7Wate</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://qq1120637483.github.io//blog/page/14"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="7wate, wiki, blog, c, c++, java, python, linux"><meta data-rh="true" property="og:title" content="7Wate`s Blog | 7Wate"><meta data-rh="true" name="description" content="7Wate çš„ä¸ªäººç”Ÿæ´»å’Œå·¥ä½œè®°å½•"><meta data-rh="true" property="og:description" content="7Wate çš„ä¸ªäººç”Ÿæ´»å’Œå·¥ä½œè®°å½•"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://qq1120637483.github.io//blog/page/14"><link data-rh="true" rel="alternate" href="https://qq1120637483.github.io//blog/page/14" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://qq1120637483.github.io//blog/page/14" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="7Wate`s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="7Wate`s Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="7Wate`s Blog JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-MHMEL0F832","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MHMEL0F832"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MHMEL0F832",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.a2a76c0f.css">
<link rel="preload" href="/assets/js/runtime~main.aee0b871.js" as="script">
<link rel="preload" href="/assets/js/main.ac892ace.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a href="#" class="skipToContent_fXgn">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">ğŸ‹ Faith&amp;Passion&#x27;s Wiki</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">ğŸ åšå®¢</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ¦– Wiki</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/structures-algorithms">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li><a class="dropdown__link" href="/computer-network">è®¡ç®—æœºç½‘ç»œ</a></li><li><a class="dropdown__link" href="/operating-system">æ“ä½œç³»ç»Ÿ</a></li><li><a class="dropdown__link" href="/database-system">æ•°æ®åº“</a></li><li><a class="dropdown__link" href="/computer-security">ç½‘ç»œå®‰å…¨</a></li><li><a class="dropdown__link" href="/software-engineering">è½¯ä»¶å·¥ç¨‹</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸªŸ é¢ç»</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/roadmap">å‰ç«¯é¢ç»</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">â° LeetCode</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/org">å¼€æºç¤¾åŒº</a></li></ul></div><a class="navbar__item navbar__link" href="/life">ğŸ„â€â™‚ï¸ ç”Ÿæ´»</a><a class="navbar__item navbar__link" href="/journal">ğŸ“œ éšç¬”æ—¥è®°</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="æœ€è¿‘åšæ–‡å¯¼èˆª"><div class="sidebarItemTitle_pO2u margin-bottom--md">è¿‘æœŸæ–‡ç« </div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/JSæ¨¡å—åŒ–æ¼”å˜åŠå…¶åŒºåˆ«">JSæ¨¡å—åŒ–æ¼”å˜åŠå…¶åŒºåˆ«</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ä½ çŸ¥é“åŸå‹é“¾ï¼Ÿé‚£ä½ èƒ½å®ç°ä¸€ä¸ªnewå—ï¼Ÿ">ä½ çŸ¥é“åŸå‹é“¾ï¼Ÿé‚£ä½ èƒ½å®ç°ä¸€ä¸ªnewå—ï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/Koaçš„æ´‹è‘±æ¨¡å‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ">Koaçš„æ´‹è‘±æ¨¡å‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹ï¼Œä½ äº†è§£å¤šå°‘ï¼Ÿ">OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹ï¼Œä½ äº†è§£å¤šå°‘ï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/Promiseçš„å¼‚å¸¸æ•è·é—®é¢˜">Promiseçš„å¼‚å¸¸æ•è·é—®é¢˜</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/Vueä¸­çš„v-ifå’Œv-forä¸ºä»€ä¹ˆä¸èƒ½ä¸€èµ·ç”¨ï¼Ÿ">Vueä¸­çš„v-ifå’Œv-forä¸ºä»€ä¹ˆä¸èƒ½ä¸€èµ·ç”¨ï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/for...inå’Œfor....ofçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">for...inå’Œfor....ofçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/è¿™ä¸€æ¬¡ï¼Œå½»åº•ææ‡‚Vueä¸­çš„keep-alive">è¿™ä¸€æ¬¡ï¼Œå½»åº•ææ‡‚Vueä¸­çš„keep-alive</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/LeetCodeâ€”â€”ç®€åŒ–è·¯å¾„ï¼ˆè¾…åŠ©æ ˆï¼‰">LeetCodeâ€”â€”ç®€åŒ–è·¯å¾„ï¼ˆè¾…åŠ©æ ˆï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ä½ äº†è§£Vueçš„åŠ¨æ€åŠ è½½ç»„ä»¶å’Œå¼‚æ­¥åŠ è½½ç»„ä»¶å—ï¼Ÿ">ä½ äº†è§£Vueçš„åŠ¨æ€åŠ è½½ç»„ä»¶å’Œå¼‚æ­¥åŠ è½½ç»„ä»¶å—ï¼Ÿ</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/MySQLä¹‹è·¨è¡¨æŸ¥è¯¢ä¸ç´¢å¼•">MySQLä¹‹è·¨è¡¨æŸ¥è¯¢ä¸ç´¢å¼•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-07T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ7æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 2 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€ç¬›å¡å°”ç§¯è¿æ¥">ä¸€ã€ç¬›å¡å°”ç§¯è¿æ¥<a class="hash-link" href="#ä¸€ç¬›å¡å°”ç§¯è¿æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åœ¨æ¼”ç¤ºç¬›å¡å°”ç§¯è¿æ¥ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ç›¸å…³è¡¨çš„ç»“æ„ï¼š</p></blockquote><ul><li>articleè¡¨</li></ul><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c5b9bf60cec23803053de4f809fffb71.png" alt="image.png" class="img_ev3q"></p><ul><li>article_cateè¡¨</li></ul><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/0020900a48bec5aa879069343b377c38.png" alt="image.png" class="img_ev3q"></p><blockquote><p>ç¬›å¡å°”ç§¯è¿æ¥å°±æ˜¯å®ç°è·¨è¡¨æŸ¥è¯¢çš„ä¸€ç§æ–¹å¼ã€‚</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> article.id as id,article.title as title,article.state as state,article_cate.title as cate from article,article_cate where article.cate_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">article_cate.id</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒå†…è¿æ¥">äºŒã€å†…è¿æ¥<a class="hash-link" href="#äºŒå†…è¿æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>é¡¹ç›®ä¸­ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯å†…è¿æ¥æ¥è¿›è¡Œè·¨è¡¨æŸ¥è¯¢ã€‚å†…è¿æ¥ä¸»è¦æ˜¯åŠ å…¥äº†INNER JOINå’ŒONä¸¤ä¸ªå…³é”®å­—ã€‚</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> article.id as id,article.title as title,article.state as state,article_cate.title as cate from article INNER JOIN article_cate on article.cate_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> article_cate.id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>å…¶ä»–æ–¹æ³•ï¼šä½¿ç”¨INæ¥è¿›è¡ŒæŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šå¼ ä¸‰é€‰ä¿®çš„è¯¾ç¨‹idå¯¹åº”çš„è¯¾ç¨‹åç§°æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹æ•°æ®è¡¨çš„ç»“æ„ï¼š</p></blockquote><ul><li>lessonè¡¨</li></ul><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/4a732035774793bbe1509b305318b1e8.png" alt="image.png" class="img_ev3q"></p><ul><li>studentè¡¨</li></ul><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/8f49738ee4289bf02a3341ac3797ee2d.png" alt="image.png" class="img_ev3q"></p><ul><li>lesson_studentè¡¨</li></ul><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/d57bb1fdd815a5d06bb609c3aa39cfd2.png" alt="image.png" class="img_ev3q"></p><blockquote><p>æŸ¥è¯¢å¼ ä¸‰é€‰ä¿®çš„è¯¾ç¨‹çš„åç§°</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from lesson where </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">select lessonId from lesson_student where </span><span class="token assign-left variable" style="color:#36acaa">studentId</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æŸ¥è¯¢å“ªäº›å­¦ç”Ÿé€‰ä¿®äº†Javaç¨‹åºè®¾è®¡</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from student where </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">select studentId from lesson_student where </span><span class="token assign-left variable" style="color:#36acaa">lessonId</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸‰mysqlç´¢å¼•">ä¸‰ã€MySQLç´¢å¼•<a class="hash-link" href="#ä¸‰mysqlç´¢å¼•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>å½“æŸ¥è¯¢æµ·é‡æ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡ç´¢å¼•å¯ä»¥å¢åŠ æŸ¥è¯¢çš„æ•ˆç‡ï¼Œæå¤§çš„é™ä½æŸ¥æ‰¾çš„æ—¶é—´ã€‚</p></blockquote><ol><li>åˆ›å»ºç´¢å¼•</li></ol><blockquote><p>ç»™nameåˆ›å»ºç´¢å¼•åä¸ºindex_nameã€‚</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create index index_name on student</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æŸ¥çœ‹ç´¢å¼•</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">show index from student</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>åˆ é™¤ç´¢å¼•</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">drop index index_name on student</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>åˆ›å»ºå”¯ä¸€ç´¢å¼•</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create unique index index_name on student</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šNavicatç­‰å¯è§†åŒ–å·¥å…·æ¥è®¾ç½®ç´¢å¼•ï¼Œé€šè¿‡å³é”®é€‰æ‹©æŸä¸ªæ•°æ®è¡¨ï¼Œé€‰æ‹©è®¾è®¡è¡¨ï¼Œç„¶åæ·»åŠ ç´¢å¼•ã€‚</p></blockquote><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c090938874c2e6efe7f14c9cc686d508.png" alt="image.png" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/MySqlåŸºç¡€å‘½ä»¤ä¸æŸ¥è¯¢æ–¹æ³•">MySqlåŸºç¡€å‘½ä»¤ä¸æŸ¥è¯¢æ–¹æ³•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-06T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ6æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 4 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€è¿æ¥mysql">ä¸€ã€è¿æ¥MySQL<a class="hash-link" href="#ä¸€è¿æ¥mysql" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>é¦–å…ˆå®‰è£…MySQL,ç„¶åå¼€å¯ç›¸å…³æœåŠ¡ã€‚</li></ol><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/f56fb95408bbed4444eeb74c746b2664.png" alt="image.png" class="img_ev3q"></p><ol start="2"><li>è¿è¡ŒMySQL</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè¿è¡Œnavicatå¯è§†åŒ–å·¥å…·">äºŒã€è¿è¡ŒNavicatå¯è§†åŒ–å·¥å…·<a class="hash-link" href="#äºŒè¿è¡Œnavicatå¯è§†åŒ–å·¥å…·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>åœ¨Navicatä¸­è¿æ¥MySQLæ•°æ®åº“</li></ol><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/99d8a3d95179aab1f3d0a0acfc4389c9.png" alt="image.png" class="img_ev3q"></p><ol start="2"><li>åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªæ•°æ®åº“</li></ol><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/8671a5025268c9822063ffd3f3880b02.png" alt="image.png" class="img_ev3q"></p><ol start="3"><li>åœ¨æ•°æ®åº“ä¸­æ–°å»ºä¸€ä¸ªè¡¨ï¼Œè¡¨å»ºç«‹ç›¸åº”çš„å­—æ®µ</li></ol><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/55b7598330feca6039663fda3b05c9d3.png" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸‰mysqlçš„åŸºç¡€å‘½ä»¤">ä¸‰ã€MySQLçš„åŸºç¡€å‘½ä»¤<a class="hash-link" href="#ä¸‰mysqlçš„åŸºç¡€å‘½ä»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>é¦–å…ˆå¯åŠ¨MySQLæœåŠ¡ï¼Œç„¶åé€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¿æ¥æ•°æ®åº“</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ˜¾ç¤ºå½“å‰å­˜åœ¨çš„æ•°æ®åº“</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">show databases</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>é€‰æ‹©æƒ³è¦æ“ä½œçš„æ•°æ®åº“</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use xxx</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>å½“å‡ºç°Database changedè¡¨ç¤ºåˆ‡æ¢æˆåŠŸï¼</p></blockquote><ul><li>æŸ¥çœ‹å½“å‰æ•°æ®åº“éƒ½æœ‰å“ªäº›æ•°æ®è¡¨</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">show tables</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æŸ¥çœ‹æŒ‡å®šè¡¨ä¸­éƒ½æœ‰å“ªäº›æ•°æ®</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from xxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æŒ‡å®šæŸ¥è¯¢è¡¨ä¸­çš„å“ªäº›å­—æ®µ</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> xxx from xxx</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æŒ‡å®šæŸ¥è¯¢æ¡ä»¶</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from user where </span><span class="token assign-left variable" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from user where id</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create database xxx</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ·»åŠ æ•°æ®è¡¨</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table users</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ˜¾ç¤ºè¡¨çš„ç»“æ„</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describe </span><span class="token function" style="color:#d73a49">users</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å‘è¡¨ä¸­æ·»åŠ æ•°æ®</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">insert into users</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id,username,age</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> values </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&#x27;ç‹äº”&#x27;</span><span class="token plain">,18</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ä¿®æ”¹æŒ‡å®šçš„æ•°æ®(å°†userè¡¨ä¸­idä¸º1çš„å­—æ®µçš„usernameä¿®æ”¹ä¸ºï¼šç‹äº”)</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">update user </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ç‹äº”&quot;</span><span class="token plain"> where </span><span class="token assign-left variable" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ä¿®æ”¹å¤šä¸ªå­—æ®µçš„æƒ…å†µ</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">update user </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ç‹äº”&quot;</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">666</span><span class="token plain"> where </span><span class="token assign-left variable" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ é™¤æŒ‡å®šçš„æ•°æ®</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">delete from user where </span><span class="token assign-left variable" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">666</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å¯¹æ•°æ®è¿›è¡Œå‡åºæ’åˆ—</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from user order by </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> asc</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å¯¹æ•°æ®è¿›è¡Œé™åºæ’åˆ—</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from user order by </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> desc</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å¯¹æŸä¸ªè¡¨ç»Ÿè®¡æ•°é‡</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from user</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åªæŸ¥è¯¢æŒ‡å®šæ•°é‡çš„æ•°æ®</li></ul><blockquote><p>ä¸‹é¢çš„æ–¹æ³•åªä¼šæŸ¥è¯¢å‰ä¸¤æ¡æ•°æ®ã€‚</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from user limit </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è·³è¿‡ä¸¤æ¡ï¼ŒæŸ¥è¯¢1æ¡</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from user limit </span><span class="token number" style="color:#36acaa">2,1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ é™¤æŒ‡å®šçš„è¡¨</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">drop table </span><span class="token builtin class-name">test</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ é™¤æŒ‡å®šçš„æ•°æ®åº“</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">drop database </span><span class="token builtin class-name">test</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å››mysqlä¸­çš„æ¨¡ç³ŠæŸ¥è¯¢">å››ã€MySQLä¸­çš„æ¨¡ç³ŠæŸ¥è¯¢<a class="hash-link" href="#å››mysqlä¸­çš„æ¨¡ç³ŠæŸ¥è¯¢" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>å°†é‚®ä»¶ä¿¡æ¯ä¸­åŒ…å«qq.comçš„éƒ½é€‰å‡ºæ¥</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from class where email like </span><span class="token string" style="color:#e3116c">&quot;%qq.com%&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æŸ¥è¯¢emailä¸­ä»¥nodeå¼€å¤´çš„</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from class where email like </span><span class="token string" style="color:#e3116c">&quot;node%&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æŸ¥è¯¢emailä¸­ä»¥163.comç»“å°¾çš„å…ƒç´ </li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from class where email like </span><span class="token string" style="color:#e3116c">&quot;%163.com&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äº”mysqlä¸­çš„åˆ†ç»„å‡½æ•°">äº”ã€MySQLä¸­çš„åˆ†ç»„å‡½æ•°<a class="hash-link" href="#äº”mysqlä¸­çš„åˆ†ç»„å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/355f4b120a354b56d8e96dfe4c2a5591.png" alt="image.png" class="img_ev3q"></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from class</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from class</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from class</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from class</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from class</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>å¤åˆæ¡ä»¶æŸ¥è¯¢</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from class where score </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">select max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…­mysqlåˆ«å">å…­ã€MySQLåˆ«å<a class="hash-link" href="#å…­mysqlåˆ«å" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> id,name as n,email as e,score as s from class</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ƒmysqlè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»">ä¸ƒã€MySQLè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»<a class="hash-link" href="#ä¸ƒmysqlè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>è¡¨ä¸è¡¨ä¹‹é—´ä¸€èˆ¬å­˜åœ¨ä¸‰ç§å…³ç³»ï¼Œå³ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šå’Œå¤šå¯¹å¤šå…³ç³»ã€‚</p></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/é˜¿é‡Œå‰ç«¯é¢è¯•é¢˜ä¹‹è·å–åµŒå¥—æ•°ç»„çš„æ·±åº¦">é˜¿é‡Œå‰ç«¯é¢è¯•é¢˜ä¹‹è·å–åµŒå¥—æ•°ç»„çš„æ·±åº¦</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-05T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ5æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 2 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°<a class="hash-link" href="#é¢˜ç›®æè¿°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>è·å–åµŒå¥—æ•°ç»„çš„æ·±åº¦ï¼Œç»™å®šä¸€ä¸ªå¸¦åµŒå¥—çš„æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªæ–¹æ³•å¯è·å–åµŒå¥—æ•°ç»„çš„æœ€å¤§æ·±åº¦ï¼Œæ•°ç»„æ— åµŒå¥—å­æ•°ç»„åˆ™è¿”å›0ï¼Œæœ‰ä¸€å±‚åµŒå¥—å­æ•°ç»„åˆ™è¿”å›1ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p></blockquote><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><ul><li>getArrayDeep([1,2,[3,[1,<!-- -->[0]<!-- -->]]]); è¿”å›3</li><li>getArrayDeep([]);   è¿”å›0</li><li>getArrayDeep([[[[]]]]) è¿”å›3</li><li>getArrayDeep([0,<!-- -->[2]<!-- -->,[2,<!-- -->[3]<!-- -->]]); è¿”å›2</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯<a class="hash-link" href="#è§£é¢˜æ€è·¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>ä½¿ç”¨é€’å½’çš„æ€æƒ³è¿›è¡Œéå†ï¼ŒåŒæ—¶ä½¿ç”¨flagæ ‡è¯†ç¬¦æ¥æ ‡è®°ç›®æ ‡å…ƒç´ æ˜¯å¦æ˜¯æ•°ç»„ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œå­˜å‚¨åˆ°ä¸´æ—¶æ•°ç»„ä¸­ï¼Œç„¶åæŠ•å…¥é€’å½’ï¼Œæ‰€æœ‰çš„é€’å½’ç»“æŸåï¼Œåˆ¤æ–­flagæ˜¯trueè¿˜æ˜¯falseï¼Œå¦‚æœæ˜¯trueï¼Œåˆ™è¿”å›ä¸´æ—¶æ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œå¦‚æœæ˜¯falseåˆ™è¿”å›1ã€‚</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">recursiveMax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">Array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      num</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">recursiveMax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">flag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">recursiveMax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">recursiveMax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¢˜ç›®åæ€">é¢˜ç›®åæ€<a class="hash-link" href="#é¢˜ç›®åæ€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>è¿™é“é¢˜ç›®æ˜¯é€’å½’çš„ç»å…¸ç”¨æ³•ï¼Œå¿…é¡»ç†Ÿç»ƒæŒæ¡ã€‚</li><li>ä½¿ç”¨æ ‡è¯†ç¬¦å¯¹å…ƒç´ è¿›è¡Œæ ‡è®°ï¼Œæ¥è¾…åŠ©é€’å½’æ˜¯è§£å†³é€’å½’é—®é¢˜çš„å…³é”®æ€è·¯ã€‚</li><li>ä½¿ç”¨Math.max.apply(num)ï¼Œå¯ä»¥æ±‚å‡ºä¸€ä¸ªæ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/é¢è¯•é¢˜">é¢è¯•é¢˜</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/LRUç¼“å­˜æœºåˆ¶ï¼ˆé“¾è¡¨å®ç°ï¼‰">LRUç¼“å­˜æœºåˆ¶ï¼ˆé“¾è¡¨å®ç°ï¼‰</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-04T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ4æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 4 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°<a class="hash-link" href="#é¢˜ç›®æè¿°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/91b12e01229b5fbfdefa3871570f1912.png" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯<a class="hash-link" href="#è§£é¢˜æ€è·¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æ„é€ ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ç±»å’Œä¸€ä¸ªLRUç¼“å­˜ç±»ã€‚</li><li>ä¸€ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹åº”è¯¥å…·æœ‰key,value,å’ŒnextæŒ‡é’ˆå’ŒprevæŒ‡é’ˆã€‚</li><li>ä¸€ä¸ªLRUçš„å®ä¾‹åº”è¯¥å…·æœ‰å®¹é‡capacityï¼Œhashå¯¹è±¡ï¼Œè¡¨ç¤ºè¿™ä¸ªLRUä¸­èŠ‚ç‚¹çš„æ•°é‡å€¼çš„count,ä¸¤ä¸ªè¾…åŠ©é“¾è¡¨èŠ‚ç‚¹ï¼Œåˆ†åˆ«æŒ‡å‘æœ€è¿‘ä½¿ç”¨çš„å…ƒç´ ï¼Œå’Œæœ€ä¹…æœªä½¿ç”¨çš„å…ƒç´ ã€‚</li><li>getæ–¹æ³•ï¼šæ— è®ºæ˜¯getæ–¹æ³•è¿˜æ˜¯putæ–¹æ³•ï¼Œéƒ½è¦é¦–å…ˆå–å‡ºkeyå¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯undefinedï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›-1ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°†å…¶ä»é“¾è¡¨ä¸­åˆ é™¤ï¼Œç„¶åæ·»åŠ åˆ°è¾…åŠ©é“¾è¡¨Headçš„æŒ‡å‘ä½ç½®ï¼Œç„¶åè¿”å›è¯¥èŠ‚ç‚¹çš„å€¼ã€‚</li><li>putæ–¹æ³•ï¼šé¦–å…ˆå–å‡ºkeyå¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯undefined,å¦‚æœä¸æ˜¯undefiend,æ›´æ–°å…¶å€¼ï¼Œç„¶åä»é“¾è¡¨ä¸­åˆ é™¤ï¼Œç„¶åæ·»åŠ åˆ°è¾…åŠ©å¤´èŠ‚ç‚¹æŒ‡å‘çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œé¦–å…ˆåˆ¤æ–­LRUä¸­èŠ‚ç‚¹çš„æ•°é‡å’Œå®¹é‡æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜å·²ç»æ»¡äº†ï¼Œæ­¤æ—¶ä»å°¾éƒ¨è¾…åŠ©é“¾è¡¨å‰å–å‡ºè¯¥å…ƒç´ ï¼Œç„¶ååˆ é™¤é“¾è¡¨ä¸­çš„è¯¥å…ƒç´ ï¼Œç„¶åä»hashå¯¹è±¡ä¸­ä¹Ÿåˆ é™¤ï¼ŒåŒæ—¶count--ï¼Œç„¶ååˆ›é€ ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå­˜å…¥key,valueï¼Œç„¶åæ·»åŠ åˆ°é“¾è¡¨å’Œhashå¯¹è±¡ä¸­ï¼ŒåŒæ—¶æ›´æ–°countçš„å€¼ã€‚</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="acä»£ç ">ACä»£ç <a class="hash-link" href="#acä»£ç " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// é¦–å…ˆæ„é€ ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ç±»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ListNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">key</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ„é€ ä¸€ä¸ªLRUç¼“å­˜ç±»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">LRUCache</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">capacity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">capacity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> capacity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿™é‡Œçš„headå¯ä»¥ç†è§£ä¸ºæœ€è¿‘ä½¿ç”¨è¿‡çš„ï¼Œtailåˆ™å¯ä»¥ç†è§£ä¸ºæœ€ä¹…æœªä½¿ç”¨çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ListNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyTail</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ListNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyTail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyTail</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®ç°getæ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// é¦–å…ˆå–å‡ºhashå¯¹è±¡ä¸­è¿™ä¸ªé”®å¯¹åº”çš„èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœè¿™ä¸ªèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œè¿”å›-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœè¿™ä¸ªèŠ‚ç‚¹å­˜åœ¨çš„è¯ï¼Œä»é“¾è¡¨ä¸­ç§»é™¤å·²æœ‰èŠ‚ç‚¹ï¼Œç„¶åå†æ·»åŠ åˆ°å¤´éƒ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteFromList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addToHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å®ç°putæ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// é¦–å…ˆå–å‡ºå“ˆå¸Œå¯¹è±¡ä¸­è¿™ä¸ªé”®å¯¹åº”çš„èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ†å­˜åœ¨å’Œä¸å­˜åœ¨ä¸¤ç§æƒ…å†µè¿›è¡Œè®¨è®º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœLRUæ˜¯æ»¡çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">capacity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å–å‡ºæœ€ä¹…æœªä½¿ç”¨çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> tail </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyTail</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ä»LRUä¸­åˆ é™¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteFromList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tail</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ä»hashå¯¹è±¡ä¸­åˆ é™¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">tail</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// LRUçš„æ•°é‡-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›é€ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> newNode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ListNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newNode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addToHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æ›´æ–°value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteFromList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addToHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">deleteFromList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> temp1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> temp2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    temp1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> temp2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    temp2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> temp1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">addToHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prev</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dummyHead</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¢˜ç›®åæ€">é¢˜ç›®åæ€<a class="hash-link" href="#é¢˜ç›®åæ€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>å…³äºLRUç¼“å­˜æœºåˆ¶è¿™ä¸ªé¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨Mapåšï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨hashå¯¹è±¡+é“¾è¡¨çš„å½¢å¼åšï¼Œä½†æ˜¯ä»é¢˜ç›®ç®€æ´çš„ç¨‹åº¦çœ‹ï¼ŒMapçš„æ–¹æ³•æ›´åŠ æ˜“æ‡‚ï¼Œæ›´åŠ ç®€æ´ã€‚</p></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/é¢è¯•é¢˜">é¢è¯•é¢˜</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/Egg.jsä¸­å®šæ—¶ä»»åŠ¡çš„æ ¸å¿ƒç”¨æ³•">Egg.jsä¸­å®šæ—¶ä»»åŠ¡çš„æ ¸å¿ƒç”¨æ³•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-03T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ3æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 2 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€å®šæ—¶ä»»åŠ¡çš„åŸºæœ¬ä½¿ç”¨">ä¸€ã€å®šæ—¶ä»»åŠ¡çš„åŸºæœ¬ä½¿ç”¨<a class="hash-link" href="#ä¸€å®šæ—¶ä»»åŠ¡çš„åŸºæœ¬ä½¿ç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>åœ¨appæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªscheduleæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ä¸‹é¢å»ºç«‹ä¸€ä¸ªwatchfile.jsï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼‰</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Subscription</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;egg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Subscription</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WatchFile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Subscription</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">schedule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1s&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æŒ‡å®šæ‰€æœ‰çš„è¿›ç¨‹éƒ½éœ€è¦æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">WatchFile</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ§åˆ¶å°å°†æ¯éš”1sæ‰“å°ä¸‹é¢çš„å†…å®¹</li></ol><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/89990d683194597efc34d941d29e66ab.png" alt="image.png" class="img_ev3q"></p><ol start="3"><li>ä¸‹é¢æ˜¯ä¸€ç§ç®€å†™çš„æ–¹å¼</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">schedule</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1s&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1 åˆ†é’Ÿé—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æŒ‡å®šæ‰€æœ‰çš„ worker éƒ½éœ€è¦æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒå®šæ—¶çˆ¬å–æŒ‡å®šç½‘é¡µçš„å†…å®¹">äºŒã€å®šæ—¶çˆ¬å–æŒ‡å®šç½‘é¡µçš„å†…å®¹<a class="hash-link" href="#äºŒå®šæ—¶çˆ¬å–æŒ‡å®šç½‘é¡µçš„å†…å®¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>å®‰è£…cheerioæ¨¡å—</li></ol><blockquote><p>è¿™ä¸ªæ¨¡å—èƒ½å¤Ÿè§£æHTMLé¡µé¢çš„å†…å®¹ï¼Œä½¿ç”¨çš„æ˜¯JQueryè¯­æ³•ã€‚</p></blockquote><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cheerio</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>å¯¼å…¥æ¨¡å—</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const cheerio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;cheerio&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>åœ¨æœåŠ¡ä¸­å®šä¹‰çˆ¬è™«æ¨¡å—spider.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;use strict&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Service</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;egg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Service</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SpiderService</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Service</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">curl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">SpiderService</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>å®šæ—¶ä»»åŠ¡è§£ææœåŠ¡è·å–åˆ°çš„å†…å®¹</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">schedule</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1s&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1 åˆ†é’Ÿé—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æŒ‡å®šæ‰€æœ‰çš„ worker éƒ½éœ€è¦æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://news.baidu.com&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">spider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">requestUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> htmlData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> $ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cheerio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">htmlData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">decodeEntities</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.hotnews a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">each</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">html</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/egg-js">Egg.js</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/Egg.jsä¸­æ§åˆ¶å™¨åŸºç±»çš„ç®€æ˜ç”¨æ³•">Egg.jsä¸­æ§åˆ¶å™¨åŸºç±»çš„ç®€æ˜ç”¨æ³•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-02T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ2æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 1 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€æŒ‡å®šæ—¶é—´åè·³è½¬åˆ°æŒ‡å®šé¡µé¢">ä¸€ã€æŒ‡å®šæ—¶é—´åè·³è½¬åˆ°æŒ‡å®šé¡µé¢<a class="hash-link" href="#ä¸€æŒ‡å®šæ—¶é—´åè·³è½¬åˆ°æŒ‡å®šé¡µé¢" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>é€šè¿‡metaæ ‡ç­¾</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">meta http</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">equiv</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;refresh&quot;</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;3;url=/&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒæ§åˆ¶å™¨åŸºç±»basecontroller">äºŒã€æ§åˆ¶å™¨åŸºç±»BaseController<a class="hash-link" href="#äºŒæ§åˆ¶å™¨åŸºç±»basecontroller" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ControlleråŸºç±»çš„æ–¹å¼å°è£…åº”ç”¨ä¸­å¸¸ç”¨çš„æ–¹æ³•ã€‚</p></blockquote><ol><li>åœ¨appæ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶å¤¹core,å¹¶åœ¨å…¶ä¸­æ–°å»ºbase.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;use strict&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Controller</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;egg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Controller</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BaseController</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Controller</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">BaseController</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>éœ€è¦ä½¿ç”¨åŸºç±»æ–¹æ³•çš„æ§åˆ¶å™¨ä¿®æ”¹æ§åˆ¶å™¨ç»§æ‰¿æ¥æº</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;use strict&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">BaseController</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;../core/base.js&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UserController</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">BaseController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doLogin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">UserController</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>å°è£…çš„æ–¹æ³•å·²ç»åœ¨thisä¸Šäº†</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/egg-js">Egg.js</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/Egg.jsä¸­è·¯ç”±çš„æ ¸å¿ƒç”¨æ³•">Egg.jsä¸­è·¯ç”±çš„æ ¸å¿ƒç”¨æ³•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-01T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ1æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 2 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€è·¯ç”±çš„å‡ ç§å†™æ³•">ä¸€ã€è·¯ç”±çš„å‡ ç§å†™æ³•<a class="hash-link" href="#ä¸€è·¯ç”±çš„å‡ ç§å†™æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>ä¸€èˆ¬å†™æ³•</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>å¸¦æœ‰ä¸­é—´ä»¶çš„å†™æ³•</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> auth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>åŒ…å«åå­—çš„è·¯ç”±å†™æ³•</li></ol><blockquote><p>ç›¸å½“äºç»™è·¯ç”±èµ·ä¸€ä¸ªåå­—ï¼Œç›´æ¥è®¿é—®/newsè¿˜æ˜¯æ­£å¸¸çš„ã€‚</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;æ–°é—»&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè·¯ç”±é‡å®šå‘">äºŒã€è·¯ç”±é‡å®šå‘<a class="hash-link" href="#äºŒè·¯ç”±é‡å®šå‘" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¤–éƒ¨é‡å®šå‘">å¤–éƒ¨é‡å®šå‘<a class="hash-link" href="#å¤–éƒ¨é‡å®šå‘" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>åœ¨æ§åˆ¶å™¨ä¸­å†™å‡ºä¸‹é¢çš„ä»£ç ã€‚</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">redirect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å†…éƒ¨é‡å®šå‘">å†…éƒ¨é‡å®šå‘<a class="hash-link" href="#å†…éƒ¨é‡å®šå‘" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>è®¿é—®/newsè·³è½¬åˆ°/shopé¡µé¢ã€‚</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">redirect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;/shop&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸‰è·¯ç”±åˆ†ç»„è·¯ç”±æ˜ å°„">ä¸‰ã€è·¯ç”±åˆ†ç»„ï¼ˆè·¯ç”±æ˜ å°„ï¼‰<a class="hash-link" href="#ä¸‰è·¯ç”±åˆ†ç»„è·¯ç”±æ˜ å°„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>ä¹‹æ‰€ä»¥è¦è¿›è¡Œè·¯ç”±åˆ†ç»„æ˜¯å› ä¸ºï¼Œå¦‚æœä¸€ä¸ªé¡¹ç›®ä¸­åŒ…å«å¤ªå¤šè·¯ç”±ï¼Œä¼šç»™é—®é¢˜çš„æ’æŸ¥å¸¦æ¥å¾ˆå¤§çš„å›°éš¾ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨å°†åŒä¸€ç±»çš„è·¯ç”±å½’ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå¯¹å¤–æš´éœ²ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯è·¯ç”±åˆ†ç»„ã€‚</p></blockquote><ol><li>åœ¨appä¸‹æ–°å»ºä¸€ä¸ªroutersæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ç±»ä¼¼ä¸‹é¢çš„æ–‡ä»¶ã€‚</li></ol><ul><li>admin.js</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">app</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> router</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/admin/user&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">admin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨routers.jsæ–‡ä»¶ä¸­é€šè¿‡ä¸‹é¢çš„æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./routers/admin&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/egg-js">Egg.js</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/ï¼ˆæœ€ç³»ç»Ÿã€æœ€å…¨é¢ï¼‰è¿™ä¸€æ¬¡ï¼Œå½»åº•ææ‡‚HTTPé¢è¯•">ï¼ˆæœ€ç³»ç»Ÿã€æœ€å…¨é¢ï¼‰è¿™ä¸€æ¬¡ï¼Œå½»åº•ææ‡‚HTTPé¢è¯•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-10-31T00:00:00.000Z" itemprop="datePublished">2021å¹´10æœˆ31æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 53 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p>æ— è®ºæ˜¯å¤§å‚é¢è¯•è¿˜æ˜¯å°å‚é¢è¯•ï¼Œæ— è®ºæ˜¯ç¤¾æ‹›è¿˜æ˜¯æ ¡æ‹›ï¼Œåšä¸»åšäº†å¤§é‡çš„ç»Ÿè®¡åˆ†æï¼Œè®¡ç®—æœºç½‘ç»œä¸­çš„HTTPåè®®ç›¸å…³çš„è€ƒç‚¹ï¼Œå‡ ä¹æ˜¯å¿…è€ƒçš„ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ è¿™ä¸ªçŸ¥è¯†å§ã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€http2æ–°ç‰¹æ€§">ä¸€ã€HTTP2æ–°ç‰¹æ€§<a class="hash-link" href="#ä¸€http2æ–°ç‰¹æ€§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ˜ç¡®HTTP2åˆ°åº•æœ‰å“ªäº›æ–°ç‰¹æ€§ã€‚åšä¸»æ€»ç»“äº†å¤šç¯‡æ–‡ç« ï¼ŒHTTP2æ–°ç‰¹æ€§ä¸»è¦å›´ç»•ç€ä¸‹é¢å…­ä¸ªæ–¹é¢ã€‚</p></blockquote><ol><li>äºŒè¿›åˆ¶åˆ†å¸§</li><li>é¦–éƒ¨å‹ç¼©</li><li>æµé‡æ§åˆ¶</li><li>å¤šè·¯å¤ç”¨</li><li>è¯·æ±‚ä¼˜å…ˆçº§</li><li>æœåŠ¡å™¨æ¨é€</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè¿›åˆ¶åˆ†å¸§">äºŒè¿›åˆ¶åˆ†å¸§<a class="hash-link" href="#äºŒè¿›åˆ¶åˆ†å¸§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>åœ¨ä»‹ç»äºŒè¿›åˆ¶åˆ†å¸§ä¹‹å‰ï¼Œé¦–å…ˆä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯å¸§ï¼Œä½†æ˜¯ä»‹ç»å¸§çš„æ—¶å€™ï¼Œåˆä¸å¯é¿å…çš„è¦ä»‹ç»åˆ°æ¶ˆæ¯å’Œæ•°æ®æµçš„æ¦‚å¿µï¼Œä¸ºäº†ä¾¿äºå¤§å®¶çš„ç†è§£ï¼Œåšä¸»è¿˜æ˜¯å†³å®šå¯¹è¿™äº›å†…å®¹åˆ†åˆ«è¿›è¡Œç³»ç»Ÿçš„ä»‹ç»ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¸§æ¶ˆæ¯å’Œæ•°æ®æµçš„å…³ç³»">å¸§ã€æ¶ˆæ¯å’Œæ•°æ®æµçš„å…³ç³»<a class="hash-link" href="#å¸§æ¶ˆæ¯å’Œæ•°æ®æµçš„å…³ç³»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>å¸§(frame)ï¼šå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè¿ç»­çš„æ¶ˆæ¯æµä¸­çš„ä¸€ä¸ªç‰‡æ®µï¼Œæ˜¯æœ€å°å•ä½ã€‚</li><li>æ¶ˆæ¯(message)ï¼šå¯¹åº”äºHTTP1ä¸­çš„è¯·æ±‚æˆ–è€…å“åº”ï¼ŒåŒ…å«ä¸€æ¡æˆ–è€…å¤šæ¡messageã€‚</li><li>æ•°æ®æµ(stream)ï¼šåŒ…å«1æ¡æˆ–è€…å¤šæ¡messageã€‚</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http2çªç ´http11åè®®æ€§èƒ½é™åˆ¶çš„æ ¸å¿ƒ">HTTP2çªç ´HTTP1.1åè®®æ€§èƒ½é™åˆ¶çš„æ ¸å¿ƒ<a class="hash-link" href="#http2çªç ´http11åè®®æ€§èƒ½é™åˆ¶çš„æ ¸å¿ƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>HTTP2æ‰€æœ‰æ€§èƒ½å¢å¼ºçš„æ ¸å¿ƒå°±åœ¨äºåº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´å¢åŠ äº†ä¸€ä¸ªäºŒè¿›åˆ¶åˆ†å¸§å±‚ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè¿›åˆ¶åˆ†å¸§å±‚åŸç†">äºŒè¿›åˆ¶åˆ†å¸§å±‚åŸç†<a class="hash-link" href="#äºŒè¿›åˆ¶åˆ†å¸§å±‚åŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>äºŒè¿›åˆ¶åˆ†å¸§å±‚é€šè¿‡å°†æ‰€æœ‰ä¼ è¾“çš„ä¿¡æ¯åˆ†å‰²ä¸ºæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼è¿›è¡Œç¼–ç ï¼Œå…¶ä¸­ï¼ŒHTTP1.1ä¸­çš„é¦–éƒ¨ä¿¡æ¯headerå°è£…åˆ°Headerså¸§ä¸­ï¼Œè€Œrequest bodyåˆ™å°è£…åˆ°Dataå¸§ä¸­ã€‚HTTP2çš„é€šä¿¡éƒ½åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå®Œæˆï¼Œè¿™ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµï¼Œç›¸åº”çš„æ¯ä¸ªæ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œè¿™äº›å¸§å¯ä»¥ä¹±åºå‘é€ï¼Œç„¶åæ ¹æ®æ¯ä¸ªå¸§çš„é¦–éƒ¨æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚äºŒè¿›åˆ¶åˆ†å¸§ä¸ºHTTP2çš„å…¶ä»–ç‰¹æ€§æä¾›äº†åŸºç¡€ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè¿›åˆ¶å¸§çš„ç»“æ„">äºŒè¿›åˆ¶å¸§çš„ç»“æ„<a class="hash-link" href="#äºŒè¿›åˆ¶å¸§çš„ç»“æ„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>ä¸‹å›¾æ˜¯äºŒè¿›åˆ¶å¸§çš„ç»“æ„å›¾</p></blockquote><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/6e0165e39fe7ab0b763dac676af2a3d8.png" alt="image.png" class="img_ev3q"></p><blockquote><p>HTTP2çš„äºŒè¿›åˆ¶å¸§ä¸»è¦åŒ…æ‹¬å¤´éƒ¨å¸§å’Œæ•°æ®å¸§ï¼Œå…¶ä¸­å¤´éƒ¨å¸§åŒ…æ‹¬3ä¸ªå­—èŠ‚çš„å¸§é•¿åº¦ï¼Œ1å­—èŠ‚çš„å¸§ç±»å‹å’Œ1å­—èŠ‚çš„æ ‡å¿—ä½ä»¥åŠ31bitçš„æµæ ‡è¯†ç¬¦ï¼Œæ¥ä¸‹æ¥å°†è¯¦ç»†ä»‹ç»æ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨ã€‚</p></blockquote><ul><li>å¸§é•¿åº¦ï¼šè¡¨ç¤ºçš„æ˜¯æ•°æ®å¸§çš„é•¿åº¦ã€‚</li><li>å¸§ç±»å‹ï¼šè¡¨ç¤ºè¿™ä¸ªå¸§æ˜¯æ•°æ®å¸§è¿˜æ˜¯æ§åˆ¶å¸§ã€‚</li><li>æ ‡å¿—ä½ï¼šç”¨äºæºå¸¦ç®€å•çš„æ§åˆ¶ä¿¡æ¯ï¼Œä¾‹å¦‚é€šè¿‡æ ‡å¿—ä½æ¥è¡¨ç¤ºæµçš„ä¼˜å…ˆçº§ã€‚</li><li>æµæ ‡è¯†ç¬¦ï¼šç”¨æ¥è¡¨ç¤ºè¿™ä¸ªå¸§å±äºå“ªä¸ªæµçš„ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®è¿™ä¸ªä¿¡æ¯ä»ä¹±åºçš„å¸§é‡Œé¢æ‰¾åˆ°ç›¸åŒæµidçš„å¸§ï¼Œä»è€Œæœ‰åºçš„ç»„è£…ä¿¡æ¯ã€‚</li><li>æ•°æ®å¸§ï¼šå­˜æ”¾çš„æ—¶ç»è¿‡HPACKç®—æ³•å‹ç¼©åçš„HTTPå¤´éƒ¨å’Œæ•°æ®ä½“ã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¦–éƒ¨å‹ç¼©">é¦–éƒ¨å‹ç¼©<a class="hash-link" href="#é¦–éƒ¨å‹ç¼©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¦–éƒ¨å‹ç¼©çš„åŸç†">é¦–éƒ¨å‹ç¼©çš„åŸç†<a class="hash-link" href="#é¦–éƒ¨å‹ç¼©çš„åŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>HTTP2ä½¿ç”¨HPACKç®—æ³•å‹ç¼©è¯·æ±‚å’Œå“åº”æ ‡å¤´çš„å…ƒæ•°æ®ï¼Œè¿™ç§æ ¼å¼æ”¯æŒé€šè¿‡é™æ€éœå¤«æ›¼ç¼–ç å¯¹ä¼ è¾“çš„å¤´éƒ¨å­—æ®µè¿›è¡Œç¼–ç ï¼Œä»è€Œå‡å°äº†ä¼ è¾“çš„å¤§å°ï¼ŒåŒæ—¶è¿™ç§å‹ç¼©ç®—æ³•è¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤å’Œæ›´æ–°ä¸€ä¸ªé¦–éƒ¨è¡¨ï¼Œè¿™ä¸ªé¦–éƒ¨è¡¨èƒ½å¤Ÿè·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€è¿‡çš„é”®å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®ä¸å†é€šè¿‡æ¯æ¬¡è¯·æ±‚å’Œå“åº”è¿›è¡Œå‘é€ï¼Œå‡å¦‚ç¬¬ä¸€ä¸ªè¯·æ±‚å‘é€äº†æ‰€æœ‰çš„å¤´éƒ¨å­—æ®µï¼Œç¬¬äºŒä¸ªè¯·æ±‚åˆ™åªéœ€å‘é€æœ‰å·®å¼‚çš„å­—æ®µï¼Œè¿™æ ·å¯ä»¥å‡å°‘å†—ä½™çš„æ•°æ®ï¼Œé™ä½å¼€é”€ã€‚HPACKä¸»è¦åŒ…å«ä¸¤ä¸ªå‹ç¼©æ¨¡å—ï¼Œç´¢å¼•è¡¨å’Œé™æ€éœå¤«æ›¼ç¼–ç ï¼Œå…¶ä¸­ç´¢å¼•è¡¨åˆåŒ…å«é™æ€è¡¨å’ŒåŠ¨æ€è¡¨ã€‚é™æ€è¡¨åŒ…å«61ä¸ªé¢„å®šä¹‰Headerçš„Key valueï¼Œä¼ è¾“çš„æ—¶å€™ä½¿ç”¨å¯¹åº”çš„ç´¢å¼•Indexæ›¿æ¢ã€‚åŠ¨æ€è¡¨æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œåˆå§‹çš„æ—¶å€™æ˜¯ç©ºçš„ï¼Œè§£å‹headerçš„æ—¶å€™æŒ‰éœ€æ·»åŠ ï¼Œæ¯æ¬¡æ·»åŠ çš„æ—¶å€™æ”¾åœ¨é˜Ÿé¦–ï¼Œç§»é™¤çš„æ—¶å€™ä»é˜Ÿå°¾å¼€å§‹ï¼ŒåŠ¨æ€è¡¨çš„å¤§å°ä¸æ˜¯æ— é™åˆ¶çš„ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hpackç®—æ³•">HPACKç®—æ³•<a class="hash-link" href="#hpackç®—æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>HPACKç®—æ³•ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p></blockquote><ul><li>é™æ€è¡¨</li><li>åŠ¨æ€è¡¨</li><li>Huffmanå‹ç¼©ç®—æ³•</li></ul><blockquote><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½ä¼šå»ºç«‹å’Œç»´æŠ¤ä¸€å¼ å­—å…¸ï¼Œä¸»è¦ç›®çš„æ—¶ä½¿ç”¨é•¿åº¦è¾ƒå°çš„ç´¢å¼•å·è¡¨ç¤ºé‡å¤çš„å¤´éƒ¨å­—ç¬¦ä¸²ï¼Œå†ç”¨Huffmanç¼–ç å‹ç¼©æ•°æ®ï¼Œå¯ä»¥è¾¾åˆ°è¾ƒé«˜çš„å‹ç¼©ç‡ã€‚</p></blockquote><blockquote><p>é™æ€è¡¨ï¼šHTTP2ä¸ºå‡ºç°åœ¨å¤´éƒ¨çš„å­—ç¬¦ä¸²å’Œå­—æ®µå»ºç«‹äº†ä¸€å¼ é™æ€è¡¨ï¼Œå®ƒæ˜¯å†™å…¥åˆ°HTTP2å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„ä»£ç ä¸­çš„ï¼Œé™æ€è¡¨é‡Œå…±æœ‰61ç»„ï¼Œä¾‹å¦‚ï¼Œåœ¨é™æ€è¡¨ä¸­GETæ–¹æ³•çš„ç´¢å¼•å·æ˜¯2ï¼ŒPOSTæ–¹æ³•çš„ç´¢å¼•å·æ˜¯3ã€‚é™æ€è¡¨çš„ç´¢å¼•è¡¨ç¤ºçš„æ˜¯å¤´éƒ¨åï¼Œvalueè¡¨ç¤ºçš„æ˜¯å¤´éƒ¨åå¯¹åº”çš„å†…å®¹ã€‚</p></blockquote><blockquote><p>åŠ¨æ€è¡¨ï¼šå› ä¸ºé™æ€è¡¨åªåŒ…å«äº†61ä¸­é«˜é¢‘å‡ºç°åœ¨å¤´éƒ¨çš„å­—ç¬¦ä¸²ï¼Œä¸åœ¨é™æ€è¡¨èŒƒå›´çš„å¤´éƒ¨å­—ç¬¦ä¸²å°±éœ€è¦æˆ‘ä»¬è‡ªè¡Œæ„å»ºåŠ¨æ€è¡¨ï¼Œè¿™ä¸ªåŠ¨æ€è¡¨çš„ç´¢å¼•ä»62èµ·æ­¥ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡å‘é€user-agentï¼Œä¼šå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„ç´¢å¼•å·ï¼Œå­—ç¬¦ä¸²å’Œå¯¹åº”çš„æ•°æ®ç»è¿‡éœå¤«æ›¼ç¼–ç åçš„äºŒè¿›åˆ¶å€¼å‘é€ç»™æœåŠ¡ç«¯ï¼Œåœ¨ç¬¬äºŒæ¬¡å‘é€çš„æ—¶å€™ï¼Œå°±ä¸ç”¨é‡å¤å‘é€è¿™ä¸ªå­—æ®µçš„æ•°æ®äº†ï¼Œåªç”¨å‘é€ä¸€ä¸ªå­—èŠ‚çš„ç´¢å¼•å·å³å¯ï¼Œå› ä¸ºåŒæ–¹éƒ½å¯ä»¥æ ¹æ®è‡ªå·±çš„åŠ¨æ€è¡¨è·å–åˆ°è¯¥å­—æ®µçš„å€¼ã€‚è¿™æ ·é¿å…äº†å¤§é‡çš„å†—ä½™æ•°æ®çš„ä¼ è¾“ï¼ŒèŠ‚çº¦äº†å¸¦å®½ã€‚</p></blockquote><blockquote><p>åŠ¨æ€è¡¨ä¼šæ— é™åˆ¶æ‰©å¤§å—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºåŠ¨æ€è¡¨è¶Šå¤§å ç”¨çš„å†…å­˜ä¹Ÿå°±è¶Šå¤§ï¼Œæ˜¯ä¼šå½±å“æœåŠ¡å™¨æ€§èƒ½çš„ï¼Œæ‰€ä»¥webæœåŠ¡å™¨ä¼šæä¾›ç›¸åº”çš„é…ç½®ï¼Œé¿å…åŠ¨æ€è¡¨æ— é™å¢å¤§ï¼Œè¾¾åˆ°ä¸Šé™åä¾¿ä¼šå…³é—­HTTP2è¿æ¥é‡Šæ”¾å†…å­˜ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æµé‡æ§åˆ¶">æµé‡æ§åˆ¶<a class="hash-link" href="#æµé‡æ§åˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>åœ¨HTTP2åè®®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªTCPè¿æ¥ä¸­ï¼Œå»ºç«‹å¤šä¸ªæ•°æ®æµï¼Œè¿™äº›æ•°æ®æµä¹‹é—´ä¹Ÿæ˜¯å­˜åœ¨ç›¸äº’ç«äº‰çš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦å¯¹æµä¸­çš„å¸§è¿›è¡Œæµé‡æ§åˆ¶ï¼Œä½†æ˜¯åªæœ‰æµé‡å¸§å—æµé‡æ§åˆ¶ï¼Œè€Œå…¶ä»–ç±»å‹çš„å¸§ä¸å—æµé‡æ§åˆ¶ï¼ŒHTTP2é€šè¿‡ä½¿ç”¨WINDOW_UPDATEå¸§æ¥æä¾›æµé‡æ§åˆ¶ã€‚</p></blockquote><blockquote><p>HTTP2åè®®ä¸­çš„æµé‡æ§åˆ¶æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š</p></blockquote><ul><li>æµé‡æ§åˆ¶åŸºäºHTTPè¿æ¥çš„æ¯ä¸€è·³è¿›è¡Œçš„ï¼Œè€Œéç«¯åˆ°ç«¯çš„æ§åˆ¶ã€‚ï¼ˆè¿™é‡Œçš„æ¯ä¸€è·³æŒ‡çš„æ˜¯HTTPè¿æ¥ä¸­é—´å¯èƒ½çš„ä»£ç†æœåŠ¡å™¨ï¼‰</li><li>æ¥æ”¶æ–¹å…¬å¸ƒè‡ªå·±æ‰“ç®—åœ¨æ¯ä¸ªæµä»¥åŠæ•´ä¸ªè¿æ¥ä¸Šåˆ†åˆ«æ¥æ”¶å¤šå°‘å­—èŠ‚ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¥ä¿¡ç”¨ä¸ºåŸºç¡€çš„æ–¹æ¡ˆã€‚</li><li>æµé‡æ§åˆ¶æ˜¯æœ‰æ–¹å‘çš„ï¼Œç”±æ¥æ”¶è€…å…¨é¢æ§åˆ¶ï¼Œæ¥æ”¶æ–¹å¯ä»¥ä¸ºæ¯ä¸ªæµå’Œæ•´ä¸ªè¿æ¥è®¾ç½®ä»»æ„çš„çª—å£å¤§å°ï¼Œå‘é€æ–¹å¿…é¡»å°Šé‡æ¥æ”¶æ–¹è®¾ç½®çš„æµé‡æ§åˆ¶é™åˆ¶ã€‚</li><li>æ— è®ºæ˜¯æ–°æµè¿˜æ˜¯æ•´ä¸ªè¿æ¥ï¼Œæµé‡æ§åˆ¶çª—å£çš„åˆå§‹å€¼æ˜¯65535å­—èŠ‚ã€‚</li><li>HTTP2åªå®šä¹‰äº†WINDOW_UPDATEå¸§çš„æ ¼å¼å’Œè¯­ä¹‰ï¼Œå¹¶æ²¡æœ‰å¯¹é€šä¿¡åŒæ–¹å¦‚ä½•å®ç°è¿›è¡Œçº¦æŸã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¤šè·¯å¤ç”¨">å¤šè·¯å¤ç”¨<a class="hash-link" href="#å¤šè·¯å¤ç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>åœ¨HTTP1.1ä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯æƒ³å‘é€å¤šä¸ªå¹¶è¡Œçš„è¯·æ±‚ï¼Œå¿…é¡»ä½¿ç”¨å¤šä¸ªTCPè¿æ¥ï¼Œè€ŒHTTP2çš„äºŒè¿›åˆ¶åˆ†å¸§å±‚çªç ´äº†è¿™ä¸€é™åˆ¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚å’Œå“åº”éƒ½åœ¨åŒä¸€ä¸ªTCPè¿æ¥ä¸Šå®Œæˆï¼Œå•ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµï¼Œæ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºå¯ä»¥æ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†ç¬¦è¿›è¡Œé‡æ–°ç»„è£…ã€‚</p></blockquote><blockquote><p>ä¸Šé¢çš„ç‰¹æ€§ä½¿å¾—æ€§èƒ½æœ‰äº†æå¤§çš„æ€§èƒ½æå‡ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p></blockquote><ul><li>å› ä¸ºåŒä¸€ä¸ªåŸŸååªéœ€è¦å ç”¨ä¸€ä¸ªTCPè¿æ¥ï¼Œä½¿ç”¨è¿™ä¸ªè¿æ¥å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè¿™æ ·ä½¿å¾—æ•´ä¸ªé¡µé¢çš„èµ„æºçš„ä¸‹è½½è¿‡ç¨‹åªéœ€è¦ä¸€æ¬¡æ…¢å¯åŠ¨ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†å¤šä¸ªTCPè¿æ¥å¸¦æ¥çš„ç«äº‰é—®é¢˜ã€‚</li><li>å¯ä»¥å¹¶è¡Œäº¤é”™çš„å‘é€å¤šä¸ªè¯·æ±‚æˆ–å“åº”ï¼Œè¿™äº›è¯·æ±‚æˆ–å“åº”ä¹‹é—´äº’ä¸å½±å“ã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è¯·æ±‚ä¼˜å…ˆçº§">è¯·æ±‚ä¼˜å…ˆçº§<a class="hash-link" href="#è¯·æ±‚ä¼˜å…ˆçº§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTP2ä¸­æ¯ä¸ªæµéƒ½å¯ä»¥å¸¦æœ‰ä¸€ä¸ª31bitçš„ä¼˜å…ˆå€¼ï¼Œ0è¡¨ç¤ºåšé«˜ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šä½ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šï¼Œå¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸ç­‰äºè¯´è¿™äº›è¯·æ±‚å¯¹äºæœåŠ¡å™¨æ¥è¯´éƒ½æ˜¯ä¸€è§†åŒä»çš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯å¯¹èµ„æºçš„éœ€æ±‚ä¸åŒï¼Œæ¯”å¦‚å®¢æˆ·ç«¯å¯¹csså’Œjsçš„éœ€æ±‚è¿œå¤§äºå¯¹æ–‡æ¡£å†…å›¾ç‰‡çš„éœ€æ±‚ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªæµçš„headerså¸§ä¸­å¯ä»¥å¸¦æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼ŒæœåŠ¡ç«¯å¯ä»¥å› æ­¤é€‚å½“åˆ†é…èµ„æºï¼Œä¼˜å…ˆå‘é€ä¼˜å…ˆçº§é«˜çš„å¸§ã€‚æœåŠ¡ç«¯åœ¨ä½¿ç”¨è¯·æ±‚ä¼˜å…ˆçº§çš„æ—¶å€™è¦é¿å…å¸¦æ¥é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æœåŠ¡å™¨æ¨é€">æœåŠ¡å™¨æ¨é€<a class="hash-link" href="#æœåŠ¡å™¨æ¨é€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTP2æ”¹å˜äº†ä¼ ç»Ÿçš„è¯·æ±‚åº”ç­”æ¨¡å¼ï¼ŒæœåŠ¡å™¨ä¸å†å®Œå…¨è¢«åŠ¨åœ°å“åº”è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥æ–°å»ºæµä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œæ¯”å¦‚ï¼Œæµè§ˆå™¨åˆšè¯·æ±‚HTMLé¡µé¢çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå°†ä¸»é¡µå†…å®¹ï¼Œlogoä»¥åŠæ ·å¼è¡¨éƒ½å“åº”åˆ°å®¢æˆ·ç«¯çš„ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯éœ€è¦è¿™äº›èµ„æºçš„æ—¶å€™ï¼Œè¿™äº›èµ„æºå·²ç»åœ¨ç¼“å­˜ä¸­äº†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç­‰å¾…çš„å»¶è¿Ÿï¼Œä¸è¿‡åªæœ‰å»ºç«‹è¿æ¥åï¼ŒæœåŠ¡å™¨æ‰å¯ä»¥æ¨é€èµ„æºï¼Œè¿™ç§æœºåˆ¶å°±æ˜¯æœåŠ¡å™¨æ¨é€ã€‚</p></blockquote><blockquote><p>æœåŠ¡å™¨æ¨é€çš„ç‰¹ç‚¹ï¼š</p></blockquote><ul><li>é’ˆå¯¹æ¯ä¸€ä¸ªå¸Œæœ›å‘é€çš„èµ„æºï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ªPUSH_PROMISEå¸§ï¼Œå½“ç„¶å®¢æˆ·ç«¯æœ‰æƒé€‰æ‹©æ‹’ç»è¿™ä¸ªèµ„æºï¼Œé€šè¿‡RST_STREAMå¸§ï¼Œè¿™ä¸€æ­¥çš„æ“ä½œå…ˆäºçˆ¶å“åº”(index.html)ï¼Œå®¢æˆ·ç«¯äº†è§£åˆ°æœåŠ¡å™¨ç«¯æ‰“ç®—æ¨é€å“ªäº›èµ„æºï¼Œå°±ä¸ä¼šä¸ºè¿™äº›èµ„æºåˆ›å»ºé‡å¤çš„è¯·æ±‚ï¼Œå½“å®¢æˆ·ç«¯æ”¶åˆ°index.htmlçš„å“åº”æ—¶ï¼Œscript.jså’Œstyle.csså·²ç»å­˜åœ¨äºç¼“å­˜ä¸­äº†ã€‚</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒhttp2æœ‰ä»€ä¹ˆç¼ºç‚¹">äºŒã€HTTP2æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ<a class="hash-link" href="#äºŒhttp2æœ‰ä»€ä¹ˆç¼ºç‚¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>TCPä»¥åŠTCP+TLSå»ºç«‹è¿æ¥çš„å»¶æ—¶ï¼ŒHTTP2ä½¿ç”¨TCPåè®®æ¥ä¼ è¾“ï¼Œè€Œå¦‚æœä½¿ç”¨HTTPSè¿˜éœ€è¦ä½¿ç”¨TLSåè®®è¿›è¡Œå®‰å…¨ä¼ è¾“ï¼Œè€Œä½¿ç”¨TLSä¹Ÿéœ€è¦ä¸€ä¸ªæ¡æ‰‹çš„è¿‡ç¨‹ï¼Œè¿™ä¹Ÿä¼šå¸¦æ¥ä¸€äº›å»¶æ—¶ã€‚</li><li>TCPçš„é˜Ÿå¤´é˜»å¡å¹¶æ²¡æœ‰å½»åº•è§£å†³ï¼Œåœ¨HTTP2ä¸­ï¼Œå¤šä¸ªè¯·æ±‚æ˜¯åœ¨ä¸€ä¸ªTCPç®¡é“ä¸­çš„ï¼Œå½“HTTP2å‡ºç°ä¸¢åŒ…çš„æ—¶å€™ï¼Œæ•´ä¸ªTCPéƒ½è¦å¼€å§‹ç­‰å¾…é‡ä¼ ï¼Œæ­¤æ—¶ä¼šé˜»å¡è¯¥TCPè¿æ¥ä¸­çš„æ‰€æœ‰è¯·æ±‚ã€‚æ­¤æ—¶å¯èƒ½è¿˜ä¸å¦‚HTTP1.1ä¸­çš„å¤šä¸ªTCPè¿æ¥æ•ˆç‡é«˜ã€‚é˜Ÿå¤´é˜»å¡åˆ†ä¸ºTCPé˜Ÿå¤´é˜»å¡å’ŒHTTPé˜Ÿå¤´é˜»å¡ï¼ŒHTTP2è§£å†³çš„æ˜¯HTTPé˜Ÿå¤´é˜»å¡ï¼Œä½†æ˜¯TCPçš„é˜Ÿå¤´é˜»å¡å¹¶æœªè§£å†³ã€‚å› ä¸ºHTTPæ˜¯åº”ç”¨å±‚åè®®ï¼ŒTCPæ˜¯ä¼ è¾“å±‚åè®®ã€‚</li><li>å¤šè·¯å¤ç”¨å¯¼è‡´æœåŠ¡å™¨å‹åŠ›ä¸Šå‡ï¼Œå¤šè·¯å¤ç”¨ç”±äºæ²¡æœ‰é™åˆ¶åŒæ—¶è¯·æ±‚æ•°é‡ï¼Œæœ‰å¯èƒ½å‡ºç°çŸ­æ—¶é—´å†…è¯·æ±‚æ•°çˆ†å‘çš„æƒ…å†µï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨å‹åŠ›ä¸Šå‡ã€‚</li><li>å¤šè·¯å¤ç”¨å®¹æ˜“è¶…æ—¶ï¼Œå¤§æ‰¹é‡çš„è¯·æ±‚åŒæ—¶å‘é€ï¼Œä½†æ˜¯ç½‘ç»œçš„å¸¦å®½å’ŒæœåŠ¡å™¨çš„èµ„æºæ˜¯æœ‰é™çš„ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå‡ºç°è¯·æ±‚è¶…æ—¶çš„æƒ…å†µã€‚</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http20å¤šè·¯å¤ç”¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ•ˆç‡ä¸å¦‚11">HTTP2.0å¤šè·¯å¤ç”¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ•ˆç‡ä¸å¦‚1.1ï¼Ÿ<a class="hash-link" href="#http20å¤šè·¯å¤ç”¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ•ˆç‡ä¸å¦‚11" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTP2.0åœ¨ä¸¢åŒ…çš„æ—¶å€™æ•ˆç‡å¯èƒ½ä¸å¦‚1.1ï¼Œå› ä¸ºåœ¨å‡ºç°ä¸¢åŒ…çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªTCPéƒ½è¦å¼€å§‹ç­‰å¾…é‡ä¼ ï¼Œä¹Ÿå°±å¯¼è‡´åé¢çš„æ‰€æœ‰æ•°æ®éƒ½è¢«é˜»å¡äº†ï¼Œä½†æ˜¯å¯¹äºHTTP1.1æ¥è¯´ï¼Œå¯ä»¥å¼€å¯å¤šä¸ªTCPè¿æ¥ï¼Œå‡ºç°è¿™ç§æƒ…å†µåªä¼šå½±å“åˆ°å…¶ä¸­ä¸€ä¸ªè¿æ¥ï¼Œå‰©ä½™çš„TCPè¿æ¥è¿˜å¯ä»¥æ­£å¸¸ä¼ è¾“æ•°æ®ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè¿›åˆ¶åˆ†å¸§çš„æ ¹æœ¬ç›®çš„æ˜¯ä»€ä¹ˆåªæ˜¯ä¸ºäº†è¯»å–é€Ÿåº¦å¿«å—">äºŒè¿›åˆ¶åˆ†å¸§çš„æ ¹æœ¬ç›®çš„æ˜¯ä»€ä¹ˆï¼Œåªæ˜¯ä¸ºäº†è¯»å–é€Ÿåº¦å¿«å—ï¼Ÿ<a class="hash-link" href="#äºŒè¿›åˆ¶åˆ†å¸§çš„æ ¹æœ¬ç›®çš„æ˜¯ä»€ä¹ˆåªæ˜¯ä¸ºäº†è¯»å–é€Ÿåº¦å¿«å—" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>äºŒè¿›åˆ¶åˆ†å¸§çš„æ ¹æœ¬ç›®çš„æ˜¯ä¸ºäº†æ›´æœ‰æ•ˆçš„åˆ©ç”¨åº•å±‚TCPåè®®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯HTTP2åè®®ä¸­çš„å…¶ä»–åŠŸèƒ½å’Œæ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http2ä¸­çš„é•¿è¿æ¥ç›¸æ¯”äºhttp1ä¸­æ‰‹åŠ¨æŒ‡å®škeep-aliveçš„ä¼˜åŠ¿åŸç†">HTTP2ä¸­çš„é•¿è¿æ¥ç›¸æ¯”äºhttp1ä¸­æ‰‹åŠ¨æŒ‡å®škeep-aliveçš„ä¼˜åŠ¿ã€åŸç†<a class="hash-link" href="#http2ä¸­çš„é•¿è¿æ¥ç›¸æ¯”äºhttp1ä¸­æ‰‹åŠ¨æŒ‡å®škeep-aliveçš„ä¼˜åŠ¿åŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>HTTP1.Xä¸­çš„keep-aliveå¿…é¡»æŒ‰ç…§è¯·æ±‚å‘é€çš„é¡ºåºè¿”å›å“åº”ï¼Œä½†æ˜¯HTTP2å¤šè·¯å¤ç”¨å¯ä»¥ä¸æŒ‰é¡ºåºè¿›è¡Œå“åº”ã€‚</li><li>HTTP1.Xä¸­çš„keep-aliveå•ä¸ªTCPè¿æ¥åœ¨åŒä¸€æ—¶åˆ»åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ŒHTTP2å•ä¸ªTCPåœ¨åŒä¸€æ—¶åˆ»å¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ã€‚</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸‰http30">ä¸‰ã€HTTP3.0<a class="hash-link" href="#ä¸‰http30" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ºä»€ä¹ˆè¦æœ‰http30">ä¸ºä»€ä¹ˆè¦æœ‰HTTP3.0ï¼Ÿ<a class="hash-link" href="#ä¸ºä»€ä¹ˆè¦æœ‰http30" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>ä¹‹æ‰€ä»¥è¦æœ‰HTTP3ä¸»è¦åŸå› è¿˜åœ¨äºä¸Šæ–‡æåˆ°çš„HTTP2å­˜åœ¨çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜çš„æ ¹æºæ˜¯åº•å±‚æ”¯æ’‘çš„TCPåè®®é€ æˆçš„ã€‚Googleæ„è¯†åˆ°è¿™äº›é—®é¢˜ä¹‹åï¼Œäºæ˜¯å°±æå‡ºäº†åŸºäºUDPåè®®çš„QUICåè®®ï¼Œè®©HTTPè·‘åœ¨QUICä¸Šï¼Œè€Œä¸æ˜¯TCPä¸Šï¼Œè¿™å°±æ˜¯HTTP3ï¼ŒHTTP3è§£å†³äº†HTTP2å­˜åœ¨çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http3ä¸ºä»€ä¹ˆé€‰æ‹©udp">HTTP3ä¸ºä»€ä¹ˆé€‰æ‹©UDPï¼Ÿ<a class="hash-link" href="#http3ä¸ºä»€ä¹ˆé€‰æ‹©udp" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTP3é€‰æ‹©UDPä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›åŸå› ï¼š</p></blockquote><ul><li>åŸºäºTCPå¼€å‘çš„è®¾å¤‡å’Œåè®®éå¸¸å¤šï¼Œå…¼å®¹èµ·æ¥å›°éš¾ã€‚</li><li>TCPåè®®æ ˆæ˜¯Linuxå†…éƒ¨çš„é‡è¦éƒ¨åˆ†ï¼Œä¿®æ”¹å’Œå‡çº§æˆæœ¬å¾ˆå¤§ã€‚</li><li>UDPæœ¬èº«æ˜¯æ— è¿æ¥çš„ã€æ²¡æœ‰å»ºé“¾å’Œæ‹†é“¾æˆæœ¬ã€‚</li><li>UDPçš„æ•°æ®åŒ…æ— é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</li><li>UDPæ”¹é€ æˆæœ¬å°ã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http3æ–°ç‰¹æ€§">HTTP3æ–°ç‰¹æ€§<a class="hash-link" href="#http3æ–°ç‰¹æ€§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å¤šè·¯å¤ç”¨ï¼Œè§£å†³äº†TCPé˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</li></ol><blockquote><p>HTTP2.0åè®®çš„å¤šè·¯å¤ç”¨æœºåˆ¶è§£å†³äº†HTTPå±‚çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œä½†æ˜¯åœ¨TCPå±‚ä»ç„¶å­˜åœ¨é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œå¦‚æœåŸºäºTCPåè®®ï¼Œä¼šå‡ºç°æŸä¸ªæ•°æ®åŒ…ä¸¢å¤±å¯¼è‡´æ•´ä¸ªè¿æ¥æ•°æ®è¢«é˜»å¡ã€‚QUICåè®®æ˜¯åŸºäºUDPåè®®å®ç°çš„ï¼Œåœ¨ä¸€æ¡é“¾ä¸Šå¯ä»¥æœ‰å¤šä¸ªæµï¼Œæµä¸æµä¹‹é—´æ˜¯äº’ä¸å½±å“çš„ï¼Œä¸€ä¸ªæµçš„åŒ…å‘ç”Ÿä¸¢åŒ…åªéœ€è¿™ä¸ªæµçš„åŒ…è¿›è¡Œé‡ä¼ ï¼Œå…¶ä»–æµçš„åŒ…ä¸å—å½±å“ï¼Œè¿™æ ·å°±è§£å†³äº†TCPå­˜åœ¨çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼ŒåŒæ—¶QUICåè®®åœ¨ç§»åŠ¨ç«¯çš„è¡¨ç°ä¹Ÿæ¯”TCPå¥½ï¼Œå› ä¸ºTCPæ˜¯åŸºäºIPå’Œç«¯å£å·å»è¯†åˆ«è¿æ¥çš„ï¼Œè¿™ç§å˜åŒ–åœ¨å¤šå˜çš„ç§»åŠ¨ç«¯ç½‘ç»œç¯å¢ƒä¸‹æ˜¯å¾ˆè„†å¼±çš„ï¼ŒQUICé€šè¿‡Idçš„æ–¹å¼å»è¯†åˆ«è¿æ¥ï¼Œä¸ç®¡ç½‘ç»œç¯å¢ƒå¦‚ä½•å˜åŒ–ï¼Œåªè¦IDä¸å˜ï¼Œå°±èƒ½è¿…é€Ÿè¿ä¸Šã€‚</p></blockquote><ol start="2"><li>0RTTå»ºé“¾</li></ol><blockquote><p>RTTæŒ‡çš„æ˜¯æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­ä¸€æ¥ä¸€å›çš„æ—¶é—´æ¶ˆè€—ã€‚RTTåŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼šå¾€è¿”ä¼ æ’­æ—¶å»¶ã€ç½‘ç»œè®¾å¤‡å†…æ’é˜Ÿæ—¶å»¶ã€åº”ç”¨ç¨‹åºæ•°æ®å¤„ç†æ—¶å»¶ã€‚</p></blockquote><blockquote><p>ä¸€èˆ¬æ¥è¯´HTTPSåè®®å»ºç«‹å®Œæ•´çš„é“¾æ¥éœ€è¦TCPæ¡æ‰‹å’ŒTLSæˆ‘å—ä¸ï¼Œæ€»è®¡è‡³å°‘éœ€è¦2-3ä¸ªRTTï¼Œæ™®é€šçš„HTTPåè®®ä¹Ÿéœ€è¦è‡³å°‘ä¸€ä¸ªRTTæ‰å¯ä»¥å®Œæˆæ¡æ‰‹ï¼Œç„¶è€ŒQUICåè®®å¯ä»¥å®ç°åœ¨ç¬¬ä¸€ä¸ªåŒ…å°±åŒ…å«æœ‰æ•ˆçš„åº”ç”¨æ•°æ®ï¼Œä»è€Œå®ç°0RTTï¼Œä½†æ˜¯è¿™æ˜¯æœ‰å‰ææ¡ä»¶çš„ï¼Œå¯¹äºç¬¬ä¸€æ¬¡äº¤äº’çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯0RTTä¹Ÿæ˜¯åšä¸åˆ°çš„ï¼Œå› ä¸ºåŒæ–¹éœ€è¦è¿›è¡Œ1RTTçš„å¯†é’¥äº¤æ¢ï¼Œé¦–æ¬¡è¿æ¥å®¢æˆ·ç«¯å¯¹å¯†é’¥ä¿¡æ¯è¿›è¡Œäº†ç¼“å­˜ï¼Œåœ¨ç¼“å­˜æœ‰æ•ˆæ—¶é—´å†…ï¼Œå†æ¬¡è¿æ¥å¯ä»¥è·³è¿‡è¿™ä¸ª1RTTï¼Œå®ç°0RTTçš„æ•°æ®äº¤äº’ã€‚</p></blockquote><ol start="3"><li>å‰å‘çº é”™æœºåˆ¶</li></ol><blockquote><p>QUICåè®®çš„çš„æ¯ä¸ªæ•°æ®åŒ…é™¤äº†å®ƒæœ¬èº«çš„å†…å®¹ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬äº†éƒ¨åˆ†å…¶ä»–æ•°æ®åŒ…çš„æ•°æ®ï¼Œå› æ­¤å°‘é‡çš„ä¸¢åŒ…å¯ä»¥é€šè¿‡å…¶ä»–åŒ…çš„å†—ä½™æ•°æ®ç›´æ¥ç»„è£…è€Œæ— éœ€é‡ä¼ ï¼Œå‘å‰çº é”™ç‰ºç‰²äº†æ¯ä¸ªæ•°æ®åŒ…å¯ä»¥å‘é€æ•°æ®çš„ä¸Šé™ï¼Œä½†æ˜¯å‡å°‘äº†å› ä¸ºä¸¢åŒ…å¯¼è‡´çš„æ•°æ®é‡ä¼ ï¼Œå› ä¸ºæ•°æ®é‡ä¼ å°†ä¼šæ¶ˆè€—æ›´å¤šçš„æ—¶é—´ï¼Œå‡å¦‚è¦å‘é€ä¸‰ä¸ªåŒ…ï¼Œåè®®ä¼šè®¡ç®—å‡ºè¿™ä¸‰ä¸ªåŒ…çš„å¼‚æˆ–å€¼å¹¶å•ç‹¬å‘å‡ºä¸€ä¸ªæ ¡éªŒåŒ…ï¼Œä¹Ÿå°±æ˜¯æ€»å…±å‘å‡ºäº†å››ä¸ªåŒ…ï¼Œå½“éæ ¡éªŒåŒ…ä¸¢å¤±çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å¦å¤–ä¸‰ä¸ªåŒ…è®¡ç®—å‡ºä¸¢å¤±çš„æ•°æ®åŒ…çš„å†…å®¹ï¼Œå½“ç„¶è¿™ç§æŠ€æœ¯åªèƒ½ä½¿ç”¨åœ¨ä¸¢å¤±ä¸€ä¸ªåŒ…çš„æƒ…å†µï¼Œå¦‚æœå‡ºç°ä¸¢å¤±å¤šä¸ªåŒ…çš„æƒ…å†µï¼Œå°±åªèƒ½ä½¿ç”¨é‡ä¼ æœºåˆ¶äº†ã€‚</p></blockquote><ol start="4"><li>è¿æ¥è¿ç§»</li></ol><blockquote><p>ç½‘ç»œåˆ‡æ¢å‡ ä¹æ— æ—¶æ— åˆ»éƒ½åœ¨å‘ç”Ÿã€‚TCPåè®®ä½¿ç”¨äº”å…ƒç»„æ¥è¡¨ç¤ºä¸€æ¡å”¯ä¸€çš„è¿æ¥ï¼Œå½“æˆ‘ä»¬ä»4Gç¯å¢ƒåˆ‡æ¢åˆ°WiFiç¯å¢ƒçš„æ—¶å€™ï¼Œæ‰‹æœºçš„IPåœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ­¤æ—¶å°±å¿…é¡»åˆ›å»ºæ–°çš„TCPè¿æ¥æ‰èƒ½ç»§ç»­ä¼ è¾“æ•°æ®ã€‚QUICåè®®æ‘’å¼ƒäº†äº”å…ƒç»„çš„æ¦‚å¿µï¼Œä½¿ç”¨64ä½éšæœºæ•°ä½œä¸ºè¿æ¥çš„IDï¼Œå¹¶ä½¿ç”¨è¯¥IDè¡¨ç¤ºè¿æ¥ï¼ŒåŸºäºQUICåè®®ï¼Œåœ¨åˆ‡æ¢æµé‡å’ŒWiFiçš„æ—¶å€™ï¼Œä¸ä¼šå‡ºç°é‡è¿çš„æƒ…å†µï¼Œæé«˜äº†æ•ˆç‡ã€‚</p></blockquote><ol start="5"><li>åŠ å¯†è®¤è¯çš„æŠ¥æ–‡</li></ol><blockquote><p>TCPåè®®å¤´éƒ¨æ²¡æœ‰ç»è¿‡ä»»ä½•åŠ å¯†å’Œè®¤è¯ï¼Œæ‰€ä»¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¾ˆå®¹æ˜“è¢«ä¸­é—´ç½‘ç»œè®¾å¤‡ç¯¡æ”¹ï¼Œæ³¨å…¥å’Œçªƒå¬ï¼Œä½†æ˜¯QUICé™¤äº†ä¸ªåˆ«æŠ¥æ–‡å¤–ï¼Œæ‰€æœ‰æŠ¥æ–‡å¤´éƒ¨éƒ½æ˜¯ç»è¿‡åŠ å¯†è®¤è¯çš„ã€‚</p></blockquote><ol start="6"><li>å®ç°äº†ç±»ä¼¼TCPçš„æµé‡æ§åˆ¶ï¼Œä¼ è¾“å¯é æ€§çš„åŠŸèƒ½ã€‚</li></ol><blockquote><p>è™½ç„¶UDPä¸æä¾›å¯é æ€§çš„ä¼ è¾“ï¼Œä½†QUICåœ¨UDPçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€å±‚æ¥ä¿è¯æ•°æ®å¯é æ€§çš„å¯é æ€§ä¼ è¾“ï¼Œå®ƒæä¾›äº†æ•°æ®åŒ…é‡ä¼ ï¼Œæ‹¥å¡æ§åˆ¶ä»¥åŠå…¶ä»–ä¸€äº›TCPä¸­å­˜åœ¨çš„ç‰¹æ€§ã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å››http0-http11-http20çš„åŒºåˆ«">å››ã€HTTP.0 HTTP1.1 HTTP2.0çš„åŒºåˆ«<a class="hash-link" href="#å››http0-http11-http20çš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http10å’Œhttp11ä¹‹é—´çš„åŒºåˆ«">HTTP1.0å’ŒHTTP1.1ä¹‹é—´çš„åŒºåˆ«<a class="hash-link" href="#http10å’Œhttp11ä¹‹é—´çš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>ç¼“å­˜å¤„ç†</li></ol><blockquote><p>åœ¨HTTP1.0ä¸­ä¸»è¦æ˜¯ç”¨headeré‡Œé¢çš„If-Modified-Sinceï¼ŒExpiresä½œä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼Œè€ŒHTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ï¼Œä¾‹å¦‚Etag,If-Unmodified-Since,If-Match,If-None-Matchç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚</p></blockquote><ol start="2"><li>å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨</li></ol><blockquote><p>åœ¨HTTP1.0ä¸­ï¼Œå­˜åœ¨ä¸€äº›æµªè´¹å¸¦å®½çš„ç°è±¡ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯åªæ˜¯éœ€è¦æŸä¸ªå¯¹è±¡çš„æŸä¸€éƒ¨åˆ†ï¼Œè€ŒæœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡ä¼ é€è¿‡æ¥äº†ï¼Œå¹¶ä¸”ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ã€‚HTTP1.1åˆ™åœ¨è¯·æ±‚å¤´å¼•å…¥äº†rangeå¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›ç æ˜¯206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿æ¥ã€‚</p></blockquote><ol start="3"><li>é”™è¯¯é€šçŸ¥çš„ç®¡ç†</li></ol><blockquote><p>åœ¨HTTP1.1ä¸­æ–°å¢äº†24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œå¦‚409ï¼ˆConflitï¼‰è¡¨ç¤ºè¯·æ±‚çš„èµ„æºå’Œèµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼Œ410(Gone)è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…çš„åˆ é™¤ã€‚</p></blockquote><ol start="4"><li>Hostå¤´å¤„ç†</li></ol><blockquote><p>åœ¨HTTP1.0ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤è¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåHostname,ä½†æ˜¯éšç€è™šæ‹Ÿä¸»æœºçš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼Œå¹¶ä¸”å…±äº«ä¸€ä¸ªIPåœ°å€ï¼ŒHTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯400 Bad Requestã€‚</p></blockquote><ol start="5"><li>é•¿è¿æ¥</li></ol><blockquote><p>HTTP1.1æ”¯æŒé•¿è¿æ¥å’Œè¯·æ±‚çš„æµæ°´çº¿å¤„ç†ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œåœ¨HTTP1.1ä¸­é»˜è®¤å¼€å¯Connection: keep-aliveï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†HTTP1.0æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿æ¥çš„ç¼ºç‚¹ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http20å’Œhttp11ä¹‹é—´çš„åŒºåˆ«">HTTP2.0å’ŒHTTP1.1ä¹‹é—´çš„åŒºåˆ«<a class="hash-link" href="#http20å’Œhttp11ä¹‹é—´çš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>æ–°çš„äºŒè¿›åˆ¶æ ¼å¼</li></ol><blockquote><p>HTTP1.1çš„è§£ææ˜¯åŸºäºæ–‡æœ¬çš„ï¼ŒåŸºäºæ–‡æœ¬åè®®çš„æ ¼å¼è§£æå­˜åœ¨å¤©ç„¶ç¼ºé™·ï¼ŒäºŒè¿›åˆ¶åˆ™ä¸åŒï¼Œåªæœ‰0å’Œ1çš„ç»„åˆï¼ŒåŸºäºè¿™ç§è€ƒè™‘HTTP2.0çš„åè®®è§£æé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ç°æ–¹ä¾¿ä¸”å¥å£®ã€‚</p></blockquote><ol start="2"><li>å¤šè·¯å¤ç”¨</li></ol><blockquote><p>å…³äºè¿™éƒ¨åˆ†çš„ä»‹ç»è¯·çœ‹HTTP2.0æ–°ç‰¹æ€§å…³äºå¤šè·¯å¤ç”¨çš„ä»‹ç»ã€‚</p></blockquote><ol start="3"><li>é¦–éƒ¨å‹ç¼©</li></ol><blockquote><p>å…³äºè¿™éƒ¨åˆ†çš„ä»‹ç»è¯·çœ‹HTTP2.0æ–°ç‰¹æ€§å…³äºé¦–éƒ¨å‹ç¼©çš„ä»‹ç»ã€‚</p></blockquote><ol start="4"><li>æœåŠ¡å™¨æ¨é€</li></ol><blockquote><p>å…³äºè¿™éƒ¨åˆ†çš„ä»‹ç»è¯·çœ‹HTTP2.0æ–°ç‰¹æ€§å…³äºæœåŠ¡å™¨æ¨é€çš„ä»‹ç»ã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äº”keep-aliveæœºåˆ¶">äº”ã€Keep-Aliveæœºåˆ¶<a class="hash-link" href="#äº”keep-aliveæœºåˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>è¯´èµ·keep-aliveï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼Œæœ‰ä¸¤ç§keepaliveï¼Œä¸€ç§æ˜¯TCPçš„keepaliveï¼Œå¦ä¸€ç§æ˜¯HTTPçš„keep-aliveã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tcpçš„keepalive">TCPçš„keepalive<a class="hash-link" href="#tcpçš„keepalive" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>TCPçš„keepaliveå­˜åœ¨çš„ä¸»è¦æ„ä¹‰æ˜¯ä¿æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œä¸€æ–¹ä¼šä¸å®šæœŸçš„å‘é€å¿ƒè·³åŒ…ç»™å¦ä¸€æ–¹ï¼Œå¦‚æœé—´éš”å‘é€å‡ æ¬¡ï¼Œå¯¹æ–¹è¿”å›çš„éƒ½æ˜¯RSTï¼Œè€Œä¸æ˜¯ACKï¼Œé‚£ä¹ˆå°±é‡Šæ”¾å½“å‰çš„è¿æ¥ï¼Œå¦‚æœTCPå±‚æ²¡æœ‰keepaliveçš„æœºåˆ¶ï¼Œä¸€æ—¦ä¸€æ–¹æ–­å¼€è¿æ¥å´æ²¡æœ‰å‘é€FINç»™å¦å¤–ä¸€æ–¹ï¼Œé‚£ä¹ˆå¦å¤–ä¸€æ–¹ä¼šä¸€ç›´ä»¥ä¸ºè¿™ä¸ªè¿æ¥è¿˜å­˜åœ¨ï¼Œé•¿æ—¶é—´çš„è¯ï¼Œè¿™å¯¹æœåŠ¡å™¨çš„èµ„æºçš„å½±å“æ˜¯å¾ˆå¤§çš„ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpçš„keep-alive">HTTPçš„keep-alive<a class="hash-link" href="#httpçš„keep-alive" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPå±‚çš„keep-aliveä¸»è¦æ˜¯ä¸ºäº†å¤ç”¨TCPè¿æ¥ï¼ŒHTTPæœåŠ¡çš„å‘èµ·æ–¹ä¸€èˆ¬éƒ½æ˜¯æµè§ˆå™¨ï¼Œä¸€èˆ¬å…ˆæ‰§è¡Œå®Œé€»è¾‘å¹¶ä¼ è¾“å®Œæ•°æ®çš„ä¸€å®šæ˜¯æœåŠ¡ç«¯ï¼Œå‡å¦‚æ²¡æœ‰keep-aliveæœºåˆ¶çš„å­˜åœ¨ï¼ŒæœåŠ¡ç«¯åœ¨ä¼ è¾“å®Œæ•°æ®ä¹‹åä¼šé¦–å…ˆæ–­å¼€è¿æ¥ï¼Œç”±äºTCPçš„å››æ¬¡æŒ¥æ‰‹çš„æœºåˆ¶ï¼Œå…ˆå‘èµ·æ–­å¼€è¿æ¥çš„ä¸€æ–¹ä¼šè¿›å…¥TIME_WAITçŠ¶æ€å¹¶ç­‰å¾…2MSLçš„æ—¶é—´ï¼Œå®¢æˆ·ç«¯çš„æ¯ä¸€æ¬¡è¯·æ±‚æœåŠ¡ç«¯éƒ½è¦æ¶ˆè€—è¿™ä¸ªæ—¶é—´ï¼Œä½†æ˜¯æœåŠ¡å™¨çš„èµ„æºæ˜¯éå¸¸æœ‰é™çš„ï¼Œè¿™å¯¹æœåŠ¡å™¨ç«¯çš„æ¶ˆè€—æ˜¯å·¨å¤§çš„ï¼Œæ‰€ä»¥HTTPå±‚çš„keep-aliveæ˜¯éå¸¸é‡è¦çš„ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒè€…åŒºåˆ«">äºŒè€…åŒºåˆ«<a class="hash-link" href="#äºŒè€…åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>TCPçš„keepaliveæ˜¯åœ¨ESTABLISHEDçŠ¶æ€ï¼Œä¸»è¦æ˜¯ç”¨äºæ£€æµ‹è¿æ¥çš„å¯ç”¨æ€§ï¼Œè€ŒTCPçš„keep-aliveä¸»è¦æ˜¯ä¸ºäº†è¿›è¡ŒTCPè¿æ¥çš„å¤ç”¨ï¼Œé¿å…é¢‘ç¹çš„TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„ç¯èŠ‚ã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…­httpåŸºæœ¬ç»“æ„">å…­ã€HTTPåŸºæœ¬ç»“æ„<a class="hash-link" href="#å…­httpåŸºæœ¬ç»“æ„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpåè®®åœ¨å“ªä¸€å±‚ä¸‹é¢é‚£ä¸€å±‚æ˜¯ä»€ä¹ˆåè®®">HTTPåè®®åœ¨å“ªä¸€å±‚ï¼Ÿä¸‹é¢é‚£ä¸€å±‚æ˜¯ä»€ä¹ˆåè®®ï¼Ÿ<a class="hash-link" href="#httpåè®®åœ¨å“ªä¸€å±‚ä¸‹é¢é‚£ä¸€å±‚æ˜¯ä»€ä¹ˆåè®®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPåè®®åœ¨åº”ç”¨å±‚ï¼Œå¦‚æœæ˜¯TCP/IPå››å±‚ç½‘ç»œæ¨¡å‹çš„è¯ï¼Œä¸‹ä¸€å±‚æ˜¯ä¼ è¾“å±‚ï¼Œè¿™ä¸€å±‚ä¸€èˆ¬æ˜¯TCP/UDPåè®®ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpæœ‰å“ªäº›è¯·æ±‚æ–¹æ³•">HTTPæœ‰å“ªäº›è¯·æ±‚æ–¹æ³•ï¼Ÿ<a class="hash-link" href="#httpæœ‰å“ªäº›è¯·æ±‚æ–¹æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼šGETã€HEADã€POSTæ–¹æ³•ã€‚
HTTP1.1æ–°å¢äº†å…­ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONSã€PUTã€PATCHã€DELETEã€TRACEå’ŒCONNECTæ–¹æ³•ã€‚</p></blockquote><ul><li>GETï¼šè¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“ã€‚</li><li>HEADï¼šç±»ä¼¼GETè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´ã€‚</li><li>POSTï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œä¾‹å¦‚æäº¤è¡¨å•ã€‚</li><li>PUTï¼šé€šè¿‡è¯¥æ–¹æ³•å®¢æˆ·ç«¯å¯ä»¥å°†æŒ‡å®šèµ„æºçš„æœ€æ–°æ•°æ®ä¼ é€ç»™æœåŠ¡å™¨å–ä»£æŒ‡å®šèµ„æºçš„å†…å®¹ã€‚</li><li>DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„èµ„æºã€‚</li><li>CONNECTï¼šå½“æµè§ˆå™¨é…ç½®ä¸ºä½¿ç”¨ä»£ç†æœåŠ¡å™¨æ—¶æ‰ä¼šç”¨åˆ°CONNECTæ–¹æ³•ã€‚</li><li>OPTIONSï¼šç”¨äºæè¿°ç›®æ ‡èµ„æºçš„é€šä¿¡é€‰é¡¹ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•ã€‚</li><li>TRACEï¼šæ²¿ç€åˆ°ç›®æ ‡èµ„æºçš„è·¯å¾„æ‰§è¡Œä¸€ä¸ªæ¶ˆæ¯ç¯å›æµ‹è¯•ï¼Œå¯ç”¨äºdebugæµ‹è¯•ã€‚</li><li>PATCHï¼šå¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpæœ‰å“ªäº›å¸¸è§çš„è¯·æ±‚å¤´">HTTPæœ‰å“ªäº›å¸¸è§çš„è¯·æ±‚å¤´ï¼Ÿ<a class="hash-link" href="#httpæœ‰å“ªäº›å¸¸è§çš„è¯·æ±‚å¤´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>ä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„è¯·æ±‚å¤´ã€‚</p></blockquote><ul><li><p>Accept: æµè§ˆå™¨å¯ä»¥æ¥å—æœåŠ¡å™¨è¿”å›çš„ç±»å‹ã€‚</p></li><li><p>Accept-Encodingï¼šæµè§ˆå™¨ç”³æ˜è‡ªå·±èƒ½å¤Ÿå¤„ç†çš„å‹ç¼©æˆ–ç¼–ç æ–¹æ³•ã€‚</p></li><li><p>Accept-Languageï¼šç”¨äºæµè§ˆå™¨å£°æ˜è‡ªå·±æ¥æ”¶çš„è¯­è¨€ã€‚</p></li><li><p>Connection</p><ul><li>Connection: keep-alive å½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¸ä¼šå…³é—­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚å³TCPè¿æ¥çš„å¤ç”¨ã€‚</li><li>Connectionï¼šclose ä»£è¡¨ä¸€ä¸ªRequestå®Œæˆä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¼šå…³é—­ï¼Œå½“å®¢æˆ·ç«¯å†æ¬¡å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°å»ºç«‹TCPè¿æ¥ã€‚</li></ul></li><li><p>Host: å‘é€è¯·æ±‚æ—¶ï¼Œè¯¥æŠ¥å¤´åŸŸæ˜¯å¿…éœ€çš„ï¼Œä¸»è¦ç”¨äºæŒ‡å®šè¢«è¯·æ±‚èµ„æºçš„ä¸»æœºå’Œç«¯å£å·ã€‚</p></li><li><p>Refererï¼šè¿™ä¸ªå­—æ®µä¸»è¦æ˜¯å‘Šè¯‰æœåŠ¡å™¨ï¼Œè¯¥è¯·æ±‚æ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„ã€‚</p></li><li><p>User-Agentï¼šå‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨çš„åç§°å’Œç‰ˆæœ¬ã€‚</p></li><li><p>Cache-Control:</p><ul><li>privateï¼šå‘Šè¯‰æœåŠ¡å™¨å“åº”åªèƒ½ä½œä¸ºç§æœ‰ç¼“å­˜ï¼Œä¸èƒ½å†ç”¨æˆ·é—´å…±äº«ã€‚</li><li>publicï¼šå“åº”å¯ä»¥è¢«ç¼“å­˜å¹¶å†å¤šç”¨æˆ·é—´å…±äº«</li><li>no-cacheï¼šä½¿ç”¨åå•†ç¼“å­˜ã€‚</li><li>no-storeï¼šä¸ç¼“å­˜ã€‚</li></ul></li><li><p>cookieï¼šç”¨äºå­˜å‚¨ä¸€äº›ç”¨æˆ·ä¿¡æ¯ä»¥ä¾¿è®©æœåŠ¡å™¨è¾¨åˆ«ç”¨æˆ·èº«ä»½ï¼Œä¾‹å¦‚cookieä¸­å¯èƒ½ä¼šå­˜å‚¨ç”¨æˆ·çš„idå’Œå¯†ç ï¼Œå½“ç”¨æˆ·ç™»å½•åå°±ä¼šå†å®¢æˆ·ç«¯äº§ç”Ÿä¸€ä¸ªcookieæ¥å­˜å‚¨ç›¸å…³ä¿¡æ¯ï¼Œè¿™æ ·æµè§ˆå™¨é€šè¿‡è¯»å–cookieä¿¡æ¯å»æœåŠ¡å™¨ä¸ŠéªŒè¯å¹¶é€šè¿‡åå¯ä»¥è®¤å®šæ˜¯å¦æ˜¯åˆæ³•ç”¨æˆ·ã€‚</p></li><li><p>Rangeï¼šç”¨äºæ–­ç‚¹ç»­ä¼ ï¼Œå‘ŠçŸ¥æœåŠ¡å™¨è‡ªå·±æƒ³è¦è·å–å¯¹è±¡çš„å“ªä¸€éƒ¨åˆ†ã€‚</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpè¯·æ±‚ä½“çš„å†…å®¹">HTTPè¯·æ±‚ä½“çš„å†…å®¹<a class="hash-link" href="#httpè¯·æ±‚ä½“çš„å†…å®¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPçš„è¯·æ±‚ä½“ä¸€èˆ¬æœ‰ä¸‰ç§å½¢å¼ï¼Œä¾‹å¦‚ï¼š</p></blockquote><ul><li>application/json</li><li>text/xml</li><li>application/x-www-form-urlencoded</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpçš„æŠ¥æ–‡ç»“æ„">HTTPçš„æŠ¥æ–‡ç»“æ„<a class="hash-link" href="#httpçš„æŠ¥æ–‡ç»“æ„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPçš„æŠ¥æ–‡ç»“æ„åŒ…æ‹¬è¯·æ±‚æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„å’Œå“åº”æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è¯·æ±‚æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„">è¯·æ±‚æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„<a class="hash-link" href="#è¯·æ±‚æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>è¯·æ±‚è¡Œï¼šè¯·æ±‚æ–¹æ³• + è¯·æ±‚URL + HTTPç‰ˆæœ¬</li><li>è¯·æ±‚å¤´ï¼šå­—æ®µåå’Œå¯¹åº”çš„å€¼</li><li>ç©ºè¡Œï¼šè¯·æ±‚å¤´ä¹‹åæ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œä¸»è¦æ˜¯å‘ŠçŸ¥æœåŠ¡å™¨ä¸‹é¢ä¸åœ¨æœ‰è¯·æ±‚å¤´ã€‚</li><li>è¯·æ±‚ä½“ï¼šç”±ç”¨æˆ·è‡ªå®šä¹‰æ·»åŠ ï¼Œä¾‹å¦‚postæ–¹æ³•çš„bodyéƒ¨åˆ†ã€‚</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å“åº”æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„">å“åº”æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„<a class="hash-link" href="#å“åº”æŠ¥æ–‡çš„æŠ¥æ–‡ç»“æ„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>çŠ¶æ€è¡Œï¼š HTTPç‰ˆæœ¬ + çŠ¶æ€ç  + çŠ¶æ€æè¿°ç¬¦ï¼ˆOKï¼‰</li><li>å“åº”å¤´ï¼šå­—æ®µå + å¯¹åº”çš„å€¼</li><li>ç©ºè¡Œ</li><li>å“åº”ä½“</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯httpåŠ«æŒ">ä»€ä¹ˆæ˜¯HTTPåŠ«æŒï¼Ÿ<a class="hash-link" href="#ä»€ä¹ˆæ˜¯httpåŠ«æŒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>å½“ç”¨æˆ·çš„æµè§ˆå™¨å’Œç›®æ ‡æœåŠ¡å™¨å»ºç«‹è¿æ¥é€šé“åï¼Œå½“æµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚åï¼Œè¿è¥å•†çš„è·¯ç”±å™¨ä¼šé¦–å…ˆæ”¶åˆ°è¿™æ¬¡HTTPè¯·æ±‚ï¼Œä¹‹åè¿è¥å•†è·¯ç”±å™¨çš„æ—è·¯è®¾å¤‡ä¼šå°†æ­¤TCPè¿æ¥ä¸ºHTTPåè®®ï¼Œç„¶åæŠ¢åœ¨ç½‘ç«™æœåŠ¡å™¨è¿”å›æ•°æ®ä¹‹å‰å‘é€HTTPåè®®çš„302çŠ¶æ€ç è¿›è¡ŒåŠ«æŒï¼Œæµè§ˆå™¨ä»¥ä¸ºæ˜¯ä¸´æ—¶é‡å®šå‘ï¼Œä¾¿è·³è½¬åˆ°ç›®æ ‡URLä¸Šï¼Œæ—è·¯è®¾å¤‡å®Œæˆæ ‡è®°åä¼šè¿”å›ä¿®æ”¹åçš„HTMLä»£ç ï¼Œå¯¼è‡´æµè§ˆå™¨ä¸­è¢«æ’å…¥äº†è¿è¥å•†çš„å¹¿å‘Šï¼Œéšåç½‘ç«™æœåŠ¡å™¨çš„çœŸæ­£æ•°æ®ä¼šè¢«ä¸¢å¼ƒã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ƒhttp10å­˜åœ¨çš„é—®é¢˜">ä¸ƒã€HTTP1.0å­˜åœ¨çš„é—®é¢˜<a class="hash-link" href="#ä¸ƒhttp10å­˜åœ¨çš„é—®é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>HTTP1.0ä¸»è¦å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p></blockquote><ol><li>æ— æ³•å¤ç”¨è¿æ¥ï¼Œæ¯æ¬¡å‘é€è¯·æ±‚éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡TCPè¿æ¥ï¼Œè€ŒTCPçš„è¿æ¥é‡Šæ”¾è¿‡ç¨‹åˆæ˜¯æ¯”è¾ƒå¢åŠ å»¶æ—¶çš„ï¼Œè¿™æ ·ä¼šä½¿å¾—ç½‘ç»œå¸¦å®½çš„åˆ©ç”¨ç‡æ¯”è¾ƒä½ã€‚</li><li>å­˜åœ¨é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ï¼Œä¸€ä¸ªè¯·æ±‚å¿…é¡»åœ¨å‰ä¸€ä¸ªè¯·æ±‚å“åº”åˆ°è¾¾ä¹‹åæ‰èƒ½å‘é€ã€‚</li><li>ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡éƒ½ä¼šä¼ é€å…¨éƒ¨çš„é¡µé¢å’Œæ•°æ®ã€‚</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…«httpsåŠ å¯†åŸç†">å…«ã€HTTPSåŠ å¯†åŸç†<a class="hash-link" href="#å…«httpsåŠ å¯†åŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ºä»€ä¹ˆè¦æœ‰https">ä¸ºä»€ä¹ˆè¦æœ‰HTTPSï¼Ÿ<a class="hash-link" href="#ä¸ºä»€ä¹ˆè¦æœ‰https" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>ä¹‹æ‰€ä»¥è¦æœ‰HTTPSï¼Œæ˜¯å› ä¸ºHTTPåè®®æ˜¯ä¸€ç§ä¸å®‰å…¨çš„ä¼ è¾“åè®®ï¼ŒHTTPåœ¨ä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œå³ä½¿åœ¨å‰ç«¯é€šè¿‡ä¸€äº›åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†åï¼ŒæœåŠ¡ç«¯ä¹Ÿæ˜¯æ— æ³•ç›´æ¥è¿›è¡Œè§£å¯†çš„ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†">å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†<a class="hash-link" href="#å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPSè§£å†³æ•°æ®ä¼ è¾“å®‰å…¨é—®é¢˜çš„æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨åŠ å¯†ç®—æ³•ï¼Œå…·ä½“æ¥è¯´æ˜¯å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„æ··åˆä½¿ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆä»‹ç»ä¸‹è¿™ä¸¤ç§åŠ å¯†ç®—æ³•çš„ç‰¹ç‚¹ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¯¹ç§°åŠ å¯†">å¯¹ç§°åŠ å¯†<a class="hash-link" href="#å¯¹ç§°åŠ å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>å¯¹ç§°åŠ å¯†æŒ‡çš„æ˜¯åŠ å¯†å’Œè§£å¯†éƒ½ç”¨çš„åŒä¸€ä¸ªå¯†é’¥ï¼Œå¸¸ç”¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰DESï¼ŒAESç­‰ã€‚</p></blockquote><ul><li>ä¼˜ç‚¹ï¼šç®—æ³•å…¬å¼€ï¼Œè®¡ç®—é‡å°ã€åŠ å¯†é€Ÿåº¦å¿«ã€åŠ å¯†æ•ˆç‡é«˜ã€é€‚åˆå¯¹æ¯”è¾ƒå¤§çš„æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚</li><li>ç¼ºç‚¹ï¼šç”±äºäº¤æ˜“åŒæ–¹ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¯†é’¥ï¼Œæ‰€ä»¥æ— æ³•é¿å…å¯†é’¥çš„ä¼ è¾“ï¼Œå¯†é’¥åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æˆªè·ï¼Œç”¨æˆ·æ¯æ¬¡ä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œéƒ½éœ€è¦ä½¿ç”¨å…¶ä»–äººä¸çŸ¥é“çš„å”¯ä¸€å¯†é’¥ï¼Œè¿™ä¼šä½¿å¾—åŒæ–¹æ‰€æ‹¥æœ‰çš„çš„é’¥åŒ™æ•°é‡æ€¥å‰§å¢é•¿ï¼Œå¯†é’¥ç®¡ç†æ›´åŠ å›°éš¾ã€‚</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="éå¯¹ç§°åŠ å¯†">éå¯¹ç§°åŠ å¯†<a class="hash-link" href="#éå¯¹ç§°åŠ å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>éå¯¹ç§°åŠ å¯†å°±æ˜¯åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼šå…¬é’¥å’Œç§é’¥ã€‚å…¶ä¸­å…¬é’¥å’Œç§é’¥æ˜¯ä¸€å †ï¼Œå¦‚æœä½¿ç”¨å…¬é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ç§é’¥æ‰èƒ½è¿›è¡Œè§£å¯†ã€‚å¦‚æœä½¿ç”¨ç§é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé‚£ä¹ˆåªæœ‰ä½¿ç”¨å¯¹åº”çš„å…¬é’¥æ‰èƒ½è¿›è¡Œè§£å¯†ã€‚éå¯¹ç§°åŠ å¯†ç®—æ³•å®ç°ä¿¡æ¯äº¤æ¢çš„åŸºæœ¬è¿‡ç¨‹æ˜¯ï¼šå®¢æˆ·ç«¯æ‹¿åˆ°æœåŠ¡å™¨çš„å…¬é’¥åï¼Œä¼šç”Ÿæˆä¸€ä¸ªéšæœºKEYï¼Œç„¶åä½¿ç”¨å…¬é’¥æŠŠè¿™ä¸ªKEYè¿›è¡ŒåŠ å¯†ç„¶åå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ç§é’¥å°†å…¶è§£å¯†ï¼Œè¿™æ ·åŒæ–¹éƒ½æ‹¥æœ‰äº†åŒä¸€ä¸ªå¯†é’¥KEYï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªKEYè¿›è¡Œå¯¹ç§°åŠ å¯†äº¤äº’æ•°æ®ï¼ŒåŒæ—¶é¿å…äº†KEYä¼ è¾“è¢«æ‹¦æˆªçš„æƒ…å†µï¼Œä¹Ÿå°±ä¿è¯äº†åŠ å¯†æ•°æ®çš„å®‰å…¨ã€‚</p></blockquote><ul><li>ä¼˜ç‚¹ï¼šç®—æ³•å…¬å¼€ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„æ˜¯ä¸åŒçš„é’¥åŒ™ï¼Œç§é’¥ä¸éœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ï¼Œå®‰å…¨æ€§å¾ˆé«˜ã€‚</li><li>ç¼ºç‚¹ï¼šè®¡ç®—é‡æ¯”è¾ƒå¤§ï¼ŒåŠ å¯†å’Œè§£å¯†é€Ÿåº¦ç›¸æ¯”å¯¹ç§°æœºå¯†æ…¢å¾ˆå¤šã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpå’Œhttpsä¹‹é—´çš„å…³ç³»">HTTPå’ŒHTTPSä¹‹é—´çš„å…³ç³»<a class="hash-link" href="#httpå’Œhttpsä¹‹é—´çš„å…³ç³»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>HTTPS = HTTP + SSL/TLS</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpsçš„åŠ å¯†æµç¨‹">HTTPSçš„åŠ å¯†æµç¨‹<a class="hash-link" href="#httpsçš„åŠ å¯†æµç¨‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPSçš„æ•´ä¸ªé€šä¿¡è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤å¤§é˜¶æ®µï¼Œä¸€æ˜¯è¯ä¹¦éªŒè¯é˜¶æ®µï¼ŒäºŒæ˜¯æ•°æ®ä¼ è¾“é˜¶æ®µï¼Œå…¶ä¸­æ•°æ®ä¼ è¾“é˜¶æ®µåˆå¯ä»¥åˆ†ä¸ºéå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†ä¸¤ä¸ªé˜¶æ®µã€‚</p></blockquote><ol><li>å®¢æˆ·ç«¯è¯·æ±‚HTTPSçš„ç½‘å€ï¼Œç„¶åè¿æ¥åˆ°æœåŠ¡å™¨çš„443ç«¯å£ã€‚ï¼ˆHTTPSé»˜è®¤çš„ç«¯å£æ˜¯443ï¼ŒHTTPé»˜è®¤çš„ç«¯å£æ˜¯80ï¼‰ã€‚</li><li>é‡‡ç”¨HTTPSåè®®çš„æœåŠ¡å™¨å¿…é¡»è¦æœ‰ä¸€å¥—ç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„é¢å‘çš„CAè¯ä¹¦ï¼Œé¢å‘è¯ä¹¦çš„åŒæ—¶ä¼šäº§ç”Ÿä¸€ä¸ªç§é’¥å’Œå…¬é’¥ï¼Œç§é’¥æ˜¯ç”±æœåŠ¡ç«¯ä¿å­˜çš„ï¼Œä¸å¯æ³„éœ²ï¼Œå…¬é’¥åˆ™æ˜¯é™„å¸¦åœ¨è¯ä¹¦çš„ä¿¡æ¯ä¸­ï¼Œå¯ä»¥å…¬å¼€çš„ã€‚è¯ä¹¦æœ¬èº«ä¹Ÿå¸¦æœ‰ä¸€ä¸ªè¯ä¹¦ç”µå­ç­¾åï¼Œè¿™ä¸ªç­¾åæ˜¯ç”¨æ¥éªŒè¯è¯ä¹¦çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ï¼Œå¯ä»¥é˜²æ­¢è¯ä¹¦è¢«ç¯¡æ”¹ã€‚</li><li>æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå°†è¯ä¹¦ä¼ é€’ç»™å®¢æˆ·ç«¯ï¼Œè¯ä¹¦ä¸­åŒ…å«å…¬é’¥å’Œå¤§é‡å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚è¯ä¹¦é¢å‘æœºæ„ä¿¡æ¯ã€å…¬å¸ä¿¡æ¯å’Œè¯ä¹¦æœ‰æ•ˆæœŸç­‰ï¼Œé€šè¿‡chromeæµè§ˆå™¨ç‚¹å‡»åœ°å€æ çš„é”æ ‡å¿—å¯ä»¥æŸ¥çœ‹è¯ä¹¦çš„è¯¦ç»†ä¿¡æ¯ã€‚</li><li>å®¢æˆ·ç«¯è§£æè¯ä¹¦å¹¶å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å‘çš„ï¼Œæˆ–è€…è¯ä¹¦ä¸­çš„åŸŸåå’Œå®é™…åŸŸåä¸ä¸€è‡´ï¼Œæˆ–è€…è¯ä¹¦è¿‡æœŸï¼Œå°±ä¼šå¯¹è®¿é—®è€…æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œå¦‚æœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œå®¢æˆ·ç«¯å°±ä¼šä»æœåŠ¡å™¨è¯ä¹¦ä¸­å–å‡ºæœåŠ¡å™¨çš„å…¬é’¥Aï¼Œç„¶åå®¢æˆ·ç«¯è¿˜ä¼šç”Ÿæˆä¸€ä¸ªéšæœºç KEYï¼Œå¹¶ä½¿ç”¨å…¬é’¥Aå°†å…¶åŠ å¯†ã€‚</li><li>å®¢æˆ·ç«¯æŠŠåŠ å¯†åçš„éšæœºç KEYå‘é€ç»™æœåŠ¡å™¨ï¼Œä½œä¸ºåé¢å¯¹ç§°åŠ å¯†çš„å¯†é’¥ã€‚</li><li>æœåŠ¡å™¨åœ¨æ”¶åˆ°å¯†æ–‡åï¼Œä¼šé€šè¿‡ç§é’¥è§£æå‡ºéšæœºç KEYã€‚</li><li>æœåŠ¡å™¨ä½¿ç”¨ä¸Šè¿°æ­¥éª¤è·å–åˆ°çš„KEYï¼Œå¯¹æ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯†å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„KEYå¯¹æ•°æ®è¿›è¡Œè§£å¯†ã€‚</li><li>ç„¶ååŒæ–¹ä½¿ç”¨å¯¹ç§°åŠ å¯†ä¼ è¾“å®Œæ‰€æœ‰æ•°æ®ã€‚</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpå’Œhttpsçš„åŒºåˆ«">HTTPå’ŒHTTPSçš„åŒºåˆ«<a class="hash-link" href="#httpå’Œhttpsçš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å®‰å…¨æ€§ä¸åŒã€‚HTTPæ˜æ–‡ä¼ è¾“ï¼Œä¸å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†å®‰å…¨æ€§è¾ƒå·®ï¼ŒHTTPSçš„æ•°æ®ä¼ è¾“è¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œå®‰å…¨æ€§è¾ƒå¥½ã€‚</li><li>æ˜¯å¦éœ€è¦ç”³è¯·CAè¯ä¹¦ã€‚HTTPSåè®®éœ€è¦ç”³è¯·è¯ä¹¦ï¼ŒHTTPåè®®ä¸éœ€è¦ã€‚</li><li>é¡µé¢å“åº”é€Ÿåº¦ä¸åŒã€‚HTTPé¡µé¢å“åº”é€Ÿåº¦æ¯”HTTPSå¿«ï¼Œå› ä¸ºHTTPSå¤šäº†ä¸€å±‚åŠ å¯†å±‚ï¼Œæ‰€ä»¥ä¼šå½±å“é€Ÿåº¦ã€‚HTTPåè®®ä½¿ç”¨TCPä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤æ¢éœ€è¦ä¸‰ä¸ªåŒ…ï¼Œè€ŒHTTPSé™¤äº†TCPçš„ä¸‰ä¸ªåŒ…ä¹‹å¤–ï¼Œè¿˜è¦åŠ ä¸Šsslçš„ä¹ä¸ªåŒ…ã€‚</li><li>ç«¯å£ä¸åŒã€‚HTTPé»˜è®¤çš„æ˜¯80ç«¯å£ï¼ŒHTTPSé»˜è®¤çš„æ˜¯443ç«¯å£ã€‚</li><li>æ¶ˆè€—æœåŠ¡å™¨èµ„æºä¸åŒã€‚HTTPSæ˜¯æ„å»ºåœ¨SSL/TLSä¹‹ä¸Šçš„HTTPåè®®ï¼Œæ‰€ä»¥æ›´åŠ æ¶ˆè€—æœåŠ¡å™¨çš„èµ„æºã€‚</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpsçš„ç¼ºç‚¹">HTTPSçš„ç¼ºç‚¹<a class="hash-link" href="#httpsçš„ç¼ºç‚¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>HTTPSåè®®æ¡æ‰‹é˜¶æ®µæ¯”è¾ƒè´¹æ—¶ï¼Œä¼šä½¿é¡µé¢çš„åŠ è½½æ—¶é—´å»¶é•¿50%ï¼Œå¢åŠ 10%åˆ°20%çš„è€—ç”µã€‚</li><li>SSLè¯ä¹¦éœ€è¦ä¸€å®šçš„è´¹ç”¨ï¼ŒåŠŸèƒ½è¶Šå¼ºå¤§çš„è¯ä¹¦è´¹ç”¨è¾ƒé«˜ã€‚</li><li>HTTPSéœ€è¦è¾ƒé«˜çš„æœåŠ¡å™¨èµ„æºï¼Œä¼šå¯¼è‡´æˆæœ¬ä¸Šå‡ã€‚</li><li>HTTPSåè®®çš„åŠ å¯†èŒƒå›´æ¯”è¾ƒæœ‰é™ï¼ŒæŸäº›å›½å®¶å¦‚æœèƒ½å¤Ÿæ§åˆ¶CAæ ¹è¯ä¹¦çš„æƒ…å†µä¸‹ï¼Œä¸­é—´äººæ”»å‡»ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tlså·¥ä½œåŸç†åŠè¯¦ç»†æ¡æ‰‹è¿‡ç¨‹">TLSå·¥ä½œåŸç†åŠè¯¦ç»†æ¡æ‰‹è¿‡ç¨‹<a class="hash-link" href="#tlså·¥ä½œåŸç†åŠè¯¦ç»†æ¡æ‰‹è¿‡ç¨‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>HTTPSç›¸æ¯”äºHTTPæœ€å¤§çš„ä¸åŒå°±æ˜¯å¤šäº†ä¸€å±‚SSLæˆ–TLSï¼ŒSSLå’ŒTLSåè®®å¯ä»¥ä¸ºé€šä¿¡åŒæ–¹æä¾›è¯†åˆ«å’Œè®¤è¯é€šé“ï¼Œä»è€Œä¿è¯äº†é€šä¿¡çš„æœºå¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§ï¼Œä¸è¿‡ç›®å‰SSLé€æ¸è¢«TLSåè®®å–ä»£ï¼Œå› æ­¤ä¸‹æ–‡ä¸»è¦å¯¹TLSè¿›è¡Œä»‹ç»ã€‚TLSæ¡æ‰‹æ˜¯å¯åŠ¨HTTPSé€šä¿¡çš„è¿‡ç¨‹ï¼Œç±»ä¼¼äºTCPå»ºç«‹è¿æ¥æ—¶çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œåœ¨TLSæ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼Œé€šä¿¡åŒæ–¹äº¤æ¢æ¶ˆæ¯ä»¥ç›¸äº’éªŒè¯ï¼Œç›¸äº’ç¡®è®¤ï¼Œå¹¶ç¡®ç«‹å®ƒä»¬æ‰€ä½¿ç”¨çš„åŠ å¯†ç®—æ³•ä»¥åŠç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œæ‰€ä»¥TLSæ¡æ‰‹æ—¶HTTPSé€šä¿¡çš„åŸºç¡€éƒ¨åˆ†ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tlsæ¡æ‰‹çš„ä¸»è¦ç›®çš„">TLSæ¡æ‰‹çš„ä¸»è¦ç›®çš„<a class="hash-link" href="#tlsæ¡æ‰‹çš„ä¸»è¦ç›®çš„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ol><li>åå•†åŒæ–¹é€šä¿¡æ‰€ä½¿ç”¨çš„TLSç‰ˆæœ¬ï¼ˆä¾‹å¦‚TLS1.0è¿˜æ˜¯1.2ï¼‰ã€‚</li><li>ç¡®å®šåŒæ–¹è¦ä½¿ç”¨çš„å¯†ç ç»„åˆã€‚</li><li>å®¢æˆ·ç«¯é€šè¿‡æœåŠ¡å™¨çš„å…¬é’¥å’Œæ•°å­—è¯ä¹¦ä¸Šçš„æ•°å­—ç­¾åéªŒè¯æœåŠ¡ç«¯çš„èº«ä»½ã€‚</li><li>ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œè¯¥å¯†é’¥å°†ç”¨äºæ¡æ‰‹ç»“æŸåçš„å¯¹ç§°åŠ å¯†ã€‚</li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tlsæ¡æ‰‹çš„è¯¦ç»†è¿‡ç¨‹é‡çœ‹-rsa-12-13">TLSæ¡æ‰‹çš„è¯¦ç»†è¿‡ç¨‹(é‡çœ‹ RSA 1.2 1.3)<a class="hash-link" href="#tlsæ¡æ‰‹çš„è¯¦ç»†è¿‡ç¨‹é‡çœ‹-rsa-12-13" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>ä¸åŒçš„å¯†é’¥äº¤æ¢ç®—æ³•ï¼ŒTLSçš„æ¡æ‰‹è¿‡ç¨‹æœ‰ä¸€äº›åŒºåˆ«ï¼Œå½“å‰TLSæ¡æ‰‹æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯RSAç‰ˆæœ¬ã€TLS1.2å’ŒTLS1.3ã€‚</p></blockquote><blockquote><p>ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸‹RSAç‰ˆçš„TLSæ¡æ‰‹ã€‚ä¼ ç»Ÿçš„TLSæ¡æ‰‹åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨RSAç®—æ³•æ¥å®ç°å¯†é’¥äº¤æ¢çš„ã€‚ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹RSAç‰ˆçš„TLSçš„æ¯ä¸€æ¬¡æ¡æ‰‹è¿›è¡Œä»‹ç»ã€‚</p></blockquote><ul><li><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯é¦–å…ˆä¼šå‘é€ä¸€ä¸ªClient Helloæ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¸­åŒ…å«äº†å®¢æˆ·ç«¯ä½¿ç”¨TLSç‰ˆæœ¬å·ï¼Œæ”¯æŒçš„å¯†ç å¥—ä»¶åˆ—è¡¨ï¼Œä»¥åŠå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œè¿™ä¸ªéšæœºæ•°ä¼šè¢«æœåŠ¡å™¨ç«¯ä¿ç•™ï¼Œæ˜¯ç”Ÿæˆå¯¹ç§°åŠ å¯†å¯†é’¥çš„å‚æ•°ä¹‹ä¸€ã€‚</p></li><li><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„Client Helloæ¶ˆæ¯åï¼Œä¼šç¡®è®¤TLSç‰ˆæœ¬å·æ˜¯å¦æ”¯æŒï¼Œç„¶åä»å®¢æˆ·ç«¯æ”¯æŒçš„å¯†ç å¥—ä»¶åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå¯†ç å¥—ä»¶ï¼Œç„¶åç”ŸæˆæœåŠ¡ç«¯éšæœºæ•°ï¼Œç„¶åè¿”å›Server Helloæ¶ˆæ¯ï¼Œæ¶ˆæ¯é‡Œé¢åŒ…å«äº†æœåŠ¡å™¨é€‰æ‹©çš„TLSç‰ˆæœ¬å·ï¼Œå’ŒæœåŠ¡ç«¯éšæœºæ•°ï¼Œå’ŒæœåŠ¡ç«¯é€‰æ‹©çš„å¯†ç å¥—ä»¶ï¼ŒåŒæ—¶æœåŠ¡ç«¯è¿˜ä¼šå°†è‡ªå·±çš„æ•°å­—è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ã€‚ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½ä¼šå„è‡ªç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œå¹¶ä¸”ä¼šæŠŠéšæœºæ•°ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™ä¸¤ä¸ªéšæœºæ•°æ˜¯ä½œä¸ºåç»­ç”Ÿæˆä¼šè¯å¯†é’¥çš„æ¡ä»¶ï¼‰</p></li><li><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯éªŒè¯å®ŒæœåŠ¡ç«¯çš„è¯ä¹¦åï¼Œå¦‚æœè¯¥è¯ä¹¦æ˜¯å¯ä¿¡è¯ä¹¦çš„è¯ï¼Œå®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸€ä¸ªéšæœºæ•°pre-masterï¼ˆé¢„ä¸»å¯†é’¥ï¼‰,ç„¶åç”¨æœåŠ¡å™¨çš„RSAå…¬é’¥åŠ å¯†è¯¥éšæœºæ•°ï¼ˆRSAå…¬é’¥æ˜¯ä»æœåŠ¡ç«¯å‘è¿‡æ¥çš„æ•°å­—è¯ä¹¦ä¸­æå–çš„ï¼‰ï¼Œç„¶åä¼ é€’ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯æ”¶åˆ°åï¼Œä¼šç”¨RSAç§é’¥è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°å®¢æˆ·ç«¯å‘è¿‡æ¥çš„éšæœºæ•°pre-masterï¼Œè‡³æ­¤ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å‡æ‹¥æœ‰äº†ä¸‰ä¸ªéšæœºæ•°ï¼Œåˆ†åˆ«æ˜¯Client Randomã€Server Randomã€pre-masterï¼ŒåŒæ–¹ä¼šæ ¹æ®è¿™ä¸‰ä¸ªéšæœºæ•°ï¼Œç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œå®ƒæ˜¯å¯¹ç§°å¯†é’¥ï¼Œç”¨äºå¯¹åç»­çš„HTTPè¯·æ±‚å’Œå“åº”æ•°æ®çš„åŠ å¯†å’Œè§£å¯†ï¼Œç”Ÿæˆå®Œä¼šè¯å¯†é’¥ä¹‹åï¼Œå®¢æˆ·ç«¯ä¼šå‘é€ä¸€ä¸ªå¯†ç ç­–ç•¥å·²ç»æ”¹å˜çš„æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼Œå‘Šè¯‰æœåŠ¡ç«¯å¼€å§‹ä½¿ç”¨åŠ å¯†æ–¹å¼å‘é€æ¶ˆæ¯ï¼Œç„¶åå®¢æˆ·ç«¯è¿˜ä¼šå‘é€ä¸€ä¸ªæ¶ˆæ¯æŠŠä¹‹å‰æ‰€æœ‰å‘é€çš„æ•°æ®åšä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†ä¸€ä¸‹ï¼Œè®©æœåŠ¡å™¨åšä¸ªéªŒè¯ï¼Œä»¥éªŒè¯ä¹‹å‰çš„æ¡æ‰‹ä¿¡æ¯æœ‰æ²¡æœ‰è¢«ä¸­é€”ç¯¡æ”¹è¿‡ã€‚</p></li><li><p>ç¬¬å››æ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨ä¹Ÿä¼šè¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œå‘é€ä¸€ä¸ªå¯†ç ç­–ç•¥å·²ç»æ”¹å˜çš„æŠ¥æ–‡ï¼Œç„¶åä¹Ÿä¼šæŠŠä¹‹å‰æ‰€æœ‰å‘é€çš„æ•°æ®åšä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†ä¹‹åï¼Œè®©å®¢æˆ·ç«¯åšä¸€ä¸ªéªŒè¯ï¼Œå¦‚æœåŒæ–¹éƒ½éªŒè¯åŠ å¯†å’Œè§£å¯†æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆæ¡æ‰‹æ­£å¼å®Œæˆï¼Œä¹‹åå°±ä¼šä½¿ç”¨ä¼šè¯å¯†é’¥æ¥åŠ è§£å¯†HTTPè¯·æ±‚å’Œå“åº”äº†ã€‚</p></li></ul><blockquote><p>RSAç®—æ³•çš„ç¼ºé™·</p></blockquote><blockquote><p>ä½¿ç”¨RSAå¯†é’¥åå•†ç®—æ³•çš„æœ€å¤§é—®é¢˜æ˜¯ä¸æ”¯æŒå‰å‘ä¿å¯†ï¼Œä¸€æ—¦æœåŠ¡ç«¯çš„ç§é’¥æ³„éœ²äº†ï¼Œè¿‡å»ç¬¬ä¸‰æ–¹æˆªè·çš„æ‰€æœ‰TLSé€šè®¯å¯†æ–‡éƒ½ä¼šè¢«ç ´è§£ï¼Œäºæ˜¯æœ‰äº†åŸºäºECDHEç®—æ³•çš„TLS1.2,ä¸‹é¢ç®€è¦ä»‹ç»ä¸‹TLS1.2çš„æ¡æ‰‹è¿‡ç¨‹ã€‚</p></blockquote><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€Client Helloï¼Œè¿™ä¸ªæ¶ˆæ¯åŒ…å«äº†å®¢æˆ·ç«¯æ”¯æŒçš„TLSç‰ˆæœ¬å·ï¼Œæ”¯æŒçš„å¯†ç å¥—ä»¶åˆ—è¡¨ä»¥åŠå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°åï¼Œä¼šç«‹å³è¿”å›ä¸€ä¸ªæœåŠ¡ç«¯éšæœºæ•°ï¼Œä¸æœåŠ¡ç«¯é€‰æ‹©çš„å¯†ç å¥—ä»¶å’ŒåŒ…å«å…¬é’¥çš„æ•°å­—è¯ä¹¦ï¼Œç„¶åæœåŠ¡å™¨å°†åˆ©ç”¨ç§é’¥å°†å®¢æˆ·ç«¯éšæœºæ•°ã€æœåŠ¡ç«¯éšæœºæ•°ã€å’ŒæœåŠ¡ç«¯DHå‚æ•°è¿›è¡Œç­¾åï¼Œç”ŸæˆæœåŠ¡å™¨ç­¾åç„¶åå‘é€ç»™å®¢æˆ·ç«¯ï¼ŒåŒæ—¶å‘é€è¿™ä¸ªæœåŠ¡ç«¯DHå‚æ•°ã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šæµè§ˆå™¨ä¼šå…ˆéªŒè¯æ•°å­—è¯ä¹¦å’ŒæœåŠ¡å™¨ç­¾åï¼Œé€šè¿‡åå°†å®¢æˆ·ç«¯çš„DHå‚æ•°ä¼ é€’ç»™æœåŠ¡å™¨ã€‚æ¥ç€å®¢æˆ·ç«¯é€šè¿‡ECDHEç®—æ³•ï¼Œåˆ©ç”¨å®¢æˆ·ç«¯DHå‚æ•°å’ŒæœåŠ¡ç«¯DHå‚æ•°è®¡ç®—å‡ºé¢„ä¸»å¯†é’¥ï¼Œæœ‰äº†é¢„ä¸»å¯†é’¥ã€å®¢æˆ·ç«¯éšæœºæ•°å’ŒæœåŠ¡ç«¯éšæœºæ•°ï¼Œå®¢æˆ·ç«¯åˆ©ç”¨è¿™ä¸‰ä¸ªè®¡ç®—å‡ºå¯¹ç§°åŠ å¯†çš„ä¸»å¯†é’¥ã€‚</li><li>ç¬¬å››æ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯ä¹Ÿä½¿ç”¨ECDHEç®—æ³•ç”Ÿæˆé¢„ä¸»å¯†é’¥ï¼Œç„¶åç”¨ç›¸åŒçš„æ–¹æ³•ç”Ÿæˆä¸»å¯†é’¥ã€‚å½“åŒæ–¹éƒ½éªŒè¯é€šè¿‡ä¹‹åï¼Œæ¡æ‰‹æ­£å¼ç»“æŸï¼Œåé¢å¼€å§‹æ­£å¸¸æ”¶å‘åŠ å¯†çš„HTTPè¯·æ±‚å’Œå“åº”äº†ã€‚</li></ul><blockquote><p>RSAå’ŒECDHEæ¡æ‰‹è¿‡ç¨‹çš„åŒºåˆ«</p></blockquote><ul><li>RSAå¯†é’¥åå•†ç®—æ³•ä¸æ”¯æŒå‰å‘ä¿å¯†ï¼ŒECDHEå¯†é’¥åå•†ç®—æ³•ä¸æ”¯æŒå‰å‘ä¿å¯†ã€‚</li><li>ä½¿ç”¨äº†RSAå¯†é’¥åå•†çš„ç®—æ³•ï¼ŒTLSå®Œæˆå››æ¬¡æ¡æ‰‹ä¹‹åï¼Œæ‰èƒ½è¿›è¡Œåº”ç”¨æ•°æ®çš„ä¼ è¾“ï¼Œè€Œå¯¹äºECDHEç®—æ³•ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ç”¨ç­‰æœåŠ¡ç«¯çš„æœ€åä¸€æ¬¡TLSæ¡æ‰‹ï¼Œå°±å¯ä»¥æå‰å‘å‡ºåŠ å¯†çš„HTTPæ•°æ®ï¼ŒèŠ‚çœäº†ä¸€ä¸ªæ¶ˆæ¯çš„å¾€è¿”æ—¶é—´ã€‚</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…«ç»¼åˆæ€§é¢è¯•é¢˜">å…«ã€ç»¼åˆæ€§é¢è¯•é¢˜<a class="hash-link" href="#å…«ç»¼åˆæ€§é¢è¯•é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpsä¸ºä»€ä¹ˆæ—¢æœ‰å¯¹ç§°åŠ å¯†ä¹Ÿæœ‰éå¯¹ç§°åŠ å¯†">HTTPSä¸ºä»€ä¹ˆæ—¢æœ‰å¯¹ç§°åŠ å¯†ä¹Ÿæœ‰éå¯¹ç§°åŠ å¯†ï¼Ÿ<a class="hash-link" href="#httpsä¸ºä»€ä¹ˆæ—¢æœ‰å¯¹ç§°åŠ å¯†ä¹Ÿæœ‰éå¯¹ç§°åŠ å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>å¯¹ç§°åŠ å¯†çš„åŠ è§£å¯†ä½¿ç”¨çš„æ˜¯ç”¨ä¸€ä¸ªå¯†é’¥ï¼Œç”±äºäº¤æ˜“åŒæ–¹ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¯†é’¥ï¼Œæ— æ³•é¿å…å¯†é’¥çš„ä¼ è¾“ï¼Œå¯†é’¥åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æˆªè·ï¼Œä½†æ˜¯å¯¹ç§°åŠ å¯†çš„è®¡ç®—é‡è¾ƒå°ï¼ŒåŠ å¯†é€Ÿåº¦å¿«ï¼ŒåŠ å¯†æ•ˆç‡é«˜ã€‚éå¯¹ç§°åŠ å¯†é‡‡ç”¨çš„æ˜¯å…¬ç§é’¥çš„æ–¹å¼ï¼Œç§é’¥ä¸åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œä½†æ˜¯è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œæ•ˆç‡ä¸é«˜ã€‚æ‰€ä»¥HTTPSåˆ©ç”¨è¿™ä¸¤è€…çš„ä¼˜åŠ¿ï¼Œå°†ä¸¤ç§æ–¹å¼ç»“åˆèµ·æ¥ï¼Œåœ¨äº¤æ¢å¯†é’¥é˜¶æ®µä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹å¼ï¼Œä¹‹åå»ºç«‹é€šä¿¡åï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹å¼ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§">å®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼Ÿ<a class="hash-link" href="#å®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>ä¸€ä¸ªæ•°å­—è¯ä¹¦é€šå¸¸åŒ…å«äº†å…¬é’¥ã€æŒæœ‰è€…ä¿¡æ¯ã€è¯ä¹¦è®¤è¯æœºæ„CAçš„ä¿¡æ¯ã€CAå¯¹è¿™ä»½æ–‡ä»¶çš„æ•°å­—ç­¾åå’Œä½¿ç”¨çš„ç®—æ³•ä»¥åŠè¯ä¹¦çš„æœ‰æ•ˆæœŸã€‚æ•°å­—è¯ä¹¦çš„ä½œç”¨å°±æ˜¯ç”¨æ¥è®¤è¯å…¬é’¥æŒæœ‰è€…çš„èº«ä»½ï¼Œä»¥é˜²æ­¢ç¬¬ä¸‰æ–¹è¿›è¡Œå†’å……ï¼Œè¿™ä¸ªåˆ™è¡Œæ•°æ˜¯ç”±CAè¯ä¹¦è®¤è¯æœºæ„ç­¾åçš„ï¼Œè¿™ä¸ªCAè¯ä¹¦è®¤è¯æœºæ„æ˜¯ç½‘ç»œä¸–ç•Œçš„è®¤è¯ä¸­å¿ƒï¼Œå…·æœ‰æé«˜çš„å¯ä¿¡åº¦ï¼Œæ‰€ä»¥ç”±ä»–ç­¾å‘çš„è¯ä¹¦æ˜¯å¯é çš„ã€‚ä¹‹æ‰€ä»¥è¦ç­¾åæ˜¯ä¸ºä¾‹é˜²æ­¢ä¸­é—´äººå¯¹è¯ä¹¦è¿›è¡Œç¯¡æ”¹ã€‚</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="caç­¾å‘è¯ä¹¦çš„è¿‡ç¨‹">CAç­¾å‘è¯ä¹¦çš„è¿‡ç¨‹<a class="hash-link" href="#caç­¾å‘è¯ä¹¦çš„è¿‡ç¨‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>é¦–å…ˆCAä¼šæŠŠæŒæœ‰è€…çš„å…¬é’¥ã€ç”¨é€”ã€é¢å‘è€…ã€æœ‰æ•ˆæ—¶é—´ç­‰è¿›è¡Œä¸€ä¸ªæ‰“åŒ…ï¼Œç„¶åè¿›è¡ŒHashè®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªHashå€¼ã€‚</li><li>ç„¶åCAä¼šä½¿ç”¨è‡ªå·±çš„ç§é’¥å°†è¯¥Hashå€¼è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆä¸€ä¸ªè¯ä¹¦ç­¾åã€‚</li><li>å°†è¯ä¹¦ç­¾åæ·»åŠ åˆ°æ–‡ä»¶è¯ä¹¦ä¸Šï¼Œå½¢æˆæ•°å­—è¯ä¹¦ã€‚</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯æ•°å­—è¯ä¹¦çš„è¿‡ç¨‹">å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯æ•°å­—è¯ä¹¦çš„è¿‡ç¨‹<a class="hash-link" href="#å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯æ•°å­—è¯ä¹¦çš„è¿‡ç¨‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>å®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„å“ˆå¸Œç®—æ³•è·å–è¯¥è¯ä¹¦çš„å“ˆå¸Œå€¼ã€‚</li><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨æˆ·çš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿä¸­é›†æˆäº†CAçš„å…¬é’¥ä¿¡æ¯ï¼Œæµè§ˆå™¨æ”¶åˆ°è¯ä¹¦ä¹‹åå¯ä»¥ä½¿ç”¨CAçš„å…¬é’¥è§£å¯†æ•°å­—ç­¾åå¾—åˆ°å¦ä¸€ä¸ªå“ˆå¸Œå€¼ã€‚</li><li>æµè§ˆå™¨æ¯”è¾ƒä¸¤ä¸ªå“ˆå¸Œå€¼ï¼Œå¦‚æœå€¼ç›¸åŒï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªè¯ä¹¦æ˜¯å¯ä¿¡çš„ï¼Œåä¹‹è®¤å®šè¯ä¹¦ä¸å¯ä¿¡ã€‚</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="httpså¦‚ä½•é˜²æ­¢ä¸­é—´äººæ”»å‡»">HTTPSå¦‚ä½•é˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼Ÿ<a class="hash-link" href="#httpså¦‚ä½•é˜²æ­¢ä¸­é—´äººæ”»å‡»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><blockquote><p>å…³äºHTTPSé˜²æ­¢ä¸­é—´äººæ”»å‡»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦ä»ä¸Šæ–‡ä¸­çš„å®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§æ¥å›ç­”å³å¯ã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®<a class="hash-link" href="#å‚è€ƒæ–‡çŒ®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹åšä¸»çš„æ–‡ç« æ”¯æŒï¼</p></blockquote><ul><li><p><a href="https://segmentfault.com/a/1190000021494676" target="_blank" rel="noopener noreferrer">HTTPS è¯¦è§£ä¸€ï¼šé™„å¸¦æœ€ç²¾ç¾è¯¦å°½çš„ HTTPS åŸç†å›¾</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/344086342" target="_blank" rel="noopener noreferrer">å›¾è§£ HTTPSï¼šRSA æ¡æ‰‹è¿‡ç¨‹</a></p></li><li><p><a href="https://www.cnblogs.com/xiaolincoding/p/14318338.html" target="_blank" rel="noopener noreferrer">å›¾è§£ ECDHE å¯†é’¥äº¤æ¢ç®—æ³•</a></p></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/http">HTTP</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/Egg.jsä¸­é—´ä»¶çš„æ ¸å¿ƒç”¨æ³•">Egg.jsä¸­é—´ä»¶çš„æ ¸å¿ƒç”¨æ³•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-10-30T00:00:00.000Z" itemprop="datePublished">2021å¹´10æœˆ30æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 5 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€åœ¨åº”ç”¨ä¸­ä½¿ç”¨ä¸­é—´ä»¶">ä¸€ã€åœ¨åº”ç”¨ä¸­ä½¿ç”¨ä¸­é—´ä»¶<a class="hash-link" href="#ä¸€åœ¨åº”ç”¨ä¸­ä½¿ç”¨ä¸­é—´ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>åœ¨app/middlewareæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªauth2.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">option</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹é¢çš„è¿™ä¸ªè¯­å¥å¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Œçº¿ç¨‹æ‰§è¡Œåˆ°è¿™é‡Œå°±è¦ç»ˆæ­¢äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ³¨å†Œä¸­é—´ä»¶</li></ol><blockquote><p>åœ¨config.default.jsä¸­è¿›è¡Œæ³¨å†Œã€‚</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;auth2&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>ç»™ä¸­é—´ä»¶ä¼ å‚</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;auth2&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>ä¸­é—´ä»¶è¯»å–ä¼ è¿‡æ¥çš„å‚æ•°</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹é¢çš„è¿™ä¸ªè¯­å¥å¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Œçº¿ç¨‹æ‰§è¡Œåˆ°è¿™é‡Œå°±è¦ç»ˆæ­¢äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒåœ¨routerjsä¸­ä½¿ç”¨ä¸­é—´ä»¶">äºŒã€åœ¨router.jsä¸­ä½¿ç”¨ä¸­é—´ä»¶<a class="hash-link" href="#äºŒåœ¨routerjsä¸­ä½¿ç”¨ä¸­é—´ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>æœ¬èŠ‚çš„ç›®æ ‡æ˜¯ç»™æŒ‡å®šè·¯ç”±é…ç½®ä¸­é—´ä»¶ã€‚ä¸‹é¢çš„è¿™ç§æ–¹å¼ï¼Œä¸éœ€è¦å†config.default.jsä¸­æ³¨å†Œè·¯ç”±äº†ã€‚</p></blockquote><ol><li>å®šä¹‰ä¸­é—´ä»¶çš„æ–¹å¼å’Œä¸Šæ–‡çš„å®šä¹‰æ–¹å¼ä¸€è‡´ã€‚</li><li>åœ¨router.jsä¸­è·å–ä¸­é—´ä»¶ï¼Œå¹¶æŒ‡å®šå“ªäº›è·¯ç”±èƒ½å¤Ÿè§¦å‘ã€‚</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">app</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> router</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> auth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">home</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">setSession</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/deletecookie&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">home</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">deletecookie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸‰eggjsä¸­ä½¿ç”¨koaçš„ä¸­é—´ä»¶">ä¸‰ã€Egg.jsä¸­ä½¿ç”¨KOAçš„ä¸­é—´ä»¶<a class="hash-link" href="#ä¸‰eggjsä¸­ä½¿ç”¨koaçš„ä¸­é—´ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>ä¸‹æ–‡æˆ‘ä»¬ä»¥eggä¸­ä½¿ç”¨koa-jsonpè¿™ä¸ªä¸­é—´ä»¶ä¸ºä¾‹è¿›è¡Œç³»ç»Ÿæ€§é˜è¿°ã€‚</p></blockquote><ol><li>å®‰è£…koa-jsonp</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> koa-jsonp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨app/middlewareä¸­æ–°å»ºä¸€ä¸ªjsonp.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// é…ç½®KOAçš„ä¸­é—´ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> jsonp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;koa-jsonp&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jsonp</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>æ³¨å†Œä¸­é—´ä»¶(åœ¨config.default.js)</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;jsonp&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>è¯·æ±‚æŒ‡å®šè·¯å¾„</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">http</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">127.0</span><span class="token number" style="color:#36acaa">.0</span><span class="token number" style="color:#36acaa">.1</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7001</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">shop</span><span class="token operator" style="color:#393A34">?</span><span class="token plain">callback</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">666</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/825fdeccb69c8329c5a327bae582a113.png" alt="image.png" class="img_ev3q"></p><blockquote><p>ä¸‹æ–‡ç»§ç»­è®²ä¸€ä¸ªkoa-compressçš„ä¸­é—´ä»¶ï¼Œè¿™ä¸ªä¸­é—´ä»¶èƒ½å¤Ÿå¼€å¯æœåŠ¡å™¨Gzipå‹ç¼©çš„åŠŸèƒ½ã€‚</p></blockquote><ol><li>å®‰è£…koa-compress</li></ol><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install koa-compress</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨app/middlewareä¸‹æ–°å»ºä¸€ä¸ªcompress.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;koa-compress&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>æ³¨å†Œä¸­é—´ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;jsonp&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;compress&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>é…ç½®ä¸­é—´ä»¶çš„å‚æ•°</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">compress</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">threshold</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®å‹ç¼©é—¨é™å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ­¤æ—¶è®¿é—®æŒ‡å®šé¡µé¢çš„æ–‡ä»¶éƒ½æ˜¯ç»è¿‡å‹ç¼©çš„æ–‡ä»¶äº†ã€‚</p></blockquote><blockquote><p>å¦‚æœæ˜¯éæ ‡å‡†çš„ä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶çš„å®šä¹‰æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹é¢æ¼”ç¤ºéæ ‡å‡†ä¸­é—´ä»¶çš„ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> middleWare </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">option</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">middleWare</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">options2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å››ä¸­é—´ä»¶çš„é€šç”¨é…ç½®">å››ã€ä¸­é—´ä»¶çš„é€šç”¨é…ç½®<a class="hash-link" href="#å››ä¸­é—´ä»¶çš„é€šç”¨é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>æ— è®ºæ˜¯å¼•ç”¨å±‚åŠ è½½çš„ä¸­é—´ä»¶è¿˜æ˜¯æ¡†æ¶å†å¸¦çš„ä¸­é—´ä»¶ï¼Œéƒ½æ”¯æŒä¸‹é¢ä¸‰ä¸ªé€šç”¨çš„é…ç½®é¡¹ã€‚</p></blockquote><ol><li>enableï¼šæ§åˆ¶ä¸­é—´ä»¶æ˜¯å¦å¼€å¯ã€‚</li><li>matchï¼šè®¾ç½®åªæœ‰ç¬¦åˆæŸäº›è§„åˆ™çš„è¯·æ±‚æ‰ä¼šç»è¿‡è¿™ä¸ªä¸­é—´ä»¶ã€‚</li><li>ignoreï¼šè®¾ç½®ç¬¦åˆæŸäº›è§„åˆ™çš„è¯·æ±‚ä¸ç»è¿‡è¿™ä¸ªä¸­é—´ä»¶ã€‚</li></ol><ul><li>ç¦ç”¨æŸä¸ªä¸­é—´ä»¶</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">compress</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">enable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">threshold</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®å‹ç¼©é—¨é™å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è®¾ç½®è®©æŸä¸ªè·¯ç”±èƒ½åŒ¹é…ä¸­é—´ä»¶</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">match</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;auth ä½ å¥½&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>å¦‚æœæƒ³å¿½ç•¥æŸä¸ªè·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å†™æ³•</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">ignore</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;auth ä½ å¥½&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>å¦‚æœè¦å¤„ç†çš„è·¯ç”±æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„matchæ–¹æ³•</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">match</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/shop&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/news&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;auth ä½ å¥½&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äº”è®¾ç½®æœªç»æˆæƒçš„ç”¨æˆ·æ— æ³•è®¿é—®æŒ‡å®šé¡µé¢">äº”ã€è®¾ç½®æœªç»æˆæƒçš„ç”¨æˆ·æ— æ³•è®¿é—®æŒ‡å®šé¡µé¢<a class="hash-link" href="#äº”è®¾ç½®æœªç»æˆæƒçš„ç”¨æˆ·æ— æ³•è®¿é—®æŒ‡å®šé¡µé¢" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>åœ¨app/middleware/ ä¸‹åˆ›å»ºæŒ‡å®šä¸­é—´ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">option</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userinfo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">redirect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ³¨å†Œä¸­é—´ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;auth&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;compress&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;adminAuth&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>è®©æŒ‡å®šè·¯å¾„çš„è·¯ç”±è§¦å‘ä¸­é—´ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">adminAuth</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">match</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/admin/user&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/egg-js">Egg.js</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/Egg.jsä¸­ä½¿ç”¨extendã€Cookieã€Sessionçš„åŸºæœ¬æ–¹å¼">Egg.jsä¸­ä½¿ç”¨extendã€Cookieã€Sessionçš„åŸºæœ¬æ–¹å¼</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-10-29T00:00:00.000Z" itemprop="datePublished">2021å¹´10æœˆ29æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 7 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Justin</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€åˆå§‹åŒ–">ä¸€ã€åˆå§‹åŒ–<a class="hash-link" href="#ä¸€åˆå§‹åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>é¡¹ç›®åˆå§‹åŒ–</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">egg</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">init spider </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">simple</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>å®‰è£…ä¾èµ–</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>è¿è¡Œæµ‹è¯•é¡¹ç›®</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>é…ç½®æ¨¡æ¿å¼•æ“</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i egg-view-ejs </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>æ‰¾åˆ°app/config/plugin.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ejs</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">enable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">package</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;egg-view-ejs&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>æ‰¾åˆ°app/config/config.default.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">mapping</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&#x27;.html&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ejs&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>é…ç½®å…¬å…±çš„URLåœ°å€ï¼ˆconfig/config.default.jsï¼‰</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">api</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://www.phonegap100.com/&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äºŒæŠ“å–æ–°é—»æ¥å£å®ç°æ–°é—»åˆ—è¡¨ä¸è¯¦æƒ…">äºŒã€æŠ“å–æ–°é—»æ¥å£å®ç°æ–°é—»åˆ—è¡¨ä¸è¯¦æƒ…<a class="hash-link" href="#äºŒæŠ“å–æ–°é—»æ¥å£å®ç°æ–°é—»åˆ—è¡¨ä¸è¯¦æƒ…" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>å®šä¹‰æ–°é—»åˆ—è¡¨å’Œæ–°é—»è¯¦æƒ…è·¯ç”±</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/newscontent&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨serviceä¸­è·å–æ–°é—»åˆ—è¡¨çš„æ•°æ®å’Œæ–°é—»è¯¦æƒ…çš„æ•°æ®</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> list </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getNewsList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> aid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">aid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> detail </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">news</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getNewsContent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;newscontent&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">detail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">detail</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>è®°ä½ï¼šæ¸²æŸ“çš„æ—¶å€™ï¼Œä¸€å®šè¦ä½¿ç”¨awaitï¼Œå› ä¸ºè¿™æ˜¯å¼‚æ­¥æ¸²æŸ“ï¼Œä¸ç„¶å¯èƒ½ä¼šæŠ¥404é”™è¯¯ã€‚</p></blockquote><ol start="3"><li>åœ¨viewè§†å›¾å±‚ä¸­å®šä¹‰æ¨¡æ¿å¼•æ“</li></ol><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">æ–°é—»åˆ—è¡¨</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;%for (let i = 0; i &lt; list.length; i++) {%&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/newscontent?aid=&lt;%=list[i].aid%&gt;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">&lt;%=list[i].title%&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;%}%&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸‰eggjsæ¡†æ¶æ‹“å±•extend">ä¸‰ã€Egg.jsæ¡†æ¶æ‹“å±•extend<a class="hash-link" href="#ä¸‰eggjsæ¡†æ¶æ‹“å±•extend" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é€šè¿‡application">é€šè¿‡Application<a class="hash-link" href="#é€šè¿‡application" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åœ¨appæ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶å¤¹extend</li><li>åœ¨extendæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸€ä¸ªapplication.jsï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æš´éœ²çš„å‡½æ•°ï¼Œå‡å¯ä»¥é€šè¿‡this.app.xxxæ¥è¿›è¡Œè°ƒç”¨,ä½†æ˜¯åœ¨application.jså†…éƒ¨thiså°±æ˜¯appã€‚</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">param</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this å°±æ˜¯ app å¯¹è±¡ï¼Œåœ¨å…¶ä¸­å¯ä»¥è°ƒç”¨ app ä¸Šçš„å…¶ä»–æ–¹æ³•ï¼Œæˆ–è®¿é—®å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é€šè¿‡context">é€šè¿‡Context<a class="hash-link" href="#é€šè¿‡context" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åœ¨extendæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºcontext.js</li><li>åœ¨context.jsä¸­å®šä¹‰æƒ³è¦æ‹“å±•çš„å‡½æ•°</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getHost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">param</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this å°±æ˜¯ ctx å¯¹è±¡ï¼Œåœ¨å…¶ä¸­å¯ä»¥è°ƒç”¨ ctx ä¸Šçš„å…¶ä»–æ–¹æ³•ï¼Œæˆ–è®¿é—®å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">host</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>è°ƒç”¨æ‹“å±•çš„å‡½æ•°</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getHost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ›´å¤šå…¶ä»–çš„æ‹“å±•æ–¹å¼è¯·è®¿é—®å®˜ç½‘ï¼š<a href="https://eggjs.org/zh-cn/basics/extend.html#context" target="_blank" rel="noopener noreferrer">Eggæ‹“å±•</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é€šè¿‡æ‹“å±•çš„å½¢å¼å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´å­—ç¬¦ä¸²">é€šè¿‡æ‹“å±•çš„å½¢å¼å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´å­—ç¬¦ä¸²<a class="hash-link" href="#é€šè¿‡æ‹“å±•çš„å½¢å¼å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´å­—ç¬¦ä¸²" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å®‰è£…ç›¸å…³æ¨¡å—å¹¶å¼•å…¥</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;silly-datetime&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">formatTime</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">param</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this æ˜¯ helper å¯¹è±¡ï¼Œåœ¨å…¶ä¸­å¯ä»¥è°ƒç”¨å…¶ä»– helper æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this.ctx =&gt; context å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this.app =&gt; application å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> sd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">param</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;YYYY-MM-DD HH:mm&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨æ¨¡æ¿å¼•æ“ä¸­ä½¿ç”¨</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%=</span><span class="token plain">helper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">formatTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">list</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dateline</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨</li></ol><blockquote><p>é€šè¿‡this.ctx.helper.xxx()</p></blockquote><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">helper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendHello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é€šè¿‡request">é€šè¿‡Request<a class="hash-link" href="#é€šè¿‡request" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åœ¨extendæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºrequest.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨æ§åˆ¶å™¨ä¸­è°ƒç”¨</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å››ç¦æ­¢æŒ‡å®šipçš„è®¿é—®">å››ã€ç¦æ­¢æŒ‡å®šIPçš„è®¿é—®<a class="hash-link" href="#å››ç¦æ­¢æŒ‡å®šipçš„è®¿é—®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="eggè°ƒç”¨ä¸­é—´ä»¶çš„æ—¶æœº">Eggè°ƒç”¨ä¸­é—´ä»¶çš„æ—¶æœº<a class="hash-link" href="#eggè°ƒç”¨ä¸­é—´ä»¶çš„æ—¶æœº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>åŒ¹é…è·¯ç”±å‰æˆ–åŒ¹é…è·¯ç”±å®Œæˆæ—¶ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸­é—´ä»¶çš„å®šä¹‰ä¸é…ç½®ä¼ å€¼">ä¸­é—´ä»¶çš„å®šä¹‰ä¸é…ç½®ã€ä¼ å€¼<a class="hash-link" href="#ä¸­é—´ä»¶çš„å®šä¹‰ä¸é…ç½®ä¼ å€¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åœ¨appæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹middlewareæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ä¸‹é¢æ–°å»ºä¸€ä¸ªprintdate.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">options</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// è¿”å›ä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨config/config.default.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;printdate&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">printdate</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">aaa</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;123&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç¦æ­¢æŒ‡å®šipè®¿é—®">ç¦æ­¢æŒ‡å®šipè®¿é—®<a class="hash-link" href="#ç¦æ­¢æŒ‡å®šipè®¿é—®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åœ¨app/middlewareä¸­æ–°å»ºä¸€ä¸ªforbidip.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">options</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// è¿”å›ä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¦å±è”½çš„IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> forbidIp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è·å–å®¢æˆ·ç«¯çš„ip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> forbidIp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">403</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;æ‚¨çš„IPå·²ç»è¢«å±è”½&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨config/config.default.jsä¸­æ³¨å†Œè¿™ä¸ªä¸­é—´ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">middleware</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;printdate&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;forbidip&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äº”postæäº¤æ•°æ®å¹¶é€šè¿‡ä¸­é—´ä»¶é…ç½®csrf">äº”ã€POSTæäº¤æ•°æ®å¹¶é€šè¿‡ä¸­é—´ä»¶é…ç½®CSRF<a class="hash-link" href="#äº”postæäº¤æ•°æ®å¹¶é€šè¿‡ä¸­é—´ä»¶é…ç½®csrf" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æ¨¡æ¿å¼•æ“ä¸­å®šä¹‰å¥½csrf</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">form action</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/add?_csrf=&lt;%=csrf%&gt;&quot;</span><span class="token plain"> method</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ç”¨æˆ·åï¼š</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">input type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">br</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">br</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¯†ç ï¼š</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">input type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">br</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">br</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;submit&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">æäº¤</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">form</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨app/middlewareä¸‹åˆ›å»ºä¸€ä¸ªauth.js</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">option</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®æ¨¡æ¿å…¨å±€å˜é‡ï¼Œä¹‹æ‰€ä»¥è¦è¿™æ ·åšï¼Œæ˜¯ä¸ºäº†è®©æ¨¡æ¿å¼•æ“èƒ½å¤Ÿç›´æ¥è·å–åˆ°csrfï¼Œè€Œä¸ç”¨æ¯æ¬¡éƒ½ä¼ é€’csrf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">csrf</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">csrf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…­eggjsä¸­ä½¿ç”¨cookie">å…­ã€Egg.jsä¸­ä½¿ç”¨Cookie<a class="hash-link" href="#å…­eggjsä¸­ä½¿ç”¨cookie" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>è®¾ç½®cookieçš„æ–¹æ³•</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;zhangsan&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>è·å–cookieçš„æ–¹æ³•</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>ä¸‹é¢ä»‹ç»ä¸‹ï¼Œå¦‚ä½•åœ¨ä¸€ä¸ªæ§åˆ¶å™¨ä¸­è®¾ç½®cookieï¼Œåœ¨å¦ä¸€ä¸ªæ§åˆ¶å™¨ä¸­è·å–cookie</p></blockquote><ul><li>è®¾ç½®cookieçš„æ§åˆ¶å™¨</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ctx </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;zhangsan&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this.ctx.csrf : ç”¨æˆ·è®¿é—®è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªå¯†é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;home&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è·å–cookieçš„æ§åˆ¶å™¨</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>è®¾ç½®cookieçš„ç¼“å­˜æœ‰æ•ˆæ—¶é•¿</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;zhangsan&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">maxAge</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">3600</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">24</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>è®¾ç½®å‚æ•°</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;zhangsan&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">maxAge</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">3600</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">httpOnly</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">signed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">//å¯¹cookieè¿›è¡Œç­¾åï¼Œé˜²æ­¢ç”¨æˆ·ä¿®æ”¹cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">encrypt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœå¯¹cookieè¿›è¡ŒåŠ å¯†ï¼Œè·å–çš„æ—¶å€™éœ€è¦è§£å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>æ¸…é™¤cookie</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="eggjsä¸­ä½¿ç”¨seesion">Egg.jsä¸­ä½¿ç”¨Seesion<a class="hash-link" href="#eggjsä¸­ä½¿ç”¨seesion" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>cookieæ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¸Šï¼Œè€ŒSessionåˆ™æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨å¹¶å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šåˆ›å»ºä¸€ä¸ªsessionå¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªç±»ä¼¼ä¸key,valueçš„é”®å€¼å¯¹ï¼Œç„¶åå°†key(cookie)è¿”å›åˆ°æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¸‹æ¬¡å†è®¿é—®çš„æ—¶å€™ï¼Œæºå¸¦key(cookie)ï¼Œæ‰¾åˆ°å¯¹åº”çš„session(value)ã€‚æµè§ˆå™¨é¦–æ¬¡è®¿é—®ç›®æ ‡æœåŠ¡å™¨çš„æ—¶å€™ï¼Œç›®æ ‡æœåŠ¡å™¨çš„å“åº”å¤´ä¸­ä¼šåŒ…å«ä¸€ä¸ªset-cookieå­—æ®µï¼Œæµè§ˆå™¨ç¬¬äºŒæ¬¡è®¿é—®å°†æºå¸¦cookieè¿›è¡Œè®¿é—®ã€‚</p></blockquote><ol><li>åœ¨æ§åˆ¶å™¨ä¸­è®¾ç½®session</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">username</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ä½™æ³¢&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨æ§åˆ¶å™¨ä¸­è·å–session</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ‹¿åˆ°sessionï¼Œå¹¶æ¸²æŸ“åˆ°newsé¡µé¢ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;news&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>è®¾ç½®sessionçš„è¿‡æœŸæ—¶é—´ï¼ˆä¹Ÿå¯ä»¥åœ¨configä¸­é…ç½®sessionï¼‰</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">maxAge</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>åœ¨config.default.jsä¸­é…ç½®session</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">maxAge</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/egg-js">Egg.js</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="åšæ–‡åˆ—è¡¨åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/page/13"><div class="pagination-nav__label">è¾ƒæ–°çš„åšæ–‡</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/15"><div class="pagination-nav__label">è¾ƒæ—§çš„åšæ–‡</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 7Wate, Inc. Built with <a href="https://www.docusaurus.cn/" target="_blank" rel="noopener noreferrer">Docusaurus</a>.<br>Powered by <a href="https://webify.cloudbase.net/" target="_blank" rel="noopener noreferrer">CloudBase Webify</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.aee0b871.js"></script>
<script src="/assets/js/main.ac892ace.js"></script>
</body>
</html>