<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="Webpack面试题系统梳理（完美应对90%场景）, Faith&amp;Passion"><meta name="description" content=""><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Webpack面试题系统梳理（完美应对90%场景） | Faith&amp;Passion</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 5.4.2"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"> <a href="/" class="waves-effect waves-light"><img src="/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">Faith&amp;Passion</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags/" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories/" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives/" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about/" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends/" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"> <img src="/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">Faith&amp;Passion</div><div class="logo-desc"> Never really desperate, only the lost of the soul.</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags/" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories/" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives/" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about/" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/friends/" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li><div class="divider"></div></li><li><a href="https://jiapy.blog.csdn.net/" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style> <a href="https://jiapy.blog.csdn.net/" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/18.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">Webpack面试题系统梳理（完美应对90%场景）</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"> <a href="/tags/Webpack/"><span class="chip bg-color">Webpack</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Webpack/" class="post-category">Webpack</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2021-12-07</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 3k</div></div></div><hr class="clearfix"><link rel="stylesheet" href="/libs/prism/prism.css"><div class="card-content article-card-content"><div id="articleContent"><h2 id="一、什么是Webpack？"><a href="#一、什么是Webpack？" class="headerlink" title="一、什么是Webpack？"></a>一、什么是Webpack？</h2><blockquote><p>webpack是用于现代JavaScript应用程序的静态模块打包工具。webpack会分析我们的项目结构，找到JavaScript模块以及其他的一些浏览器不能直接运行的拓展语言（例如Sass、TypeScript等）,并将其打包为合适的格式供浏览器使用。</p></blockquote><h2 id="二、为什么需要Webpack"><a href="#二、为什么需要Webpack" class="headerlink" title="二、为什么需要Webpack?"></a>二、为什么需要Webpack?</h2><blockquote><p>如今在开发前端项目时，为了简化开发的复杂程度，引入了模块化、TypeScript、less、sass等CSS预处理器实践方法，但是使用它们开发的文件需要进行额外的处理才能被浏览器识别，webpack的出现就是为了解决这个需求的。</p></blockquote><h2 id="三、Webpack的使用场景"><a href="#三、Webpack的使用场景" class="headerlink" title="三、Webpack的使用场景"></a>三、Webpack的使用场景</h2><ol><li>根据模板生成HTML，并自动处理css/js引用路径。</li><li>自动处理img里面的图片路径，字体引用等。</li><li>开启本地服务器，实现修改代码即热更新的功能。</li><li>编译jsx、es6、sass、less等并添加sourcemap等辅助。</li><li>异步加载内容，不需要时不加载到DOM。</li><li>配合Vue.js、react.js等框架的开发。</li></ol><h2 id="四、Webpack的构建流程"><a href="#四、Webpack的构建流程" class="headerlink" title="四、Webpack的构建流程"></a>四、Webpack的构建流程</h2><ol><li>初始化参数：从配置文件和shell语句中读取与合并参数，得出最终的参数。</li><li>开始编译：用上一步得到的参数初始化Compiler对象，加载所有配置的插件，执行对象的run方法开始执行编译。</li><li>确定入口：根据配置中的entry找到所有的入口文件。</li><li>编译模块：从入口文件出发，调用所有配置的Loader对模块进行翻译，再找出改模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理。</li><li>完成模块编译：在经过第四步使用Loader翻译完所有模块后，得到了每个模块翻译后的最终内容以及它们之间的依赖关系。</li><li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的Chunk,再把每个chunk转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会。</li><li>输出完成：在确定好输出内容之后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统中。</li></ol><h2 id="五、Loader和Plugins的区别"><a href="#五、Loader和Plugins的区别" class="headerlink" title="五、Loader和Plugins的区别"></a>五、Loader和Plugins的区别</h2><ol><li>用法不同</li></ol><blockquote><p>loader是一个转换器，将A文件编译成B文件，比如将A.less转换为A.css，单纯的文件转换过程。webpack将一切文件视为模块，但是webpack原生只能解析JS文件，如果想将其他文件也打包的话，就会用到loader。plugin是一个扩展器，它丰富了webpack本身，会监听webpack打包过程中的某些节点，在合适的时机通过Webpack提供的API改变输出的结果。比如HtmlWebpackPlugin是用来生成一个HTML文件的。</p></blockquote><ol start="2"><li>运行时机不同</li></ol><blockquote><p>loader运行在打包文件之前，plugins则在整个编译周期都起作用。</p></blockquote><h2 id="六、常用的Loader与plugins"><a href="#六、常用的Loader与plugins" class="headerlink" title="六、常用的Loader与plugins"></a>六、常用的Loader与plugins</h2><h3 id="常用Loader及其作用"><a href="#常用Loader及其作用" class="headerlink" title="常用Loader及其作用"></a>常用Loader及其作用</h3><ol><li>style-loader</li></ol><blockquote><p>用于将css编译后的样式，挂载到页面的style标签上。</p></blockquote><ol start="2"><li>css-loader</li></ol><blockquote><p>用于识别.css文件，处理css必须配合style-loader共同使用，只安装css-loader样式不会生效。</p></blockquote><ol start="3"><li>sass-loader</li></ol><blockquote><p>css预处理器，sass的特点是编写css更加便捷。</p></blockquote><ol start="4"><li>postcss-loader</li></ol><blockquote><p>用于补充css样式各种浏览器内核前缀，可以实现更好的兼容性。</p></blockquote><ol start="5"><li>babel-loader</li></ol><blockquote><p>用于将ES6及以上的语法转换为ES5语法。</p></blockquote><ol start="6"><li>ts-loader</li></ol><blockquote><p>用于配置项目TypeScript。</p></blockquote><ol start="7"><li>html-loader</li></ol><blockquote><p>如果有时候需要引入一个html页面代码片段赋值给DOM元素内容使用，这时就用到html-loader。</p></blockquote><ol start="8"><li>file-loader</li></ol><blockquote><p>用于处理文件类型资源，如jpg,png等图片。</p></blockquote><ol start="9"><li>url-loader</li></ol><blockquote><p>url-loader也是处理图片类型资源，这个与file-loader的不同之处是，url-loader可以根据图片大小进行不同的操作，如果图片大小大于指定的大小则将图片进行打包，反之则将其转换为base64字符串合并到js文件中。</p></blockquote><ol start="10"><li>html-withimg-loader</li></ol><blockquote><p>我们在编译图片时，都是使用file-loader和url-loader，这两个loader都是查找js文件中的相关图片资源的，但是HTML文件中的图片不会进行打包，因此，要想实现打包就要使用html-withimg-loader。</p></blockquote><ol start="11"><li>vue-loader</li></ol><blockquote><p>用于编译.vue文件，如果我们自己搭建vue项目就可以使用vue-loader。</p></blockquote><ol start="12"><li>eslint-loader</li></ol><blockquote><p>用于检查代码是否符合规范，是否存在语法错误。</p></blockquote><h3 id="常用Plugins及其作用"><a href="#常用Plugins及其作用" class="headerlink" title="常用Plugins及其作用"></a>常用Plugins及其作用</h3><ol><li>html-webpack-plugin</li></ol><blockquote><p>可以根据模板自动生成html代码，并自动引用css和js文件。</p></blockquote><ol start="2"><li>extract-text-webpack-plugin</li></ol><blockquote><p>将js文件中引用的样式单独抽离成css文件。</p></blockquote><ol start="3"><li>HotModuleReplacementPlugin</li></ol><blockquote><p>热更新插件。</p></blockquote><ol start="4"><li>optimize-css-assets-webpack-plugin</li></ol><blockquote><p>不同组件中重复的css可以快速去重，压缩CSS代码的。</p></blockquote><ol start="5"><li>compression-webpack-plugin</li></ol><blockquote><p>生产环境下可以采用gzip压缩JS和CSS文件。</p></blockquote><ol start="6"><li>clean-webpack-plugin</li></ol><blockquote><p>清理每次打包下没有使用的文件。</p></blockquote><ol start="7"><li>mini-css-extract-plugin</li></ol><blockquote><p>是一个专门用于将打包的CSS内容提取到单独文件的插件。</p></blockquote><h2 id="七、Webpack生产环境和开发环境的区别"><a href="#七、Webpack生产环境和开发环境的区别" class="headerlink" title="七、Webpack生产环境和开发环境的区别"></a>七、Webpack生产环境和开发环境的区别</h2><blockquote><p>开发环境和生产环境的需求不同。</p></blockquote><blockquote><p>开发环境的需求</p></blockquote><ul><li>模块热更新</li><li>sourceMap</li><li>接口代理</li><li>代码规范检查</li><li>dev server</li></ul><blockquote><p>生产环境的需求</p></blockquote><ul><li>提取公共代码</li><li>压缩混淆</li><li>文件压缩</li><li>去除无用的代码</li><li>改善加载时间</li></ul><h2 id="八、如何提高打包速度，减少打包体积？"><a href="#八、如何提高打包速度，减少打包体积？" class="headerlink" title="八、如何提高打包速度，减少打包体积？"></a>八、如何提高打包速度，减少打包体积？</h2><h3 id="第一步：对打包的速度和体积进行分析"><a href="#第一步：对打包的速度和体积进行分析" class="headerlink" title="第一步：对打包的速度和体积进行分析"></a>第一步：对打包的速度和体积进行分析</h3><ol><li>使用speed-measure-webpack-plugin来进行速度分析，分析整个打包的总耗时，查看每个loader和plugin的耗时情况。</li><li>采用webpack-bundle-analyzer进行体积分析，主要分析依赖的第三方库的文件大小和业务代码里的组件大小。</li></ol><h3 id="第二步：提高Webpack打包速度"><a href="#第二步：提高Webpack打包速度" class="headerlink" title="第二步：提高Webpack打包速度"></a>第二步：提高Webpack打包速度</h3><h4 id="一、-确定影响打包速度的因素"><a href="#一、-确定影响打包速度的因素" class="headerlink" title="一、 确定影响打包速度的因素"></a>一、 确定影响打包速度的因素</h4><ol><li>开始打包时，首先需要搜索所有的依赖项，这需要占用一定的时间即搜索时间，所以我们要优化<code>搜索时间</code>。</li><li>webpack会根据我们配置的loader解析相应的文件，所以我们需要优化这个<code>解析时间</code>。</li><li>webpack会将所有依赖的模块打包到一个文件中，其中JS压缩时发布编译的最后阶段，JS压缩时需要先将代码转换为抽象语法树，然后处理这个抽象语法树最后还原成JS，这个过程涉及到大量计算，因此我们需要对这个<code>压缩时间</code>进行优化。</li><li>当更改项目中的一个文件，需要重新进行打包，但是很多没有更改的文件也需要重新打包，因此我们需要对<code>二次打包的时间</code>进行优化。</li></ol><h4 id="二、-优化解析时间"><a href="#二、-优化解析时间" class="headerlink" title="二、 优化解析时间"></a>二、 优化解析时间</h4><blockquote><p>运行在Node.js上的webpack是单线程模式的，因此在打包大量文件时，就会比较漫长。</p></blockquote><ol><li>使用thread-loader并行解析资源，只需要把这个loader放置在其他loader之前，就会开启多进程处理。</li><li>在webpack的构建过程中，大多数时间消耗在loader的解析转换上，可以利用happyPack使用多进程对文件进行打包，对多核CPU利用率更高，HappyPack可以让Webpack同一时间处理多个任务，将任务分解给多个子进程去并发的执行，子进程处理完后，再把结果发送给主进程。</li></ol><h4 id="三、-合理利用缓存"><a href="#三、-合理利用缓存" class="headerlink" title="三、 合理利用缓存"></a>三、 合理利用缓存</h4><ol><li>在性能开销较大的loader之前添加cache-loader，将会显著提升二次构建的速度。</li><li>使用DLLPlugin将第三方模块单独打包生成一个文件，因为一般情况下，第三方模块的代码是不会轻易改变的。这样只有第一次打包的时候去分析这个文件里的代码，再次打包的时候回使用上次已经打包过的代码。</li></ol><h4 id="四、-优化压缩时间"><a href="#四、-优化压缩时间" class="headerlink" title="四、 优化压缩时间"></a>四、 优化压缩时间</h4><blockquote><p>webpack4默认内置使用terser-webpack-plugin来压缩优化代码，同时terser可以启动多进程并行运行来提高压缩的速度。</p></blockquote><h4 id="五、-优化搜索时间"><a href="#五、-优化搜索时间" class="headerlink" title="五、 优化搜索时间"></a>五、 优化搜索时间</h4><blockquote><p>我们在使用Loader的时候可以通过test、include、exclude三个配置项来优化Loader的文件搜索范围。比如说将node_modules给排除掉，因为node_modules中使用的代码都是经过编译过的。</p></blockquote><h3 id="第三步：减少Webpack的打包体积"><a href="#第三步：减少Webpack的打包体积" class="headerlink" title="第三步：减少Webpack的打包体积"></a>第三步：减少Webpack的打包体积</h3><h4 id="一、-按需加载"><a href="#一、-按需加载" class="headerlink" title="一、 按需加载"></a>一、 按需加载</h4><blockquote><p>在开发项目时，避免引入不需要的代码，尽可能的进行按需加载。</p></blockquote><h4 id="二、Scope-Hoisting"><a href="#二、Scope-Hoisting" class="headerlink" title="二、Scope Hoisting"></a>二、Scope Hoisting</h4><blockquote><p>Scope Hoisting会分析出模块之间的依赖关系，尽可能的把打包出来的模块合并到一个函数中。</p></blockquote><h4 id="三、Tree-Shaking"><a href="#三、Tree-Shaking" class="headerlink" title="三、Tree Shaking"></a>三、Tree Shaking</h4><blockquote><p>利用Tree Shaking可以实现删除项目中共未被引用的代码。</p></blockquote><h2 id="九、-实现Loader和Plugin"><a href="#九、-实现Loader和Plugin" class="headerlink" title="九、 实现Loader和Plugin"></a>九、 实现Loader和Plugin</h2><h3 id="实现Loader"><a href="#实现Loader" class="headerlink" title="实现Loader"></a>实现Loader</h3><blockquote><p>Loader的本质是一个函数，这个函数会接收一个参数，这个参数是待匹配文件的源码，函数会返回处理后的源码。</p></blockquote><blockquote><p>下面我们写一个Loader，将var关键字替换为let</p></blockquote><pre class="line-numbers language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">var</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'let'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>调用这个Loader只需在webpack.config.js中使用下面的方法</p></blockquote><pre class="line-numbers language-js" data-language="js"><code class="language-js">module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./src/myLoader.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实现Plugin"><a href="#实现Plugin" class="headerlink" title="实现Plugin"></a>实现Plugin</h3><blockquote><p>一个Webpack Plugin包含以下五个部分。</p></blockquote><ol><li>一个JavaScript命名函数。</li><li>在函数的prototype上有一个apply方法。</li><li>有一个绑定到webpack自身的事件钩子。</li><li>处理webpack内部实例的特定数据。</li><li>功能完成后调用webpack提供的回调。</li></ol><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

myPlugin<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">apply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 功能完成后调用webpack提供的回调</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello Webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> myPlugin<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>如何调用我们手写的插件呢？</p></blockquote><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> myPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/myPlugin.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Plugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="十、-Webpack热更新的原理（HMR）"><a href="#十、-Webpack热更新的原理（HMR）" class="headerlink" title="十、 Webpack热更新的原理（HMR）"></a>十、 Webpack热更新的原理（HMR）</h2><h3 id="什么是HMR？"><a href="#什么是HMR？" class="headerlink" title="什么是HMR？"></a>什么是HMR？</h3><blockquote><p>HMR即（Hot Module Replacement模块热替换）是指当代码发生修改并保存后，webpack会对更新的部分代码进行重新打包，并将新的模块发送到浏览器端，浏览器将新的模块替换掉旧的模块，这样能够在不刷新浏览器的前提下对应用进行更新。</p></blockquote><h3 id="Webpack热更新的工作流程"><a href="#Webpack热更新的工作流程" class="headerlink" title="Webpack热更新的工作流程"></a>Webpack热更新的工作流程</h3><ol><li>第一步：webpack启动监听模式之后，webpack第一次编译项目，并将结果存储在内存文件系统中，内存webpack服务器通知浏览器加载资源，浏览器获取的静态资源除了JS代码之外，还有一部分是通过webpack-dev-server注入的HMR runtime代码，作为浏览器和webpack通信的客户端。</li><li>第二步：文件系统中的一个文件或者模块发生了变化，webpack监听到文件变化对文件重新编译打包，每次编译生成唯一的hash值，根据变化的内容生成两个补丁文件，说明变化内容的manifest和chunk.js。</li><li>第三步：HMR-server通过websocket将manifest推送给浏览器。</li><li>第四步：浏览器端的HMR runtime根据manifest的hash和chunkid使用ajax拉取最新的模块chunk。</li><li>第五步：触发render流程实现局部热重载。</li></ol><h2 id="十一、webpack、babel和babel-loader三者之间的关系"><a href="#十一、webpack、babel和babel-loader三者之间的关系" class="headerlink" title="十一、webpack、babel和babel-loader三者之间的关系"></a>十一、webpack、babel和babel-loader三者之间的关系</h2><ul><li>babel是编译工具，把ES6及以上语法编译成ES5等低版本语法。</li><li>webpack是打包工具，定义入口文件，将所有的模块引入整理后，通过loader和plugin处理后，打包输出。</li><li>webpack通过babel-loader使用babel。</li></ul><h2 id="十二、webpack的Tree-shaking的作用及原理"><a href="#十二、webpack的Tree-shaking的作用及原理" class="headerlink" title="十二、webpack的Tree shaking的作用及原理"></a>十二、webpack的Tree shaking的作用及原理</h2><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><blockquote><p>Tree Shaking是一种通过清除多余代码来优化项目打包体积的技术。</p></blockquote><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><blockquote><p>借助ES6模块语法的静态结构，通过编译阶段的静态分析，找到没有引入的模块并打上标记，然后在压缩阶段利用像uglify-js这样的压缩工具删除没有用到的代码。</p></blockquote><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6942322281913778206">分享12个Webpack中常用的Loader</a></li></ul></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"> <span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">Justin</a></span></div><div class="reprint__type"> <span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://qq1120637483.github.io/2021/12/07/Webpackb%D5%98%EF%BF%BD%DF%B3%06%08%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD90%25:o%09/">https://qq1120637483.github.io/2021/12/07/Webpackb%D5%98%EF%BF%BD%DF%B3%06%08%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD90%25:o%09/</a></span></div><div class="reprint__notice"> <span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">Justin</a> !</span></div></div><script async defer="defer">
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"> <a href="/tags/Webpack/"><span class="chip bg-color">Webpack</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"> <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"> <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"> <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/2021/12/08/LeetCode%E2%80%94%E2%80%94%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%B1%82%E5%92%8C%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B1%82%E5%92%8C%E6%B3%95%EF%BC%89/"><div class="card-image"> <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="LeetCode——二进制求和（字符串求和法）"> <span class="card-title">LeetCode——二进制求和（字符串求和法）</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2021-12-08</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/LeetCode/" class="post-category">LeetCode</a></span></div></div><div class="card-action article-tags"> <a href="/tags/LeetCode/"><span class="chip bg-color">LeetCode</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color"> 下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/2021/12/06/LeetCode%E2%80%94%E2%80%94%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97%EF%BC%88%E5%85%A5%E9%98%9F%E6%A0%88+%E5%87%BA%E9%98%9F%E6%A0%88%EF%BC%89/"><div class="card-image"> <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="LeetCode——用栈实现队列（入队栈+出队栈）"> <span class="card-title">LeetCode——用栈实现队列（入队栈+出队栈）</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2021-12-06</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/LeetCode/" class="post-category">LeetCode</a></span></div></div><div class="card-action article-tags"> <a href="/tags/LeetCode/"><span class="chip bg-color">LeetCode</span></a></div></div></div></div></article></div><script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script></main><footer class="page-footer bg-color"><link rel="stylesheet" href="/libs/aplayer/APlayer.min.css"><style>.aplayer .aplayer-lrc p{display:none;font-size:12px;font-weight:700;line-height:16px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{display:none;font-size:15px;color:#42b983}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><div class=""><div class="row"><meting-js class="col l8 offset-l2 m10 offset-m1 s12" server="netease" type="playlist" id="503838841" fixed="true" autoplay="false" theme="#42b983" loop="all" order="random" preload="auto" volume="0.7" list-folded="true"></meting-js></div></div><script src="/libs/aplayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><div class="container row center-align" style="margin-bottom:0!important"><div class="col s12 m8 l8 copy-right"> Copyright&nbsp;&copy; <span id="year">2020-2022</span> <span id="year">2020</span> <a href="/about" target="_blank">Justin</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br> &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">314.7k</span> <span id="busuanzi_container_site_pv">&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span></span> <span id="busuanzi_container_site_uv">&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span></span><br><br> <span id="icp"><img src="/medias/icp.png" style="vertical-align:text-bottom"> <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">豫ICP备2020035275号-1</a></span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,a,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(a),n=document.getElementById(s);r.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var r=!0,n=t.title.trim().toLowerCase(),a=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url;e=0===e.indexOf("/")?t.url:"/"+e;var s=-1,i=-1,l=-1;if(""!==n&&""!==a&&m.forEach(function(t,e){s=n.indexOf(t),i=a.indexOf(t),s<0&&i<0?r=!1:(i<0&&(i=0),0===e&&(l=i))}),r){f+="<li><a href='"+e+"' class='search-result-title'>"+n+"</a>";var c=t.content.trim().replace(/<[^>]+>/g,"");if(0<=l){var u=l-20,o=l+80;u<0&&(u=0),0===u&&(o=100),o>c.length&&(o=c.length);var h=c.substr(u,o);m.forEach(function(t){var e=new RegExp(t,"gi");h=h.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),f+="</ul>",n.innerHTML=f)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/libs/others/clicklove.js" async="async"></script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script src="/libs/instantpage/instantpage.js" type="module"></script></body></html>